import{o as l,c as n,b as t,d as ke,r,k as f,m as Se,n as re,p as Ce,x as u,y as d,i as x,f as i,C as h,v as b,t as a,g as c,D as Z,w as ae,s as ie,F as z,q as B}from"./main-Vck6Gao2.js";import{_ as Me,f as O,r as de,g as W,h as _e}from"./api-CUatgf-F.js";import{_ as Ve}from"./TabNav.vue_vue_type_script_setup_true_lang-DRo0g8Pv.js";import{c as $e}from"./contactService-81bu-aJH.js";import{s as De,a as q,b as K}from"./notifications-CHQAjgV4.js";import{r as ue}from"./UserGroupIcon-s6US5Lzp.js";import{r as me,a as Ue}from"./FolderIcon-RzeCsi39.js";import{r as je}from"./DocumentArrowUpIcon-CoGKGGfy.js";import{r as Ae}from"./XMarkIcon-Bws6UOp6.js";function Ee(R,F){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})])}function Te(R,F){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"})])}function Ze(R,F){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}const ze={class:"p-6 lg:p-8"},Be={class:"mb-6"},Fe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},He={class:"text-2xl font-bold flex items-center gap-2"},Ie={class:"flex items-center gap-2"},Le=["disabled"],Ne={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Pe={class:"lg:col-span-2 space-y-6"},Oe={key:0,class:"space-y-6"},Re={class:"rounded-lg border bg-card p-6 space-y-6"},Ge={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Je={class:"space-y-2"},Xe={class:"space-y-2"},We={class:"space-y-2"},qe={class:"space-y-2"},Ke={class:"flex items-center justify-between"},Qe={class:"flex items-center gap-2"},Ye={class:"relative"},et={class:"flex items-center justify-between text-xs text-muted-foreground"},tt={key:0,class:"text-destructive"},st={class:"space-y-2"},ot={class:"flex items-center justify-between"},lt={class:"flex items-center gap-3 text-xs"},nt={class:"text-muted-foreground"},rt={key:0,class:"px-2 py-0.5 bg-warning/10 text-warning rounded font-medium"},at={key:1,class:"space-y-6"},it={class:"rounded-lg border bg-card p-6 space-y-6"},dt={class:"flex items-center gap-2 pb-4 border-b"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={class:"space-y-2"},pt={class:"space-y-2"},ct={class:"space-y-2"},vt={class:"space-y-2"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t"},gt={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},xt={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},bt={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},yt={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},ht={key:2,class:"space-y-6"},wt={class:"rounded-lg border bg-card p-6 space-y-6"},kt={class:"flex items-center gap-2 pb-4 border-b"},St={key:0,class:"p-4 bg-muted/50 rounded-lg"},Ct={class:"flex items-center justify-between"},Mt={class:"flex items-center gap-3"},_t={class:"font-medium"},Vt={class:"text-xs text-muted-foreground"},$t={key:1,class:"space-y-4"},Dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={class:"space-y-2"},jt=["value"],At={class:"space-y-2"},Et=["value"],Tt={key:2,class:"space-y-2"},Zt={class:"flex flex-col sm:flex-row gap-3"},zt=["disabled"],Bt={key:1,class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},Ft=["disabled"],Ht={class:"space-y-6"},It={class:"rounded-lg border bg-card p-6"},Lt={class:"font-semibold mb-4 flex items-center gap-2"},Nt={class:"space-y-3"},Pt={class:"flex justify-between text-sm"},Ot={class:"font-medium"},Rt={class:"flex justify-between text-sm"},Gt={class:"flex justify-between text-sm"},Jt={class:"font-medium"},Xt={class:"border-t pt-3 mt-3"},Wt={class:"flex justify-between"},qt={class:"text-xl font-bold text-primary"},Kt={class:"rounded-lg border bg-card p-6"},Qt={class:"space-y-2"},Yt={class:"rounded-lg border bg-card p-6"},es={class:"space-y-2"},ts=["onClick"],ss={class:"font-medium text-sm truncate"},os={class:"text-xs text-muted-foreground truncate"},ls={key:0,class:"text-sm text-muted-foreground text-center py-4"},ns={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},rs={class:"relative bg-card rounded-lg shadow-lg w-full max-w-md p-6 m-4"},as={class:"space-y-4"},is={class:"space-y-2"},ds=["min"],us={class:"space-y-2"},ms={class:"flex gap-3 mt-6"},ps=["disabled"],cs={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},vs={class:"relative bg-card rounded-lg shadow-lg w-full max-w-lg p-6 m-4 max-h-[80vh] overflow-hidden flex flex-col"},fs={class:"flex-1 overflow-y-auto space-y-2"},gs=["value"],xs={class:"font-medium text-sm"},bs={class:"text-xs text-muted-foreground"},ys={class:"flex gap-3 mt-4 pt-4 border-t"},hs={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},ws={class:"relative bg-card rounded-lg shadow-lg w-full max-w-lg p-6 m-4 max-h-[80vh] overflow-hidden flex flex-col"},ks={class:"flex-1 overflow-y-auto space-y-2"},Ss=["onClick"],Cs={class:"font-medium"},Ms={class:"text-sm text-muted-foreground mt-1 line-clamp-2"},Zs=ke({__name:"SendSms",setup(R){const F=[{id:"send",label:"Send SMS"},{id:"opt",label:"Send Opt SMS"},{id:"file",label:"SMS From File"}],w=r("send"),k=r("transactional"),S=r("auto"),H=r("JOBSSMS"),y=r(""),m=r(""),$=r(!1),g=r({unicode:!1,flash:!1,dlr:!0,priority:!1}),pe=r(null),I=r(!1),v=r(null),D=r({phone:"",name:""}),U=r(!1),C=r(!1),Q=r(!1),M=r(!1),_=r(""),V=r(""),ce=new Date().toISOString().split("T")[0],G=r([]),L=r(""),j=r([]),J=r([]),Y=f(()=>J.value.slice(0,3)),A=f(()=>y.value.split(/[\n,]/).map(o=>o.trim()).filter(o=>o.length>0)),E=f(()=>A.value.length),N=f(()=>{const o={airtel:0,moov:0,invalid:0};return A.value.forEach(e=>{const s=e.replace(/\D/g,"").slice(-8);if(s.length!==8){o.invalid++;return}const p=s.substring(0,2);["77","74","76"].includes(p)?o.airtel++:["60","62","65","66"].includes(p)?o.moov++:o.invalid++}),o}),ee=f(()=>m.value.length),T=f(()=>Math.ceil(ee.value/160)||1),P=f(()=>E.value*T.value),te=f(()=>P.value*20),X=f(()=>w.value==="file"?v.value&&m.value.trim().length>0:E.value>0&&m.value.trim().length>0),ve=f(()=>{if(!L.value)return G.value;const o=L.value.toLowerCase();return G.value.filter(e=>e.name.toLowerCase().includes(o)||e.phone.includes(o))});async function fe(){try{const o=await $e.getAll();G.value=o.filter(e=>e.status==="active")}catch(o){console.error("Error loading contacts:",o)}}async function se(){try{const o=await O.get("/templates");J.value=o.data.data||o.data||[]}catch(o){console.error("Error loading templates:",o)}}function oe(o){m.value=o.content}function ge(){const o=new Set(A.value);j.value.forEach(e=>o.add(e)),y.value=Array.from(o).join(`
`),j.value=[],C=!1}function xe(o){var s;I.value=!1;const e=(s=o.dataTransfer)==null?void 0:s.files;e&&e.length>0&&le(e[0])}function be(o){const e=o.target;e.files&&e.files.length>0&&le(e.files[0])}function le(o){v.value={name:o.name,rows:100,columns:["phone","name","email"]},D.value={phone:"phone",name:"name"}}async function ye(){var e,s;if(!(!X.value||!await De("Confirmer l'envoi",`Envoyer ${P.value} SMS a ${E.value} destinataire(s) pour ${te.value} XAF ?`))){$.value=!0;try{const p={recipients:A.value,message:m.value,type:"immediate",channel:k.value,route:S.value,sender_id:H.value,options:g.value};await O.post("/messages/send",p),q(`${P.value} SMS envoye(s) avec succes !`),ne()}catch(p){console.error("Error sending message:",p),K(((s=(e=p.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de l'envoi")}finally{$.value=!1}}}async function he(){var e,s;if(!_.value||!V.value)return;const o=`${_.value} ${V.value}`;try{await O.post("/messages/send",{recipients:A.value,message:m.value,type:"scheduled",scheduled_at:o,channel:k.value,route:S.value,sender_id:H.value}),q("Message planifie avec succes !"),U.value=!1,ne()}catch(p){K(((s=(e=p.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de la planification")}}async function we(){var o,e;try{await O.post("/templates",{name:`Brouillon ${new Date().toLocaleString()}`,content:m.value,is_public:!1}),q("Brouillon sauvegarde"),se()}catch(s){K(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de la sauvegarde")}}function ne(){y.value="",m.value="",v.value=null,_.value="",V.value=""}return Se(()=>{fe(),se()}),(o,e)=>(l(),re(Me,null,{default:Ce(()=>[t("div",ze,[t("div",Be,[t("div",Fe,[t("div",null,[t("h1",He,[u(d(de),{class:"w-7 h-7 text-primary"}),e[38]||(e[38]=x(" Envoi de SMS ",-1))]),e[39]||(e[39]=t("p",{class:"text-muted-foreground mt-1"},"Envoyez des SMS unitaires ou en masse",-1))]),t("div",Ie,[t("button",{onClick:e[0]||(e[0]=s=>M.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-accent transition-colors text-sm font-medium"},[u(d(W),{class:"w-4 h-4"}),e[40]||(e[40]=x(" Templates ",-1))]),t("button",{onClick:we,disabled:!m.value,class:"inline-flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-accent transition-colors text-sm font-medium disabled:opacity-50"},[u(d(Ee),{class:"w-4 h-4"}),e[41]||(e[41]=x(" Brouillon ",-1))],8,Le)])])]),u(Ve,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),tabs:F,class:"mb-6"},null,8,["modelValue"]),t("div",Ne,[t("div",Pe,[w.value==="send"?(l(),n("div",Oe,[t("div",Re,[t("div",Ge,[t("div",Je,[e[43]||(e[43]=t("label",{class:"text-sm font-medium"},"Message Channel",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>k.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus:ring-2 focus:ring-primary"},[...e[42]||(e[42]=[t("option",{value:"transactional"},"Transactional",-1),t("option",{value:"marketing"},"Marketing",-1)])],512),[[h,k.value]])]),t("div",Xe,[e[45]||(e[45]=t("label",{class:"text-sm font-medium"},"Message Route",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>S.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus:ring-2 focus:ring-primary"},[...e[44]||(e[44]=[t("option",{value:"auto"},"Auto (Recommended)",-1),t("option",{value:"airtel"},"Airtel Direct",-1),t("option",{value:"moov"},"Moov Direct",-1)])],512),[[h,S.value]])]),t("div",We,[e[47]||(e[47]=t("label",{class:"text-sm font-medium"},"Sender ID",-1)),i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>H.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus:ring-2 focus:ring-primary"},[...e[46]||(e[46]=[t("option",{value:"JOBSSMS"},"JOBSSMS (Default)",-1),t("option",{value:"SendWave"},"SendWave",-1)])],512),[[h,H.value]])])]),t("div",qe,[t("div",Ke,[e[50]||(e[50]=t("label",{class:"text-sm font-medium"},"Destinataires",-1)),t("div",Qe,[t("button",{onClick:e[5]||(e[5]=s=>C.value=!0),class:"text-xs text-primary hover:underline flex items-center gap-1"},[u(d(ue),{class:"w-4 h-4"}),e[48]||(e[48]=x(" Contacts ",-1))]),t("button",{onClick:e[6]||(e[6]=s=>Q.value=!0),class:"text-xs text-primary hover:underline flex items-center gap-1"},[u(d(me),{class:"w-4 h-4"}),e[49]||(e[49]=x(" Groupes ",-1))])])]),t("div",Ye,[i(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=s=>y.value=s),placeholder:`Entrez les numéros (un par ligne ou séparés par virgule)
+241 77 75 07 37
62 34 56 78`,rows:"4",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm font-mono focus:ring-2 focus:ring-primary resize-none"},null,512),[[b,y.value]])]),t("div",et,[t("span",null,a(E.value)+" destinataire(s) - Airtel: "+a(N.value.airtel)+", Moov: "+a(N.value.moov),1),N.value.invalid>0?(l(),n("span",tt,a(N.value.invalid)+" invalide(s)",1)):c("",!0)])]),t("div",st,[t("div",ot,[e[51]||(e[51]=t("label",{class:"text-sm font-medium"},"Message",-1)),t("div",lt,[t("span",nt,a(ee.value)+"/160",1),T.value>1?(l(),n("span",rt,a(T.value)+" SMS ",1)):c("",!0)])]),i(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>m.value=s),placeholder:"Tapez votre message ici...",rows:"6",maxlength:"640",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus:ring-2 focus:ring-primary resize-none"},null,512),[[b,m.value]])])])])):c("",!0),w.value==="opt"?(l(),n("div",at,[t("div",it,[t("div",dt,[u(d(Ze),{class:"w-5 h-5 text-primary"}),e[52]||(e[52]=t("h3",{class:"font-semibold"},"Options avancees",-1))]),t("div",ut,[t("div",mt,[e[54]||(e[54]=t("label",{class:"text-sm font-medium"},"Message Channel",-1)),i(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>k.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[...e[53]||(e[53]=[t("option",{value:"transactional"},"Transactional",-1),t("option",{value:"marketing"},"Marketing",-1)])],512),[[h,k.value]])]),t("div",pt,[e[56]||(e[56]=t("label",{class:"text-sm font-medium"},"Message Route",-1)),i(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>S.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[...e[55]||(e[55]=[t("option",{value:"auto"},"Auto",-1),t("option",{value:"airtel"},"Airtel Direct",-1),t("option",{value:"moov"},"Moov Direct",-1)])],512),[[h,S.value]])])]),t("div",ct,[e[57]||(e[57]=t("label",{class:"text-sm font-medium"},"Destinataires",-1)),i(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=s=>y.value=s),placeholder:"Numeros de telephone...",rows:"3",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm font-mono resize-none"},null,512),[[b,y.value]])]),t("div",vt,[e[58]||(e[58]=t("label",{class:"text-sm font-medium"},"Message",-1)),i(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>m.value=s),placeholder:"Votre message...",rows:"4",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm resize-none"},null,512),[[b,m.value]])]),t("div",ft,[t("label",gt,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=s=>g.value.unicode=s),class:"w-4 h-4 rounded"},null,512),[[Z,g.value.unicode]]),e[59]||(e[59]=t("div",null,[t("p",{class:"font-medium text-sm"},"Unicode Support"),t("p",{class:"text-xs text-muted-foreground"},"Caracteres speciaux et emojis")],-1))]),t("label",xt,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=s=>g.value.flash=s),class:"w-4 h-4 rounded"},null,512),[[Z,g.value.flash]]),e[60]||(e[60]=t("div",null,[t("p",{class:"font-medium text-sm"},"Flash SMS"),t("p",{class:"text-xs text-muted-foreground"},"Affichage immediat")],-1))]),t("label",bt,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=s=>g.value.dlr=s),class:"w-4 h-4 rounded"},null,512),[[Z,g.value.dlr]]),e[61]||(e[61]=t("div",null,[t("p",{class:"font-medium text-sm"},"Delivery Report"),t("p",{class:"text-xs text-muted-foreground"},"Accusé de réception")],-1))]),t("label",yt,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=s=>g.value.priority=s),class:"w-4 h-4 rounded"},null,512),[[Z,g.value.priority]]),e[62]||(e[62]=t("div",null,[t("p",{class:"font-medium text-sm"},"Prioritaire"),t("p",{class:"text-xs text-muted-foreground"},"Envoi en priorité haute")],-1))])])])])):c("",!0),w.value==="file"?(l(),n("div",ht,[t("div",wt,[t("div",kt,[u(d(je),{class:"w-5 h-5 text-primary"}),e[63]||(e[63]=t("h3",{class:"font-semibold"},"Import depuis fichier",-1))]),t("div",{onDragover:e[18]||(e[18]=ae(s=>I.value=!0,["prevent"])),onDragleave:e[19]||(e[19]=s=>I.value=!1),onDrop:ae(xe,["prevent"]),class:ie(["border-2 border-dashed rounded-lg p-8 text-center transition-colors",I.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"])},[t("input",{type:"file",ref_key:"fileInput",ref:pe,onChange:be,accept:".csv,.xlsx,.xls,.txt",class:"hidden"},null,544),u(d(Ue),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[64]||(e[64]=t("p",{class:"text-sm font-medium mb-2"},"Glissez-deposez votre fichier ici",-1)),e[65]||(e[65]=t("p",{class:"text-xs text-muted-foreground mb-4"},"ou",-1)),t("button",{onClick:e[17]||(e[17]=s=>o.$refs.fileInput.click()),class:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90"}," Parcourir "),e[66]||(e[66]=t("p",{class:"text-xs text-muted-foreground mt-4"}," Formats acceptes: CSV, Excel (.xlsx, .xls), TXT ",-1))],34),v.value?(l(),n("div",St,[t("div",Ct,[t("div",Mt,[u(d(W),{class:"w-8 h-8 text-primary"}),t("div",null,[t("p",_t,a(v.value.name),1),t("p",Vt,a(v.value.rows)+" lignes detectees",1)])]),t("button",{onClick:e[20]||(e[20]=s=>v.value=null),class:"text-muted-foreground hover:text-destructive"},[u(d(Ae),{class:"w-5 h-5"})])])])):c("",!0),v.value?(l(),n("div",$t,[e[70]||(e[70]=t("h4",{class:"font-medium"},"Mapping des colonnes",-1)),t("div",Dt,[t("div",Ut,[e[67]||(e[67]=t("label",{class:"text-sm font-medium"},"Colonne Telephone",-1)),i(t("select",{"onUpdate:modelValue":e[21]||(e[21]=s=>D.value.phone=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(l(!0),n(z,null,B(v.value.columns,s=>(l(),n("option",{key:s,value:s},a(s),9,jt))),128))],512),[[h,D.value.phone]])]),t("div",At,[e[69]||(e[69]=t("label",{class:"text-sm font-medium"},"Colonne Nom (optionnel)",-1)),i(t("select",{"onUpdate:modelValue":e[22]||(e[22]=s=>D.value.name=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[e[68]||(e[68]=t("option",{value:""},"-- Aucune --",-1)),(l(!0),n(z,null,B(v.value.columns,s=>(l(),n("option",{key:s,value:s},a(s),9,Et))),128))],512),[[h,D.value.name]])])])])):c("",!0),v.value?(l(),n("div",Tt,[e[71]||(e[71]=t("label",{class:"text-sm font-medium"},"Message (variables: {name}, {phone})",-1)),i(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=s=>m.value=s),placeholder:"Bonjour {name}, votre code est...",rows:"4",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm resize-none"},null,512),[[b,m.value]])])):c("",!0)])])):c("",!0),t("div",Zt,[t("button",{onClick:ye,disabled:!X.value||$.value,class:"flex-1 inline-flex items-center justify-center gap-2 h-12 px-6 bg-success text-white rounded-lg font-medium hover:bg-success/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[$.value?(l(),n("div",Bt)):(l(),re(d(de),{key:0,class:"w-5 h-5"})),x(" "+a($.value?"Envoi en cours...":"Envoyer maintenant"),1)],8,zt),t("button",{onClick:e[24]||(e[24]=s=>U.value=!0),disabled:!X.value,class:"inline-flex items-center justify-center gap-2 h-12 px-6 border rounded-lg font-medium hover:bg-accent disabled:opacity-50 transition-colors"},[u(d(_e),{class:"w-5 h-5"}),e[72]||(e[72]=x(" Planifier ",-1))],8,Ft)])]),t("div",Ht,[t("div",It,[t("h3",Lt,[u(d(Te),{class:"w-5 h-5 text-primary"}),e[73]||(e[73]=x(" Estimation ",-1))]),t("div",Nt,[t("div",Pt,[e[74]||(e[74]=t("span",{class:"text-muted-foreground"},"Destinataires",-1)),t("span",Ot,a(E.value),1)]),t("div",Rt,[e[75]||(e[75]=t("span",{class:"text-muted-foreground"},"SMS par message",-1)),t("span",{class:ie(["font-medium",T.value>1?"text-warning":""])},a(T.value),3)]),t("div",Gt,[e[76]||(e[76]=t("span",{class:"text-muted-foreground"},"Total SMS",-1)),t("span",Jt,a(P.value),1)]),t("div",Xt,[t("div",Wt,[e[77]||(e[77]=t("span",{class:"font-medium"},"Cout estime",-1)),t("span",qt,a(te.value)+" XAF",1)])])])]),t("div",Kt,[e[81]||(e[81]=t("h3",{class:"font-semibold mb-4"},"Actions rapides",-1)),t("div",Qt,[t("button",{onClick:e[25]||(e[25]=s=>C.value=!0),class:"w-full flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[u(d(ue),{class:"w-5 h-5 text-primary"}),e[78]||(e[78]=t("div",null,[t("p",{class:"font-medium text-sm"},"Ajouter des contacts"),t("p",{class:"text-xs text-muted-foreground"},"Depuis votre repertoire")],-1))]),t("button",{onClick:e[26]||(e[26]=s=>Q.value=!0),class:"w-full flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[u(d(me),{class:"w-5 h-5 text-primary"}),e[79]||(e[79]=t("div",null,[t("p",{class:"font-medium text-sm"},"Selectionner un groupe"),t("p",{class:"text-xs text-muted-foreground"},"Envoi a un groupe entier")],-1))]),t("button",{onClick:e[27]||(e[27]=s=>M.value=!0),class:"w-full flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[u(d(W),{class:"w-5 h-5 text-primary"}),e[80]||(e[80]=t("div",null,[t("p",{class:"font-medium text-sm"},"Utiliser un template"),t("p",{class:"text-xs text-muted-foreground"},"Messages predefinis")],-1))])])]),t("div",Yt,[e[82]||(e[82]=t("h3",{class:"font-semibold mb-4"},"Templates recents",-1)),t("div",es,[(l(!0),n(z,null,B(Y.value,s=>(l(),n("button",{key:s.id,onClick:p=>oe(s),class:"w-full p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[t("p",ss,a(s.name),1),t("p",os,a(s.content),1)],8,ts))),128)),Y.value.length===0?(l(),n("p",ls," Aucun template recent ")):c("",!0)])])])])]),U.value?(l(),n("div",ns,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[28]||(e[28]=s=>U.value=!1)}),t("div",rs,[e[85]||(e[85]=t("h3",{class:"text-lg font-semibold mb-4"},"Planifier l'envoi",-1)),t("div",as,[t("div",is,[e[83]||(e[83]=t("label",{class:"text-sm font-medium"},"Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[29]||(e[29]=s=>_.value=s),min:d(ce),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,8,ds),[[b,_.value]])]),t("div",us,[e[84]||(e[84]=t("label",{class:"text-sm font-medium"},"Heure",-1)),i(t("input",{type:"time","onUpdate:modelValue":e[30]||(e[30]=s=>V.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,V.value]])])]),t("div",ms,[t("button",{onClick:he,disabled:!_.value||!V.value,class:"flex-1 h-10 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 disabled:opacity-50"}," Planifier ",8,ps),t("button",{onClick:e[31]||(e[31]=s=>U.value=!1),class:"px-4 h-10 border rounded-lg hover:bg-accent"}," Annuler ")])])])):c("",!0),C.value?(l(),n("div",cs,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[32]||(e[32]=s=>C.value=!1)}),t("div",vs,[e[86]||(e[86]=t("h3",{class:"text-lg font-semibold mb-4"},"Selectionner des contacts",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[33]||(e[33]=s=>L.value=s),placeholder:"Rechercher...",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm mb-4"},null,512),[[b,L.value]]),t("div",fs,[(l(!0),n(z,null,B(ve.value,s=>(l(),n("label",{key:s.id,class:"flex items-center gap-3 p-3 rounded-lg border hover:bg-accent cursor-pointer"},[i(t("input",{type:"checkbox",value:s.phone,"onUpdate:modelValue":e[34]||(e[34]=p=>j.value=p),class:"w-4 h-4 rounded"},null,8,gs),[[Z,j.value]]),t("div",null,[t("p",xs,a(s.name),1),t("p",bs,a(s.phone),1)])]))),128))]),t("div",ys,[t("button",{onClick:ge,class:"flex-1 h-10 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90"}," Ajouter ("+a(j.value.length)+") ",1),t("button",{onClick:e[35]||(e[35]=s=>C.value=!1),class:"px-4 h-10 border rounded-lg hover:bg-accent"}," Annuler ")])])])):c("",!0),M.value?(l(),n("div",hs,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[36]||(e[36]=s=>M.value=!1)}),t("div",ws,[e[87]||(e[87]=t("h3",{class:"text-lg font-semibold mb-4"},"Templates",-1)),t("div",ks,[(l(!0),n(z,null,B(J.value,s=>(l(),n("button",{key:s.id,onClick:p=>{oe(s),M.value=!1},class:"w-full p-4 rounded-lg border hover:bg-accent transition-colors text-left"},[t("p",Cs,a(s.name),1),t("p",Ms,a(s.content),1)],8,Ss))),128))]),t("button",{onClick:e[37]||(e[37]=s=>M.value=!1),class:"mt-4 w-full h-10 border rounded-lg hover:bg-accent"}," Fermer ")])])):c("",!0)]),_:1}))}});export{Zs as default};
