import{o as r,c as n,b as e,d as ye,r as i,k as we,m as ke,n as I,p as Se,x as l,y as a,i as E,f as C,v as O,C as de,t as d,F as D,q as A,s as h,g as m}from"./main-BzIReI80.js";import{_ as Ce,f as j,a as De,r as Ae,m as re,h as Le}from"./api-DhO2lyeo.js";import{_ as Fe}from"./TabNav.vue_vue_type_script_setup_true_lang-CJj5woqi.js";import{a as R}from"./analyticsService-BV-Tefb0.js";import{a as $e,b as Me}from"./notifications-CHQAjgV4.js";import{r as U}from"./ArrowDownTrayIcon-bSZxC2hb.js";import{r as Ee}from"./RocketLaunchIcon-Bl1fRxDE.js";import{r as ne}from"./CheckCircleIcon-3J7LHPkr.js";import{r as ae}from"./BanknotesIcon-BL-7ydfi.js";function le(k,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function je(k,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})])}function Re(k,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"})])}function Te(k,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"})])}function Ve(k,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M2.273 5.625A4.483 4.483 0 0 1 5.25 4.5h13.5c1.141 0 2.183.425 2.977 1.125A3 3 0 0 0 18.75 3H5.25a3 3 0 0 0-2.977 2.625ZM2.273 8.625A4.483 4.483 0 0 1 5.25 7.5h13.5c1.141 0 2.183.425 2.977 1.125A3 3 0 0 0 18.75 6H5.25a3 3 0 0 0-2.977 2.625ZM5.25 9a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h13.5a3 3 0 0 0 3-3v-6a3 3 0 0 0-3-3H15a.75.75 0 0 0-.75.75 2.25 2.25 0 0 1-4.5 0A.75.75 0 0 0 9 9H5.25Z"})])}const He={class:"p-6 lg:p-8"},qe={class:"mb-6"},Pe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Be={class:"text-2xl font-bold flex items-center gap-2"},Xe={class:"flex items-center gap-2"},Ie=["disabled"],Oe=["disabled"],Ue={class:"rounded-lg border bg-card p-4 mb-6"},Ne={class:"flex flex-wrap items-end gap-4"},Ze={class:"flex-1 min-w-[150px]"},ze={class:"flex-1 min-w-[150px]"},Ke={key:0},Qe={key:0,class:"flex items-center justify-center py-12"},Ge={key:1,class:"space-y-6"},Je={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},We={class:"rounded-lg border bg-card p-5"},Ye={class:"flex items-center gap-2 mb-3"},et={class:"text-2xl font-bold"},tt={class:"rounded-lg border bg-card p-5"},st={class:"flex items-center gap-2 mb-3"},ot={class:"text-2xl font-bold"},dt={class:"text-xs text-success mt-1"},rt={class:"rounded-lg border bg-card p-5"},nt={class:"flex items-center gap-2 mb-3"},at={class:"text-2xl font-bold text-success"},lt={class:"text-xs text-muted-foreground mt-1"},it={class:"rounded-lg border bg-card p-5"},ct={class:"flex items-center gap-2 mb-3"},ut={class:"text-2xl font-bold"},pt={class:"text-xs text-muted-foreground mt-1"},mt={class:"rounded-lg border bg-card"},xt={class:"p-4 border-b flex items-center justify-between"},vt={class:"overflow-x-auto"},gt={class:"w-full"},ft={class:"divide-y"},_t={class:"px-4 py-3"},bt={class:"font-medium"},ht={class:"text-xs text-muted-foreground"},yt={class:"px-4 py-3 text-sm"},wt={class:"px-4 py-3 text-center"},kt={class:"px-4 py-3 text-center text-success"},St={class:"px-4 py-3 text-center text-destructive"},Ct={class:"px-4 py-3 text-center"},Dt={class:"px-4 py-3 text-right"},At={class:"px-4 py-3 text-center"},Lt={key:0,class:"p-8 text-center text-muted-foreground"},Ft={key:1,class:"space-y-6"},$t={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Mt={class:"rounded-lg border bg-card p-5"},Et={class:"text-2xl font-bold text-success"},jt={class:"rounded-lg border bg-card p-5"},Rt={class:"text-2xl font-bold text-warning"},Tt={class:"rounded-lg border bg-card p-5"},Vt={class:"text-2xl font-bold text-destructive"},Ht={class:"rounded-lg border bg-card p-5"},qt={class:"text-2xl font-bold"},Pt={class:"rounded-lg border bg-card"},Bt={class:"p-4 border-b flex items-center justify-between"},Xt={class:"flex gap-2"},It={class:"overflow-x-auto"},Ot={class:"w-full"},Ut={class:"divide-y"},Nt={class:"px-4 py-3"},Zt={class:"font-medium"},zt={class:"text-xs text-muted-foreground"},Kt={class:"px-4 py-3 text-sm max-w-xs truncate"},Qt={class:"px-4 py-3"},Gt={class:"px-4 py-3 text-sm"},Jt={class:"px-4 py-3 text-center"},Wt={key:0,class:"p-8 text-center text-muted-foreground"},Yt={key:2,class:"space-y-6"},es={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ts={class:"rounded-lg border bg-card p-5"},ss={class:"flex items-center gap-2 mb-2"},os={class:"text-2xl font-bold"},ds={class:"rounded-lg border bg-card p-5"},rs={class:"flex items-center gap-2 mb-2"},ns={class:"text-2xl font-bold"},as={class:"rounded-lg border bg-card p-5"},ls={class:"flex items-center gap-2 mb-2"},is={class:"text-2xl font-bold"},cs={class:"rounded-lg border bg-card"},us={class:"divide-y"},ps={class:"flex items-center gap-4"},ms={class:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center"},xs={class:"font-medium"},vs={class:"text-sm text-muted-foreground"},gs={class:"text-right"},fs={class:"font-medium"},_s={key:0,class:"p-8 text-center text-muted-foreground"},bs={key:3,class:"space-y-6"},hs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ys=["onClick"],ws={class:"flex items-center justify-between mb-4"},ks={class:"font-semibold"},Ss={class:"grid grid-cols-2 gap-4"},Cs={class:"text-lg font-bold"},Ds={class:"text-lg font-bold"},As={class:"text-lg font-bold"},Ls={class:"text-lg font-bold text-success"},Fs={class:"mt-4 pt-4 border-t flex justify-end"},$s={class:"text-xs text-primary hover:underline flex items-center gap-1"},Ms={key:0,class:"text-center py-12"},Es={key:4,class:"space-y-6"},js={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Rs={class:"rounded-lg border bg-card p-5"},Ts={class:"flex items-center gap-2 mb-2"},Vs={class:"text-2xl font-bold text-success"},Hs={class:"rounded-lg border bg-card p-5"},qs={class:"flex items-center gap-2 mb-2"},Ps={class:"text-2xl font-bold text-destructive"},Bs={class:"rounded-lg border bg-card p-5"},Xs={class:"flex items-center gap-2 mb-2"},Is={class:"text-2xl font-bold text-primary"},Os={class:"rounded-lg border bg-card"},Us={class:"divide-y"},Ns={class:"flex items-center gap-4"},Zs={class:"font-medium"},zs={class:"text-sm text-muted-foreground"},Ks={class:"text-right"},Qs={class:"text-xs text-muted-foreground"},Gs={key:0,class:"p-8 text-center text-muted-foreground"},ao=ye({__name:"Reports",setup(k){const y=[{id:"campaign",label:"Campaign Report"},{id:"delivery",label:"Delivery Report"},{id:"schedule",label:"Schedule Report"},{id:"archived",label:"Archived Report"},{id:"credit",label:"Credit History"}],f=i("campaign"),c=i(""),u=i(""),T=i(""),V=i(!0),L=i(!1),g=i(null),H=i([]),F=i(""),N=i(""),_=i([]),S=i({delivered:0,pending:0,failed:0,rate:0}),w=i([]),$=i([]),M=i({purchased:0,used:0,balance:0}),q=i([]),Z=we(()=>{if(!F.value)return H.value;const o=F.value.toLowerCase();return H.value.filter(t=>t.name.toLowerCase().includes(o))});function ie(){const o=new Date,t=new Date;t.setDate(t.getDate()-30),u.value=o.toISOString().split("T")[0],c.value=t.toISOString().split("T")[0]}function ce(){const o=new Date;let t=new Date;switch(T.value){case"today":t=new Date;break;case"yesterday":t=new Date,t.setDate(t.getDate()-1);break;case"week":t.setDate(o.getDate()-7);break;case"month":t.setMonth(o.getMonth()-1);break;case"quarter":t.setMonth(o.getMonth()-3);break}c.value=t.toISOString().split("T")[0],u.value=o.toISOString().split("T")[0],P()}async function P(){V.value=!0;try{await Promise.all([ue(),pe(),me(),xe(),ve()])}finally{V.value=!1}}async function ue(){try{const o=await R.getDashboard("month");g.value=o.data;const t=await j.get("/campaigns/history",{params:{start_date:c.value,end_date:u.value}});H.value=t.data.data||t.data||[]}catch(o){console.error("Error loading dashboard:",o)}}async function pe(){try{const o=await j.get("/messages/history",{params:{start_date:c.value,end_date:u.value,per_page:100}});_.value=o.data.data||o.data||[];const t=_.value.filter(v=>v.status==="delivered"||v.status==="sent").length,b=_.value.filter(v=>v.status==="failed").length,p=_.value.filter(v=>v.status==="pending").length,x=_.value.length;S.value={delivered:t,pending:p,failed:b,rate:x>0?t/x*100:0}}catch(o){console.error("Error loading delivery report:",o)}}async function me(){try{const o=await j.get("/campaigns",{params:{status:"scheduled,pending"}});w.value=o.data.data||o.data||[]}catch(o){console.error("Error loading scheduled campaigns:",o)}}async function xe(){try{const o=await j.get("/sms-analytics/periods");$.value=(o.data.periods||[]).map(t=>({period:t.period_key,label:t.formatted,total_sms:t.total_sms,total_cost:t.total_cost,campaigns_count:t.campaigns_count||0,success_rate:t.success_rate||0}))}catch(o){console.error("Error loading archived periods:",o),$.value=[]}}async function ve(){M.value={purchased:5e5,used:125e3,balance:375e3},q.value=[{id:1,type:"credit",description:"Achat de credits",amount:1e5,balance_after:475e3,created_at:new Date().toISOString()},{id:2,type:"debit",description:'Campagne "Promotion Noel"',amount:25e3,balance_after:45e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:3,type:"debit",description:"Envois transactionnels",amount:12500,balance_after:437500,created_at:new Date(Date.now()-1728e5).toISOString()}]}async function ge(o){console.log("Loading archive for period:",o)}async function z(o){var t,b;try{L.value=!0;let p,x;o==="pdf"?(p=await R.exportPdf(c.value,u.value),x=`rapport_${c.value}_${u.value}.pdf`):(p=await R.exportExcel(c.value,u.value),x=`rapport_${c.value}_${u.value}.xlsx`),R.downloadFile(p,x),$e(`Rapport ${o.toUpperCase()} telecharge`)}catch(p){Me(((b=(t=p.response)==null?void 0:t.data)==null?void 0:b.message)||"Erreur lors de l'export")}finally{L.value=!1}}function fe(o){return o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(1)}K`:o.toString()}function _e(o){return o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"-"}function B(o){return o?new Date(o).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function K(o){const t=(o||"").toLowerCase();return["completed","termine","done"].includes(t)?"bg-success/10 text-success":["active","sending","running"].includes(t)?"bg-blue-100 text-blue-700":["scheduled","pending","draft"].includes(t)?"bg-warning/10 text-warning":["failed","error"].includes(t)?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}function be(o){const t=(o||"").toLowerCase();return["delivered","sent"].includes(t)?"bg-success/10 text-success":["pending"].includes(t)?"bg-warning/10 text-warning":["failed"].includes(t)?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}function he(o){return o>=90?"text-success font-semibold":o>=70?"text-warning font-semibold":"text-destructive font-semibold"}return ke(()=>{ie(),P()}),(o,t)=>(r(),I(Ce,null,{default:Se(()=>{var b,p,x,v,Q,G,J,W,Y,ee;return[e("div",He,[e("div",qe,[e("div",Pe,[e("div",null,[e("h1",Be,[l(a(De),{class:"w-7 h-7 text-primary"}),t[8]||(t[8]=E(" Rapports & Statistiques ",-1))]),t[9]||(t[9]=e("p",{class:"text-muted-foreground mt-1"},"Analysez les performances de vos envois",-1))]),e("div",Xe,[e("button",{onClick:t[0]||(t[0]=s=>z("pdf")),disabled:L.value,class:"inline-flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-accent text-sm font-medium disabled:opacity-50"},[l(a(U),{class:"w-4 h-4"}),t[10]||(t[10]=E(" PDF ",-1))],8,Ie),e("button",{onClick:t[1]||(t[1]=s=>z("excel")),disabled:L.value,class:"inline-flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-accent text-sm font-medium disabled:opacity-50"},[l(a(U),{class:"w-4 h-4"}),t[11]||(t[11]=E(" Excel ",-1))],8,Oe)])])]),l(Fe,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),tabs:y,class:"mb-6"},null,8,["modelValue"]),e("div",Ue,[e("div",Ne,[e("div",Ze,[t[12]||(t[12]=e("label",{class:"text-sm font-medium mb-1 block"},"Date debut",-1)),C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>c.value=s),type:"date",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[O,c.value]])]),e("div",ze,[t[13]||(t[13]=e("label",{class:"text-sm font-medium mb-1 block"},"Date fin",-1)),C(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value=s),type:"date",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[O,u.value]])]),e("button",{onClick:P,class:"h-10 px-4 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90"}," Appliquer "),C(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>T.value=s),onChange:ce,class:"h-10 px-3 rounded-md border border-input bg-background text-sm"},[...t[14]||(t[14]=[e("option",{value:""},"Periode rapide...",-1),e("option",{value:"today"},"Aujourd'hui",-1),e("option",{value:"yesterday"},"Hier",-1),e("option",{value:"week"},"Cette semaine",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1)])],544),[[de,T.value]])])]),f.value==="campaign"?(r(),n("div",Ke,[V.value?(r(),n("div",Qe,[...t[15]||(t[15]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):(r(),n("div",Ge,[e("div",Je,[e("div",We,[e("div",Ye,[l(a(Ee),{class:"w-5 h-5 text-primary"}),t[16]||(t[16]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Campagnes",-1))]),e("p",et,d(((b=g.value)==null?void 0:b.overview.campaigns_executed)||0),1),t[17]||(t[17]=e("p",{class:"text-xs text-muted-foreground mt-1"},"sur la periode",-1))]),e("div",tt,[e("div",st,[l(a(Ae),{class:"w-5 h-5 text-primary"}),t[18]||(t[18]=e("span",{class:"text-sm font-medium text-muted-foreground"},"SMS Envoyes",-1))]),e("p",ot,d(fe(((p=g.value)==null?void 0:p.overview.sms_sent)||0)),1),e("p",dt,d((v=(x=g.value)==null?void 0:x.overview.success_rate)==null?void 0:v.toFixed(1))+"% livres",1)]),e("div",rt,[e("div",nt,[l(a(ne),{class:"w-5 h-5 text-success"}),t[19]||(t[19]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Taux de succes",-1))]),e("p",at,d(((G=(Q=g.value)==null?void 0:Q.overview.success_rate)==null?void 0:G.toFixed(1))||0)+"%",1),e("p",lt,d(((J=g.value)==null?void 0:J.overview.sms_delivered)||0)+" livres",1)]),e("div",it,[e("div",ct,[l(a(ae),{class:"w-5 h-5 text-warning"}),t[20]||(t[20]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Cout Total",-1))]),e("p",ut,d((((W=g.value)==null?void 0:W.overview.total_cost)||0).toLocaleString())+" XAF",1),e("p",pt,d(((ee=(Y=g.value)==null?void 0:Y.overview.average_cost_per_sms)==null?void 0:ee.toFixed(0))||0)+" XAF/SMS",1)])]),e("div",mt,[e("div",xt,[t[21]||(t[21]=e("h3",{class:"font-semibold"},"Liste des campagnes",-1)),C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>F.value=s),type:"text",placeholder:"Rechercher...",class:"h-9 px-3 rounded-md border border-input bg-background text-sm w-64"},null,512),[[O,F.value]])]),e("div",vt,[e("table",gt,[t[22]||(t[22]=e("thead",{class:"bg-muted/50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Campagne"),e("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Date"),e("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Envoyes"),e("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Livres"),e("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Echecs"),e("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Taux"),e("th",{class:"px-4 py-3 text-right text-sm font-medium"},"Cout"),e("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Statut")])],-1)),e("tbody",ft,[(r(!0),n(D,null,A(Z.value,s=>{var X,te,se,oe;return r(),n("tr",{key:s.id,class:"hover:bg-muted/30"},[e("td",_t,[e("div",bt,d(s.name),1),e("div",ht,"ID: "+d(s.id),1)]),e("td",yt,d(_e(s.sent_at||s.created_at)),1),e("td",wt,d((X=s.messages_sent)==null?void 0:X.toLocaleString()),1),e("td",kt,d(((te=s.delivered)==null?void 0:te.toLocaleString())||"-"),1),e("td",St,d(((se=s.failed)==null?void 0:se.toLocaleString())||"-"),1),e("td",Ct,[e("span",{class:h(he(s.success_rate))},d(((oe=s.success_rate)==null?void 0:oe.toFixed(1))||0)+"% ",3)]),e("td",Dt,d((s.cost||0).toLocaleString())+" XAF",1),e("td",At,[e("span",{class:h(["px-2 py-1 text-xs rounded-full",K(s.status)])},d(s.status),3)])])}),128))])])]),Z.value.length===0?(r(),n("div",Lt," Aucune campagne sur cette periode ")):m("",!0)])]))])):m("",!0),f.value==="delivery"?(r(),n("div",Ft,[e("div",$t,[e("div",Mt,[t[23]||(t[23]=e("div",{class:"flex items-center gap-2 mb-2"},[e("div",{class:"w-3 h-3 rounded-full bg-success"}),e("span",{class:"text-sm font-medium"},"Livres")],-1)),e("p",Et,d(S.value.delivered),1)]),e("div",jt,[t[24]||(t[24]=e("div",{class:"flex items-center gap-2 mb-2"},[e("div",{class:"w-3 h-3 rounded-full bg-warning"}),e("span",{class:"text-sm font-medium"},"En attente")],-1)),e("p",Rt,d(S.value.pending),1)]),e("div",Tt,[t[25]||(t[25]=e("div",{class:"flex items-center gap-2 mb-2"},[e("div",{class:"w-3 h-3 rounded-full bg-destructive"}),e("span",{class:"text-sm font-medium"},"Echecs")],-1)),e("p",Vt,d(S.value.failed),1)]),e("div",Ht,[t[26]||(t[26]=e("div",{class:"flex items-center gap-2 mb-2"},[e("div",{class:"w-3 h-3 rounded-full bg-primary"}),e("span",{class:"text-sm font-medium"},"Taux global")],-1)),e("p",qt,d(S.value.rate.toFixed(1))+"%",1)])]),e("div",Pt,[e("div",Bt,[t[28]||(t[28]=e("h3",{class:"font-semibold"},"Historique des livraisons",-1)),e("div",Xt,[C(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>N.value=s),class:"h-9 px-3 rounded-md border border-input bg-background text-sm"},[...t[27]||(t[27]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"delivered"},"Livres",-1),e("option",{value:"sent"},"Envoyes",-1),e("option",{value:"failed"},"Echecs",-1)])],512),[[de,N.value]])])]),e("div",It,[e("table",Ot,[t[29]||(t[29]=e("thead",{class:"bg-muted/50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Destinataire"),e("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Message"),e("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Operateur"),e("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Date envoi"),e("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Statut")])],-1)),e("tbody",Ut,[(r(!0),n(D,null,A(_.value,s=>(r(),n("tr",{key:s.id,class:"hover:bg-muted/30"},[e("td",Nt,[e("div",Zt,d(s.recipient_phone),1),e("div",zt,d(s.recipient_name||"-"),1)]),e("td",Kt,d(s.content),1),e("td",Qt,[e("span",{class:h(["px-2 py-1 text-xs rounded",s.provider==="airtel"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},d(s.provider),3)]),e("td",Gt,d(B(s.sent_at)),1),e("td",Jt,[e("span",{class:h(["px-2 py-1 text-xs rounded-full",be(s.status)])},d(s.status),3)])]))),128))])])]),_.value.length===0?(r(),n("div",Wt," Aucun message sur cette periode ")):m("",!0)])])):m("",!0),f.value==="schedule"?(r(),n("div",Yt,[e("div",es,[e("div",ts,[e("div",ss,[l(a(re),{class:"w-5 h-5 text-primary"}),t[30]||(t[30]=e("span",{class:"text-sm font-medium"},"Planifiees",-1))]),e("p",os,d(w.value.filter(s=>s.status==="scheduled").length),1)]),e("div",ds,[e("div",rs,[l(a(Le),{class:"w-5 h-5 text-warning"}),t[31]||(t[31]=e("span",{class:"text-sm font-medium"},"En attente",-1))]),e("p",ns,d(w.value.filter(s=>s.status==="pending").length),1)]),e("div",as,[e("div",ls,[l(a(ne),{class:"w-5 h-5 text-success"}),t[32]||(t[32]=e("span",{class:"text-sm font-medium"},"Executees",-1))]),e("p",is,d(w.value.filter(s=>s.status==="completed").length),1)])]),e("div",cs,[t[33]||(t[33]=e("div",{class:"p-4 border-b"},[e("h3",{class:"font-semibold"},"Campagnes planifiees")],-1)),e("div",us,[(r(!0),n(D,null,A(w.value,s=>(r(),n("div",{key:s.id,class:"p-4 flex items-center justify-between hover:bg-muted/30"},[e("div",ps,[e("div",ms,[l(a(re),{class:"w-5 h-5 text-primary"})]),e("div",null,[e("p",xs,d(s.name),1),e("p",vs,d(s.recipients_count)+" destinataires",1)])]),e("div",gs,[e("p",fs,d(B(s.scheduled_at)),1),e("span",{class:h(["px-2 py-1 text-xs rounded-full",K(s.status)])},d(s.status),3)])]))),128))]),w.value.length===0?(r(),n("div",_s," Aucune campagne planifiee ")):m("",!0)])])):m("",!0),f.value==="archived"?(r(),n("div",bs,[e("div",hs,[(r(!0),n(D,null,A($.value,s=>(r(),n("div",{key:s.period,class:"rounded-lg border bg-card p-5 hover:shadow-md transition-shadow cursor-pointer",onClick:X=>ge(s.period)},[e("div",ws,[e("h3",ks,d(s.label),1),l(a(le),{class:"w-5 h-5 text-muted-foreground"})]),e("div",Ss,[e("div",null,[t[34]||(t[34]=e("p",{class:"text-xs text-muted-foreground"},"SMS",-1)),e("p",Cs,d(s.total_sms.toLocaleString()),1)]),e("div",null,[t[35]||(t[35]=e("p",{class:"text-xs text-muted-foreground"},"Cout",-1)),e("p",Ds,d(s.total_cost.toLocaleString())+" XAF",1)]),e("div",null,[t[36]||(t[36]=e("p",{class:"text-xs text-muted-foreground"},"Campagnes",-1)),e("p",As,d(s.campaigns_count),1)]),e("div",null,[t[37]||(t[37]=e("p",{class:"text-xs text-muted-foreground"},"Taux",-1)),e("p",Ls,d(s.success_rate.toFixed(1))+"%",1)])]),e("div",Fs,[e("button",$s,[l(a(U),{class:"w-4 h-4"}),t[38]||(t[38]=E(" Exporter ",-1))])])],8,ys))),128))]),$.value.length===0?(r(),n("div",Ms,[l(a(le),{class:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),t[39]||(t[39]=e("h3",{class:"text-lg font-semibold mb-2"},"Aucune archive",-1)),t[40]||(t[40]=e("p",{class:"text-muted-foreground"},"Les archives seront creees automatiquement chaque mois",-1))])):m("",!0)])):m("",!0),f.value==="credit"?(r(),n("div",Es,[e("div",js,[e("div",Rs,[e("div",Ts,[l(a(ae),{class:"w-5 h-5 text-success"}),t[41]||(t[41]=e("span",{class:"text-sm font-medium"},"Credits achetes",-1))]),e("p",Vs,d(M.value.purchased.toLocaleString())+" XAF",1)]),e("div",Hs,[e("div",qs,[l(a(Re),{class:"w-5 h-5 text-destructive"}),t[42]||(t[42]=e("span",{class:"text-sm font-medium"},"Credits utilises",-1))]),e("p",Ps,d(M.value.used.toLocaleString())+" XAF",1)]),e("div",Bs,[e("div",Xs,[l(a(Ve),{class:"w-5 h-5 text-primary"}),t[43]||(t[43]=e("span",{class:"text-sm font-medium"},"Solde actuel",-1))]),e("p",Is,d(M.value.balance.toLocaleString())+" XAF",1)])]),e("div",Os,[t[44]||(t[44]=e("div",{class:"p-4 border-b"},[e("h3",{class:"font-semibold"},"Historique des credits")],-1)),e("div",Us,[(r(!0),n(D,null,A(q.value,s=>(r(),n("div",{key:s.id,class:"p-4 flex items-center justify-between hover:bg-muted/30"},[e("div",Ns,[e("div",{class:h(["w-10 h-10 rounded-full flex items-center justify-center",s.type==="credit"?"bg-success/10":"bg-destructive/10"])},[s.type==="credit"?(r(),I(a(Te),{key:0,class:"w-5 h-5 text-success"})):(r(),I(a(je),{key:1,class:"w-5 h-5 text-destructive"}))],2),e("div",null,[e("p",Zs,d(s.description),1),e("p",zs,d(B(s.created_at)),1)])]),e("div",Ks,[e("p",{class:h(["font-bold",s.type==="credit"?"text-success":"text-destructive"])},d(s.type==="credit"?"+":"-")+d(s.amount.toLocaleString())+" XAF ",3),e("p",Qs,"Solde: "+d(s.balance_after.toLocaleString())+" XAF",1)])]))),128))]),q.value.length===0?(r(),n("div",Gs," Aucune transaction ")):m("",!0)])])):m("",!0)])]}),_:1}))}});export{ao as default};
