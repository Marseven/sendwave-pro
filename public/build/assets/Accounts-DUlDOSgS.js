import{d as F,r as u,l as N,m as U,n as z,o as l,b as e,p as v,q as g,c,F as I,x as L,t as f,s as T,w as A,f as x,v as k,A as q,g as j}from"./main-CoGMHHt9.js";import{e as m,_ as D,h as R}from"./api-Cjgg3nLh.js";import{a as C,b as M,s as G}from"./notifications-CHQAjgV4.js";import{r as H}from"./BanknotesIcon-CJC9QUWH.js";import{r as J}from"./PencilIcon-DC0Nlpe4.js";import{r as K}from"./TrashIcon-Bq9_Eusu.js";import{r as O}from"./XMarkIcon-C9QblEve.js";const y={async getAll(){const i=await m.get("/sub-accounts");return i.data.data||i.data},async getById(i){const n=await m.get(`/sub-accounts/${i}`);return n.data.data||n.data},async create(i){const n=await m.post("/sub-accounts",i);return n.data.data||n.data},async update(i,n){const a=await m.put(`/sub-accounts/${i}`,n);return a.data.data||a.data},async delete(i){await m.delete(`/sub-accounts/${i}`)},async recharge(i,n){const a=await m.post(`/sub-accounts/${i}/recharge`,{amount:n});return a.data.data||a.data}},P={class:"p-8"},Q={class:"mb-8 flex items-center justify-between"},W={key:0,class:"flex items-center justify-center py-12"},X={key:1,class:"flex flex-col items-center justify-center py-12 rounded-lg border bg-card"},Y={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Z={class:"flex items-center justify-between mb-4"},ee={class:"font-semibold"},se={class:"space-y-2 text-sm"},te={class:"flex justify-between"},oe={class:"font-semibold"},ie={class:"flex justify-between"},ne={class:"flex justify-between"},re={class:"text-success"},ae={class:"flex gap-2 mt-4"},le=["onClick"],de=["onClick"],ue={class:"bg-background rounded-lg shadow-lg w-full max-w-md p-6"},ce={class:"flex items-center justify-between mb-6"},fe={class:"text-xl font-bold"},me={class:"space-y-2"},pe={class:"grid grid-cols-2 gap-4"},ve={class:"space-y-2"},ge={class:"space-y-2"},be={class:"space-y-2"},xe={class:"flex gap-3 pt-4 border-t"},ye=["disabled"],we={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Se=F({__name:"Accounts",setup(i){const n=u([]),a=u(!1),p=u(!1),w=u(!1),h=u(!1),d=u(null),r=u({name:"",credits_remaining:0,delivery_rate:98.5,status:"active"});async function _(){a.value=!0;try{n.value=await y.getAll()}catch(o){console.error("Error loading accounts:",o)}finally{a.value=!1}}function S(){d.value=null,r.value={name:"",credits_remaining:0,delivery_rate:98.5,status:"active"},w.value=!0}function $(o){d.value=o,r.value={name:o.name,credits_remaining:o.credits_remaining||0,delivery_rate:o.delivery_rate||98.5,status:o.status},h.value=!0}function b(){w.value=!1,h.value=!1,d.value=null}async function E(){var o,s;p.value=!0;try{d.value?(await y.update(d.value.id,r.value),C("Compte modifié avec succès")):(await y.create(r.value),C("Compte créé avec succès")),b(),await _()}catch(t){M(((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.message)||t.message||"Erreur lors de l'enregistrement")}finally{p.value=!1}}async function V(o){if(await G("Supprimer le compte ?",`Êtes-vous sûr de vouloir supprimer le compte "${o.name}" ?`))try{await y.delete(o.id),C("Compte supprimé avec succès"),await _()}catch(t){M(t.message||"Erreur lors de la suppression")}}return N(()=>{_()}),(o,s)=>(l(),U(D,null,{default:z(()=>[e("div",P,[e("div",Q,[s[5]||(s[5]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"Comptes SMS"),e("p",{class:"text-muted-foreground mt-2"},"Gérez vos comptes d'envoi SMS")],-1)),e("button",{onClick:S,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[v(g(R),{class:"w-4 h-4"}),s[4]||(s[4]=e("span",null,"Ajouter un compte",-1))])]),a.value?(l(),c("div",W,[...s[6]||(s[6]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):n.value.length===0?(l(),c("div",X,[v(g(H),{class:"w-16 h-16 text-muted-foreground mb-4"}),s[7]||(s[7]=e("p",{class:"text-lg font-medium"},"Aucun compte trouvé",-1)),s[8]||(s[8]=e("p",{class:"text-sm text-muted-foreground mt-1"},"Ajoutez votre premier compte pour commencer",-1))])):(l(),c("div",Y,[(l(!0),c(I,null,L(n.value,t=>(l(),c("div",{key:t.id,class:"rounded-lg border bg-card shadow-sm p-6 hover:shadow-md transition-shadow"},[e("div",Z,[e("h3",ee,f(t.name),1),e("span",{class:T(["text-xs px-2 py-1 rounded-full",t.status==="active"?"bg-success/10 text-success":"bg-muted text-muted-foreground"])},f(t.status==="active"?"Actif":"Inactif"),3)]),e("div",se,[e("div",te,[s[9]||(s[9]=e("span",{class:"text-muted-foreground"},"Crédits restants",-1)),e("span",oe,f((t.credits_remaining||0).toLocaleString("fr-FR")),1)]),e("div",ie,[s[10]||(s[10]=e("span",{class:"text-muted-foreground"},"Utilisés ce mois",-1)),e("span",null,f((t.credits_used_this_month||0).toLocaleString("fr-FR")),1)]),e("div",ne,[s[11]||(s[11]=e("span",{class:"text-muted-foreground"},"Taux de livraison",-1)),e("span",re,f(t.delivery_rate||0)+"%",1)])]),e("div",ae,[e("button",{onClick:B=>$(t),class:"flex-1 inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9"},[v(g(J),{class:"w-4 h-4"}),s[12]||(s[12]=e("span",null,"Modifier",-1))],8,le),e("button",{onClick:B=>V(t),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-destructive/10 hover:text-destructive h-9 w-9"},[v(g(K),{class:"w-4 h-4"})],8,de)])]))),128))]))]),w.value||h.value?(l(),c("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:A(b,["self"])},[e("div",ue,[e("div",ce,[e("h2",fe,f(d.value?"Modifier le compte":"Nouveau compte"),1),e("button",{onClick:b,class:"hover:bg-accent rounded-full p-1"},[v(g(O),{class:"w-5 h-5"})])]),e("form",{onSubmit:A(E,["prevent"]),class:"space-y-4"},[e("div",me,[s[13]||(s[13]=e("label",{class:"text-sm font-medium"},"Nom du compte *",-1)),x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.name=t),type:"text",required:"",placeholder:"Compte principal",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[k,r.value.name]])]),e("div",pe,[e("div",ve,[s[14]||(s[14]=e("label",{class:"text-sm font-medium"},"Crédits",-1)),x(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.credits_remaining=t),type:"number",min:"0",placeholder:"1000",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[k,r.value.credits_remaining,void 0,{number:!0}]])]),e("div",ge,[s[15]||(s[15]=e("label",{class:"text-sm font-medium"},"Taux livraison (%)",-1)),x(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.delivery_rate=t),type:"number",min:"0",max:"100",step:"0.1",placeholder:"98.5",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[k,r.value.delivery_rate,void 0,{number:!0}]])])]),e("div",be,[s[17]||(s[17]=e("label",{class:"text-sm font-medium"},"Statut",-1)),x(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.value.status=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...s[16]||(s[16]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[q,r.value.status]])]),e("div",xe,[e("button",{type:"button",onClick:b,class:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Annuler "),e("button",{type:"submit",disabled:p.value,class:"flex-1 inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[p.value?(l(),c("div",we)):j("",!0),e("span",null,f(p.value?"Enregistrement...":d.value?"Modifier":"Créer"),1)],8,ye)])],32)])])):j("",!0)]),_:1}))}});export{Se as default};
