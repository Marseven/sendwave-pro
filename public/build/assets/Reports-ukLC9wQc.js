import{o as r,c as n,b as t,d as yt,r as i,k as wt,m as kt,n as Z,p as St,x as l,y as a,i as _,f as E,v as z,C as at,t as o,F as w,q as k,s as c,g as p}from"./main-BcgoGG9h.js";import{_ as Ct,f as H,a as Dt,r as Lt,n as lt,i as $t}from"./api-t-xCStKc.js";import{_ as Mt}from"./TabNav.vue_vue_type_script_setup_true_lang-azSSVh6S.js";import{a as q}from"./analyticsService-CYc9KUMZ.js";import{a as At,b as Et}from"./notifications-CHQAjgV4.js";import{r as K}from"./ArrowDownTrayIcon-BFO9RCGE.js";import{r as Ft}from"./RocketLaunchIcon-kgBiFQ93.js";import{r as it}from"./CheckCircleIcon-uLZtuMFC.js";import{r as ct}from"./BanknotesIcon-DNc8k6I8.js";function ut(L,S){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function jt(L,S){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})])}function Tt(L,S){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"})])}function Rt(L,S){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"})])}function Vt(L,S){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M2.273 5.625A4.483 4.483 0 0 1 5.25 4.5h13.5c1.141 0 2.183.425 2.977 1.125A3 3 0 0 0 18.75 3H5.25a3 3 0 0 0-2.977 2.625ZM2.273 8.625A4.483 4.483 0 0 1 5.25 7.5h13.5c1.141 0 2.183.425 2.977 1.125A3 3 0 0 0 18.75 6H5.25a3 3 0 0 0-2.977 2.625ZM5.25 9a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h13.5a3 3 0 0 0 3-3v-6a3 3 0 0 0-3-3H15a.75.75 0 0 0-.75.75 2.25 2.25 0 0 1-4.5 0A.75.75 0 0 0 9 9H5.25Z"})])}const Ht={class:"p-4 sm:p-6 lg:p-8"},qt={class:"mb-4 sm:mb-6"},Pt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4"},Bt={class:"text-xl sm:text-2xl font-bold flex items-center gap-2"},It={class:"flex items-center gap-2"},Ot=["disabled"],Ut=["disabled"],Nt={class:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0 mb-4 sm:mb-6"},Xt={class:"rounded-lg border bg-card p-3 sm:p-4 mb-4 sm:mb-6"},Zt={class:"grid grid-cols-2 sm:flex sm:flex-wrap items-end gap-2 sm:gap-4"},zt={class:"col-span-1 sm:flex-1 sm:min-w-[150px]"},Kt={class:"col-span-1 sm:flex-1 sm:min-w-[150px]"},Qt={key:0},Gt={key:0,class:"flex items-center justify-center py-12"},Jt={key:1,class:"space-y-4 sm:space-y-6"},Wt={class:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4"},Yt={class:"rounded-lg border bg-card p-3 sm:p-5"},te={class:"flex items-center gap-1.5 sm:gap-2 mb-2 sm:mb-3"},ee={class:"text-lg sm:text-2xl font-bold"},se={class:"rounded-lg border bg-card p-3 sm:p-5"},oe={class:"flex items-center gap-1.5 sm:gap-2 mb-2 sm:mb-3"},de={class:"text-lg sm:text-2xl font-bold"},re={class:"text-xs text-success mt-1 hidden sm:block"},ne={class:"rounded-lg border bg-card p-3 sm:p-5"},ae={class:"flex items-center gap-1.5 sm:gap-2 mb-2 sm:mb-3"},le={class:"text-lg sm:text-2xl font-bold text-success"},ie={class:"text-xs text-muted-foreground mt-1 hidden sm:block"},ce={class:"rounded-lg border bg-card p-3 sm:p-5"},ue={class:"flex items-center gap-1.5 sm:gap-2 mb-2 sm:mb-3"},me={class:"text-lg sm:text-2xl font-bold"},xe={class:"text-xs text-muted-foreground mt-1 hidden sm:block"},pe={class:"rounded-lg border bg-card"},ve={class:"p-3 sm:p-4 border-b flex flex-col sm:flex-row sm:items-center justify-between gap-2"},ge={class:"hidden md:block overflow-x-auto"},fe={class:"w-full"},be={class:"divide-y"},_e={class:"px-4 py-3"},he={class:"font-medium"},ye={class:"text-xs text-muted-foreground"},we={class:"px-4 py-3 text-sm"},ke={class:"px-4 py-3 text-center"},Se={class:"px-4 py-3 text-center text-success"},Ce={class:"px-4 py-3 text-center text-destructive"},De={class:"px-4 py-3 text-center"},Le={class:"px-4 py-3 text-right"},$e={class:"px-4 py-3 text-center"},Me={class:"md:hidden divide-y"},Ae={class:"flex items-start justify-between mb-2"},Ee={class:"font-medium text-sm"},Fe={class:"text-xs text-muted-foreground"},je={class:"grid grid-cols-2 gap-2 text-xs"},Te={class:"text-success"},Re={key:0,class:"p-6 sm:p-8 text-center text-muted-foreground text-sm"},Ve={key:1,class:"space-y-4 sm:space-y-6"},He={class:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4"},qe={class:"rounded-lg border bg-card p-3 sm:p-5"},Pe={class:"text-lg sm:text-2xl font-bold text-success"},Be={class:"rounded-lg border bg-card p-3 sm:p-5"},Ie={class:"text-lg sm:text-2xl font-bold text-warning"},Oe={class:"rounded-lg border bg-card p-3 sm:p-5"},Ue={class:"text-lg sm:text-2xl font-bold text-destructive"},Ne={class:"rounded-lg border bg-card p-3 sm:p-5"},Xe={class:"text-lg sm:text-2xl font-bold"},Ze={class:"rounded-lg border bg-card"},ze={class:"p-3 sm:p-4 border-b flex flex-col sm:flex-row sm:items-center justify-between gap-2"},Ke={class:"hidden md:block overflow-x-auto"},Qe={class:"w-full"},Ge={class:"divide-y"},Je={class:"px-4 py-3"},We={class:"font-medium"},Ye={class:"text-xs text-muted-foreground"},ts={class:"px-4 py-3 text-sm max-w-xs truncate"},es={class:"px-4 py-3"},ss={class:"px-4 py-3 text-sm"},os={class:"px-4 py-3 text-center"},ds={class:"md:hidden divide-y"},rs={class:"flex items-start justify-between mb-2"},ns={class:"font-medium text-sm"},as={class:"text-xs text-muted-foreground"},ls={class:"text-xs text-muted-foreground mb-2 line-clamp-2"},is={class:"flex items-center justify-between text-xs"},cs={class:"text-muted-foreground"},us={key:0,class:"p-6 sm:p-8 text-center text-muted-foreground text-sm"},ms={key:2,class:"space-y-4 sm:space-y-6"},xs={class:"grid grid-cols-3 gap-2 sm:gap-4"},ps={class:"rounded-lg border bg-card p-3 sm:p-5"},vs={class:"flex items-center gap-1.5 sm:gap-2 mb-2"},gs={class:"text-lg sm:text-2xl font-bold"},fs={class:"rounded-lg border bg-card p-3 sm:p-5"},bs={class:"flex items-center gap-1.5 sm:gap-2 mb-2"},_s={class:"text-lg sm:text-2xl font-bold"},hs={class:"rounded-lg border bg-card p-3 sm:p-5"},ys={class:"flex items-center gap-1.5 sm:gap-2 mb-2"},ws={class:"text-lg sm:text-2xl font-bold"},ks={class:"rounded-lg border bg-card"},Ss={class:"divide-y"},Cs={class:"flex items-center gap-3 sm:gap-4"},Ds={class:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0"},Ls={class:"font-medium text-sm sm:text-base"},$s={class:"text-xs sm:text-sm text-muted-foreground"},Ms={class:"text-left sm:text-right pl-11 sm:pl-0"},As={class:"font-medium text-xs sm:text-base"},Es={key:0,class:"p-6 sm:p-8 text-center text-muted-foreground text-sm"},Fs={key:3,class:"space-y-4 sm:space-y-6"},js={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"},Ts=["onClick"],Rs={class:"flex items-center justify-between mb-3 sm:mb-4"},Vs={class:"font-semibold text-sm sm:text-base"},Hs={class:"grid grid-cols-2 gap-3 sm:gap-4"},qs={class:"text-base sm:text-lg font-bold"},Ps={class:"text-base sm:text-lg font-bold"},Bs={class:"text-base sm:text-lg font-bold"},Is={class:"text-base sm:text-lg font-bold text-success"},Os={class:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t flex justify-end"},Us={class:"text-xs text-primary hover:underline flex items-center gap-1"},Ns={key:0,class:"text-center py-8 sm:py-12"},Xs={key:4,class:"space-y-4 sm:space-y-6"},Zs={class:"grid grid-cols-3 gap-2 sm:gap-4"},zs={class:"rounded-lg border bg-card p-3 sm:p-5"},Ks={class:"flex items-center gap-1.5 sm:gap-2 mb-2"},Qs={class:"text-sm sm:text-2xl font-bold text-success"},Gs={class:"rounded-lg border bg-card p-3 sm:p-5"},Js={class:"flex items-center gap-1.5 sm:gap-2 mb-2"},Ws={class:"text-sm sm:text-2xl font-bold text-destructive"},Ys={class:"rounded-lg border bg-card p-3 sm:p-5"},to={class:"flex items-center gap-1.5 sm:gap-2 mb-2"},eo={class:"text-sm sm:text-2xl font-bold text-primary"},so={class:"rounded-lg border bg-card"},oo={class:"divide-y"},ro={class:"flex items-center gap-2 sm:gap-4"},no={class:"min-w-0"},ao={class:"font-medium text-sm sm:text-base truncate"},lo={class:"text-xs sm:text-sm text-muted-foreground"},io={class:"text-right flex-shrink-0"},co={class:"text-xs text-muted-foreground hidden sm:block"},uo={key:0,class:"p-6 sm:p-8 text-center text-muted-foreground text-sm"},yo=yt({__name:"Reports",setup(L){const S=[{id:"campaign",label:"Campaign Report"},{id:"delivery",label:"Delivery Report"},{id:"schedule",label:"Schedule Report"},{id:"archived",label:"Archived Report"},{id:"credit",label:"Credit History"}],h=i("campaign"),u=i(""),m=i(""),P=i(""),B=i(!0),F=i(!1),f=i(null),I=i([]),j=i(""),Q=i(""),b=i([]),$=i({delivered:0,pending:0,failed:0,rate:0}),C=i([]),T=i([]),R=i({purchased:0,used:0,balance:0}),O=i([]),U=wt(()=>{if(!j.value)return I.value;const d=j.value.toLowerCase();return I.value.filter(e=>e.name.toLowerCase().includes(d))});function mt(){const d=new Date,e=new Date;e.setDate(e.getDate()-30),m.value=d.toISOString().split("T")[0],u.value=e.toISOString().split("T")[0]}function xt(){const d=new Date;let e=new Date;switch(P.value){case"today":e=new Date;break;case"yesterday":e=new Date,e.setDate(e.getDate()-1);break;case"week":e.setDate(d.getDate()-7);break;case"month":e.setMonth(d.getMonth()-1);break;case"quarter":e.setMonth(d.getMonth()-3);break}u.value=e.toISOString().split("T")[0],m.value=d.toISOString().split("T")[0],N()}async function N(){B.value=!0;try{await Promise.all([pt(),vt(),gt(),ft(),bt()])}finally{B.value=!1}}async function pt(){try{const d=await q.getDashboard("month");f.value=d.data;const e=await H.get("/campaigns/history",{params:{start_date:u.value,end_date:m.value}});I.value=e.data.data||e.data||[]}catch(d){console.error("Error loading dashboard:",d)}}async function vt(){try{const d=await H.get("/messages/history",{params:{start_date:u.value,end_date:m.value,per_page:100}});b.value=d.data.data||d.data||[];const e=b.value.filter(g=>g.status==="delivered"||g.status==="sent").length,y=b.value.filter(g=>g.status==="failed").length,x=b.value.filter(g=>g.status==="pending").length,v=b.value.length;$.value={delivered:e,pending:x,failed:y,rate:v>0?e/v*100:0}}catch(d){console.error("Error loading delivery report:",d)}}async function gt(){try{const d=await H.get("/campaigns",{params:{status:"scheduled,pending"}});C.value=d.data.data||d.data||[]}catch(d){console.error("Error loading scheduled campaigns:",d)}}async function ft(){try{const d=await H.get("/sms-analytics/periods");T.value=(d.data.periods||[]).map(e=>({period:e.period_key,label:e.formatted,total_sms:e.total_sms,total_cost:e.total_cost,campaigns_count:e.campaigns_count||0,success_rate:e.success_rate||0}))}catch(d){console.error("Error loading archived periods:",d),T.value=[]}}async function bt(){R.value={purchased:5e5,used:125e3,balance:375e3},O.value=[{id:1,type:"credit",description:"Achat de credits",amount:1e5,balance_after:475e3,created_at:new Date().toISOString()},{id:2,type:"debit",description:'Campagne "Promotion Noel"',amount:25e3,balance_after:45e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:3,type:"debit",description:"Envois transactionnels",amount:12500,balance_after:437500,created_at:new Date(Date.now()-1728e5).toISOString()}]}async function _t(d){console.log("Loading archive for period:",d)}async function G(d){var e,y;try{F.value=!0;let x,v;d==="pdf"?(x=await q.exportPdf(u.value,m.value),v=`rapport_${u.value}_${m.value}.pdf`):(x=await q.exportExcel(u.value,m.value),v=`rapport_${u.value}_${m.value}.xlsx`),q.downloadFile(x,v),At(`Rapport ${d.toUpperCase()} telecharge`)}catch(x){Et(((y=(e=x.response)==null?void 0:e.data)==null?void 0:y.message)||"Erreur lors de l'export")}finally{F.value=!1}}function ht(d){return d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(1)}K`:d.toString()}function J(d){return d?new Date(d).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"-"}function V(d){return d?new Date(d).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function X(d){const e=(d||"").toLowerCase();return["completed","termine","done"].includes(e)?"bg-success/10 text-success":["active","sending","running"].includes(e)?"bg-blue-100 text-blue-700":["scheduled","pending","draft"].includes(e)?"bg-warning/10 text-warning":["failed","error"].includes(e)?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}function W(d){const e=(d||"").toLowerCase();return["delivered","sent"].includes(e)?"bg-success/10 text-success":["pending"].includes(e)?"bg-warning/10 text-warning":["failed"].includes(e)?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}function Y(d){return d>=90?"text-success font-semibold":d>=70?"text-warning font-semibold":"text-destructive font-semibold"}return kt(()=>{mt(),N()}),(d,e)=>(r(),Z(Ct,null,{default:St(()=>{var y,x,v,g,tt,et,st,ot,dt,rt;return[t("div",Ht,[t("div",qt,[t("div",Pt,[t("div",null,[t("h1",Bt,[l(a(Dt),{class:"w-6 h-6 sm:w-7 sm:h-7 text-primary"}),e[8]||(e[8]=_(" Rapports & Statistiques ",-1))]),e[9]||(e[9]=t("p",{class:"text-sm text-muted-foreground mt-1"},"Analysez les performances de vos envois",-1))]),t("div",It,[t("button",{onClick:e[0]||(e[0]=s=>G("pdf")),disabled:F.value,class:"inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 border rounded-lg hover:bg-accent text-xs sm:text-sm font-medium disabled:opacity-50"},[l(a(K),{class:"w-4 h-4"}),e[10]||(e[10]=_(" PDF ",-1))],8,Ot),t("button",{onClick:e[1]||(e[1]=s=>G("excel")),disabled:F.value,class:"inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 border rounded-lg hover:bg-accent text-xs sm:text-sm font-medium disabled:opacity-50"},[l(a(K),{class:"w-4 h-4"}),e[11]||(e[11]=_(" Excel ",-1))],8,Ut)])])]),t("div",Nt,[l(Mt,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=s=>h.value=s),tabs:S},null,8,["modelValue"])]),t("div",Xt,[t("div",Zt,[t("div",zt,[e[12]||(e[12]=t("label",{class:"text-xs sm:text-sm font-medium mb-1 block"},"Date debut",-1)),E(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>u.value=s),type:"date",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-2 sm:px-3 py-2 text-xs sm:text-sm"},null,512),[[z,u.value]])]),t("div",Kt,[e[13]||(e[13]=t("label",{class:"text-xs sm:text-sm font-medium mb-1 block"},"Date fin",-1)),E(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>m.value=s),type:"date",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-2 sm:px-3 py-2 text-xs sm:text-sm"},null,512),[[z,m.value]])]),t("button",{onClick:N,class:"h-9 sm:h-10 px-3 sm:px-4 bg-primary text-primary-foreground rounded-lg text-xs sm:text-sm font-medium hover:bg-primary/90"}," Appliquer "),E(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>P.value=s),onChange:xt,class:"h-9 sm:h-10 px-2 sm:px-3 rounded-md border border-input bg-background text-xs sm:text-sm"},[...e[14]||(e[14]=[t("option",{value:""},"Periode...",-1),t("option",{value:"today"},"Aujourd'hui",-1),t("option",{value:"yesterday"},"Hier",-1),t("option",{value:"week"},"Cette semaine",-1),t("option",{value:"month"},"Ce mois",-1),t("option",{value:"quarter"},"Ce trimestre",-1)])],544),[[at,P.value]])])]),h.value==="campaign"?(r(),n("div",Qt,[B.value?(r(),n("div",Gt,[...e[15]||(e[15]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):(r(),n("div",Jt,[t("div",Wt,[t("div",Yt,[t("div",te,[l(a(Ft),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[16]||(e[16]=t("span",{class:"text-xs sm:text-sm font-medium text-muted-foreground"},"Campagnes",-1))]),t("p",ee,o(((y=f.value)==null?void 0:y.overview.campaigns_executed)||0),1),e[17]||(e[17]=t("p",{class:"text-xs text-muted-foreground mt-1 hidden sm:block"},"sur la periode",-1))]),t("div",se,[t("div",oe,[l(a(Lt),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[18]||(e[18]=t("span",{class:"text-xs sm:text-sm font-medium text-muted-foreground"},"SMS Envoyes",-1))]),t("p",de,o(ht(((x=f.value)==null?void 0:x.overview.sms_sent)||0)),1),t("p",re,o((g=(v=f.value)==null?void 0:v.overview.success_rate)==null?void 0:g.toFixed(1))+"% livres",1)]),t("div",ne,[t("div",ae,[l(a(it),{class:"w-4 h-4 sm:w-5 sm:h-5 text-success"}),e[19]||(e[19]=t("span",{class:"text-xs sm:text-sm font-medium text-muted-foreground"},"Taux succes",-1))]),t("p",le,o(((et=(tt=f.value)==null?void 0:tt.overview.success_rate)==null?void 0:et.toFixed(1))||0)+"%",1),t("p",ie,o(((st=f.value)==null?void 0:st.overview.sms_delivered)||0)+" livres",1)]),t("div",ce,[t("div",ue,[l(a(ct),{class:"w-4 h-4 sm:w-5 sm:h-5 text-warning"}),e[20]||(e[20]=t("span",{class:"text-xs sm:text-sm font-medium text-muted-foreground"},"Cout Total",-1))]),t("p",me,o((((ot=f.value)==null?void 0:ot.overview.total_cost)||0).toLocaleString()),1),t("p",xe,o(((rt=(dt=f.value)==null?void 0:dt.overview.average_cost_per_sms)==null?void 0:rt.toFixed(0))||0)+" XAF/SMS",1)])]),t("div",pe,[t("div",ve,[e[21]||(e[21]=t("h3",{class:"font-semibold text-sm sm:text-base"},"Liste des campagnes",-1)),E(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>j.value=s),type:"text",placeholder:"Rechercher...",class:"h-8 sm:h-9 px-3 rounded-md border border-input bg-background text-xs sm:text-sm w-full sm:w-64"},null,512),[[z,j.value]])]),t("div",ge,[t("table",fe,[e[22]||(e[22]=t("thead",{class:"bg-muted/50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Campagne"),t("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Date"),t("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Envoyes"),t("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Livres"),t("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Echecs"),t("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Taux"),t("th",{class:"px-4 py-3 text-right text-sm font-medium"},"Cout"),t("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Statut")])],-1)),t("tbody",be,[(r(!0),n(w,null,k(U.value,s=>{var D,M,A,nt;return r(),n("tr",{key:s.id,class:"hover:bg-muted/30"},[t("td",_e,[t("div",he,o(s.name),1),t("div",ye,"ID: "+o(s.id),1)]),t("td",we,o(J(s.sent_at||s.created_at)),1),t("td",ke,o((D=s.messages_sent)==null?void 0:D.toLocaleString()),1),t("td",Se,o(((M=s.delivered)==null?void 0:M.toLocaleString())||"-"),1),t("td",Ce,o(((A=s.failed)==null?void 0:A.toLocaleString())||"-"),1),t("td",De,[t("span",{class:c(Y(s.success_rate))},o(((nt=s.success_rate)==null?void 0:nt.toFixed(1))||0)+"% ",3)]),t("td",Le,o((s.cost||0).toLocaleString())+" XAF",1),t("td",$e,[t("span",{class:c(["px-2 py-1 text-xs rounded-full",X(s.status)])},o(s.status),3)])])}),128))])])]),t("div",Me,[(r(!0),n(w,null,k(U.value,s=>{var D,M,A;return r(),n("div",{key:s.id,class:"p-3"},[t("div",Ae,[t("div",null,[t("div",Ee,o(s.name),1),t("div",Fe,o(J(s.sent_at||s.created_at)),1)]),t("span",{class:c(["px-2 py-0.5 text-xs rounded-full",X(s.status)])},o(s.status),3)]),t("div",je,[t("div",null,[e[23]||(e[23]=t("span",{class:"text-muted-foreground"},"Envoyes:",-1)),_(" "+o((D=s.messages_sent)==null?void 0:D.toLocaleString()),1)]),t("div",null,[e[24]||(e[24]=t("span",{class:"text-muted-foreground"},"Taux:",-1)),e[25]||(e[25]=_()),t("span",{class:c(Y(s.success_rate))},o(((M=s.success_rate)==null?void 0:M.toFixed(1))||0)+"%",3)]),t("div",null,[e[26]||(e[26]=t("span",{class:"text-muted-foreground"},"Livres:",-1)),e[27]||(e[27]=_()),t("span",Te,o(((A=s.delivered)==null?void 0:A.toLocaleString())||"-"),1)]),t("div",null,[e[28]||(e[28]=t("span",{class:"text-muted-foreground"},"Cout:",-1)),_(" "+o((s.cost||0).toLocaleString())+" XAF",1)])])])}),128))]),U.value.length===0?(r(),n("div",Re," Aucune campagne sur cette periode ")):p("",!0)])]))])):p("",!0),h.value==="delivery"?(r(),n("div",Ve,[t("div",He,[t("div",qe,[e[29]||(e[29]=t("div",{class:"flex items-center gap-1.5 sm:gap-2 mb-2"},[t("div",{class:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-success"}),t("span",{class:"text-xs sm:text-sm font-medium"},"Livres")],-1)),t("p",Pe,o($.value.delivered),1)]),t("div",Be,[e[30]||(e[30]=t("div",{class:"flex items-center gap-1.5 sm:gap-2 mb-2"},[t("div",{class:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-warning"}),t("span",{class:"text-xs sm:text-sm font-medium"},"En attente")],-1)),t("p",Ie,o($.value.pending),1)]),t("div",Oe,[e[31]||(e[31]=t("div",{class:"flex items-center gap-1.5 sm:gap-2 mb-2"},[t("div",{class:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-destructive"}),t("span",{class:"text-xs sm:text-sm font-medium"},"Echecs")],-1)),t("p",Ue,o($.value.failed),1)]),t("div",Ne,[e[32]||(e[32]=t("div",{class:"flex items-center gap-1.5 sm:gap-2 mb-2"},[t("div",{class:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-primary"}),t("span",{class:"text-xs sm:text-sm font-medium"},"Taux global")],-1)),t("p",Xe,o($.value.rate.toFixed(1))+"%",1)])]),t("div",Ze,[t("div",ze,[e[34]||(e[34]=t("h3",{class:"font-semibold text-sm sm:text-base"},"Historique des livraisons",-1)),E(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>Q.value=s),class:"h-8 sm:h-9 px-2 sm:px-3 rounded-md border border-input bg-background text-xs sm:text-sm"},[...e[33]||(e[33]=[t("option",{value:""},"Tous les statuts",-1),t("option",{value:"delivered"},"Livres",-1),t("option",{value:"sent"},"Envoyes",-1),t("option",{value:"failed"},"Echecs",-1)])],512),[[at,Q.value]])]),t("div",Ke,[t("table",Qe,[e[35]||(e[35]=t("thead",{class:"bg-muted/50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Destinataire"),t("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Message"),t("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Operateur"),t("th",{class:"px-4 py-3 text-left text-sm font-medium"},"Date envoi"),t("th",{class:"px-4 py-3 text-center text-sm font-medium"},"Statut")])],-1)),t("tbody",Ge,[(r(!0),n(w,null,k(b.value,s=>(r(),n("tr",{key:s.id,class:"hover:bg-muted/30"},[t("td",Je,[t("div",We,o(s.recipient_phone),1),t("div",Ye,o(s.recipient_name||"-"),1)]),t("td",ts,o(s.content),1),t("td",es,[t("span",{class:c(["px-2 py-1 text-xs rounded",s.provider==="airtel"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},o(s.provider),3)]),t("td",ss,o(V(s.sent_at)),1),t("td",os,[t("span",{class:c(["px-2 py-1 text-xs rounded-full",W(s.status)])},o(s.status),3)])]))),128))])])]),t("div",ds,[(r(!0),n(w,null,k(b.value,s=>(r(),n("div",{key:s.id,class:"p-3"},[t("div",rs,[t("div",null,[t("div",ns,o(s.recipient_phone),1),t("div",as,o(s.recipient_name||"-"),1)]),t("span",{class:c(["px-2 py-0.5 text-xs rounded-full",W(s.status)])},o(s.status),3)]),t("p",ls,o(s.content),1),t("div",is,[t("span",{class:c(["px-2 py-0.5 rounded",s.provider==="airtel"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},o(s.provider),3),t("span",cs,o(V(s.sent_at)),1)])]))),128))]),b.value.length===0?(r(),n("div",us," Aucun message sur cette periode ")):p("",!0)])])):p("",!0),h.value==="schedule"?(r(),n("div",ms,[t("div",xs,[t("div",ps,[t("div",vs,[l(a(lt),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[36]||(e[36]=t("span",{class:"text-xs sm:text-sm font-medium"},"Planifiees",-1))]),t("p",gs,o(C.value.filter(s=>s.status==="scheduled").length),1)]),t("div",fs,[t("div",bs,[l(a($t),{class:"w-4 h-4 sm:w-5 sm:h-5 text-warning"}),e[37]||(e[37]=t("span",{class:"text-xs sm:text-sm font-medium"},"En attente",-1))]),t("p",_s,o(C.value.filter(s=>s.status==="pending").length),1)]),t("div",hs,[t("div",ys,[l(a(it),{class:"w-4 h-4 sm:w-5 sm:h-5 text-success"}),e[38]||(e[38]=t("span",{class:"text-xs sm:text-sm font-medium"},"Executees",-1))]),t("p",ws,o(C.value.filter(s=>s.status==="completed").length),1)])]),t("div",ks,[e[39]||(e[39]=t("div",{class:"p-3 sm:p-4 border-b"},[t("h3",{class:"font-semibold text-sm sm:text-base"},"Campagnes planifiees")],-1)),t("div",Ss,[(r(!0),n(w,null,k(C.value,s=>(r(),n("div",{key:s.id,class:"p-3 sm:p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-4 hover:bg-muted/30"},[t("div",Cs,[t("div",Ds,[l(a(lt),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"})]),t("div",null,[t("p",Ls,o(s.name),1),t("p",$s,o(s.recipients_count)+" destinataires",1)])]),t("div",Ms,[t("p",As,o(V(s.scheduled_at)),1),t("span",{class:c(["px-2 py-0.5 sm:py-1 text-xs rounded-full",X(s.status)])},o(s.status),3)])]))),128))]),C.value.length===0?(r(),n("div",Es," Aucune campagne planifiee ")):p("",!0)])])):p("",!0),h.value==="archived"?(r(),n("div",Fs,[t("div",js,[(r(!0),n(w,null,k(T.value,s=>(r(),n("div",{key:s.period,class:"rounded-lg border bg-card p-4 sm:p-5 hover:shadow-md transition-shadow cursor-pointer",onClick:D=>_t(s.period)},[t("div",Rs,[t("h3",Vs,o(s.label),1),l(a(ut),{class:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground"})]),t("div",Hs,[t("div",null,[e[40]||(e[40]=t("p",{class:"text-xs text-muted-foreground"},"SMS",-1)),t("p",qs,o(s.total_sms.toLocaleString()),1)]),t("div",null,[e[41]||(e[41]=t("p",{class:"text-xs text-muted-foreground"},"Cout",-1)),t("p",Ps,o(s.total_cost.toLocaleString()),1)]),t("div",null,[e[42]||(e[42]=t("p",{class:"text-xs text-muted-foreground"},"Campagnes",-1)),t("p",Bs,o(s.campaigns_count),1)]),t("div",null,[e[43]||(e[43]=t("p",{class:"text-xs text-muted-foreground"},"Taux",-1)),t("p",Is,o(s.success_rate.toFixed(1))+"%",1)])]),t("div",Os,[t("button",Us,[l(a(K),{class:"w-4 h-4"}),e[44]||(e[44]=_(" Exporter ",-1))])])],8,Ts))),128))]),T.value.length===0?(r(),n("div",Ns,[l(a(ut),{class:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-muted-foreground mb-4"}),e[45]||(e[45]=t("h3",{class:"text-base sm:text-lg font-semibold mb-2"},"Aucune archive",-1)),e[46]||(e[46]=t("p",{class:"text-sm text-muted-foreground"},"Les archives seront creees automatiquement chaque mois",-1))])):p("",!0)])):p("",!0),h.value==="credit"?(r(),n("div",Xs,[t("div",Zs,[t("div",zs,[t("div",Ks,[l(a(ct),{class:"w-4 h-4 sm:w-5 sm:h-5 text-success"}),e[47]||(e[47]=t("span",{class:"text-xs sm:text-sm font-medium"},"Achetes",-1))]),t("p",Qs,o(R.value.purchased.toLocaleString()),1)]),t("div",Gs,[t("div",Js,[l(a(Tt),{class:"w-4 h-4 sm:w-5 sm:h-5 text-destructive"}),e[48]||(e[48]=t("span",{class:"text-xs sm:text-sm font-medium"},"Utilises",-1))]),t("p",Ws,o(R.value.used.toLocaleString()),1)]),t("div",Ys,[t("div",to,[l(a(Vt),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[49]||(e[49]=t("span",{class:"text-xs sm:text-sm font-medium"},"Solde",-1))]),t("p",eo,o(R.value.balance.toLocaleString()),1)])]),t("div",so,[e[50]||(e[50]=t("div",{class:"p-3 sm:p-4 border-b"},[t("h3",{class:"font-semibold text-sm sm:text-base"},"Historique des credits")],-1)),t("div",oo,[(r(!0),n(w,null,k(O.value,s=>(r(),n("div",{key:s.id,class:"p-3 sm:p-4 flex items-center justify-between gap-3 hover:bg-muted/30"},[t("div",ro,[t("div",{class:c(["w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center flex-shrink-0",s.type==="credit"?"bg-success/10":"bg-destructive/10"])},[s.type==="credit"?(r(),Z(a(Rt),{key:0,class:"w-4 h-4 sm:w-5 sm:h-5 text-success"})):(r(),Z(a(jt),{key:1,class:"w-4 h-4 sm:w-5 sm:h-5 text-destructive"}))],2),t("div",no,[t("p",ao,o(s.description),1),t("p",lo,o(V(s.created_at)),1)])]),t("div",io,[t("p",{class:c(["font-bold text-sm sm:text-base",s.type==="credit"?"text-success":"text-destructive"])},o(s.type==="credit"?"+":"-")+o(s.amount.toLocaleString()),3),t("p",co,"Solde: "+o(s.balance_after.toLocaleString())+" XAF",1)])]))),128))]),O.value.length===0?(r(),n("div",uo," Aucune transaction ")):p("",!0)])])):p("",!0)])]}),_:1}))}});export{yo as default};
