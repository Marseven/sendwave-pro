import{o as l,c as u,b as e,d as D,u as T,r as p,k as Z,m as q,n as M,p as H,x as n,y as r,t as i,i as w,f as m,v as x,D as V,g as j}from"./main-Csiv7Vn_.js";import{_ as R,f as C,j as I,a as A,r as L,d as z,c as F,k as G}from"./api-CDsysHET.js";import{c as J}from"./campaignService-Dqa9wLqr.js";import{c as K}from"./contactService-D_LpRtce.js";import{r as O}from"./IdentificationIcon-D_-FwLVM.js";import{r as Q}from"./UserIcon-a7gKzDvN.js";import{r as U}from"./EnvelopeIcon-CKd1WJf4.js";import{r as W}from"./PhoneIcon-DhrSwOqf.js";import{r as X}from"./KeyIcon-Cx8uf5TO.js";import{r as Y}from"./BellAlertIcon-CxTP1imB.js";import{r as E}from"./CheckCircleIcon-D4tbHKSA.js";import{r as ee,a as se}from"./XCircleIcon-BHe_vCVo.js";function te(y,d){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})])}function oe(y,d){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})])}function re(y,d){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}const ne={class:"p-4 sm:p-6 lg:p-8"},ae={class:"mb-4 sm:mb-8"},ie={class:"flex items-center gap-2"},le={key:0,class:"flex items-center justify-center py-12"},de={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6"},me={class:"space-y-4 sm:space-y-6"},ue={class:"rounded-lg border bg-card p-4 sm:p-6"},ce={class:"flex flex-col items-center text-center"},pe={class:"relative mb-3 sm:mb-4"},fe={class:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-primary flex items-center justify-center text-primary-foreground text-2xl sm:text-3xl font-bold"},ge={class:"absolute bottom-0 right-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-accent border-2 border-background flex items-center justify-center hover:bg-accent/80 transition-colors"},ve={class:"text-lg sm:text-xl font-bold"},xe={class:"text-xs sm:text-sm text-muted-foreground"},be={class:"mt-3 sm:mt-4 flex items-center gap-2"},he={class:"px-2 sm:px-3 py-1 rounded-full bg-success/10 text-success text-xs font-medium flex items-center gap-1"},_e={class:"rounded-lg border bg-card p-4 sm:p-6"},we={class:"font-semibold text-sm sm:text-base mb-3 sm:mb-4 flex items-center gap-2"},ye={class:"space-y-2 sm:space-y-3"},ke={class:"flex items-center justify-between p-2 sm:p-3 rounded-lg bg-muted/50"},Ve={class:"flex items-center gap-2"},$e={class:"font-bold text-sm sm:text-base"},Me={class:"flex items-center justify-between p-2 sm:p-3 rounded-lg bg-muted/50"},je={class:"flex items-center gap-2"},Ce={class:"font-bold text-sm sm:text-base"},Ae={class:"flex items-center justify-between p-2 sm:p-3 rounded-lg bg-muted/50"},Ue={class:"flex items-center gap-2"},Ee={class:"font-bold text-sm sm:text-base"},Se={class:"lg:col-span-2 space-y-4 sm:space-y-6"},Ne={class:"rounded-lg border bg-card p-4 sm:p-6"},Be={class:"flex items-center gap-2 mb-3 sm:mb-4"},Pe={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"},De={class:"space-y-1.5 sm:space-y-2"},Te={class:"text-xs sm:text-sm font-medium flex items-center gap-2"},Ze={class:"space-y-1.5 sm:space-y-2"},qe={class:"text-xs sm:text-sm font-medium flex items-center gap-2"},He={class:"space-y-1.5 sm:space-y-2"},Re={class:"text-xs sm:text-sm font-medium flex items-center gap-2"},Ie={class:"space-y-1.5 sm:space-y-2"},Le={class:"text-xs sm:text-sm font-medium flex items-center gap-2"},ze={class:"rounded-lg border bg-card p-6"},Fe={class:"flex items-center gap-2 mb-4"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Je={class:"space-y-2"},Ke={class:"space-y-2"},Oe={class:"rounded-lg border bg-card p-6"},Qe={class:"flex items-center gap-2 mb-4"},We={class:"space-y-3"},Xe={class:"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},Ye={class:"flex-1"},es={class:"flex items-center gap-2"},ss={class:"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},ts={class:"flex-1"},os={class:"flex items-center gap-2"},rs={class:"flex items-start gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},ns={class:"flex-1"},as={class:"flex items-center gap-2"},is={key:0,class:"rounded-lg bg-success/10 border border-success/20 p-4"},ls={class:"flex items-center gap-2 text-success"},ds={class:"font-medium"},ms={key:1,class:"rounded-lg bg-destructive/10 border border-destructive/20 p-4"},us={class:"flex items-center gap-2 text-destructive"},cs={class:"font-medium"},ps={class:"flex flex-col sm:flex-row gap-2 sm:gap-3"},fs=["disabled"],gs={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},vs={class:"hidden sm:inline"},xs={class:"sm:hidden"},bs=["disabled"],Es=D({__name:"Profile",setup(y){const d=T(),k=p(!0),c=p(!1),f=p(""),g=p(""),t=p({name:"",email:"",phone:"",company:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0,campaign_alerts:!0}),b=p({name:"",email:"",phone:"",company:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0,campaign_alerts:!0}),v=p({campaigns:0,messagesSent:0,contacts:0}),S=Z(()=>t.value.name?t.value.name.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):"?");async function N(){k.value=!0;try{const a=await C.get("/user/profile"),s=a.data.data||a.data;t.value={name:s.name||"",email:s.email||"",phone:s.phone||"",company:s.company||"",password:"",password_confirmation:"",email_notifications:s.email_notifications??!0,weekly_reports:s.weekly_reports??!0,campaign_alerts:s.campaign_alerts??!0},b.value={...t.value};const[o,h]=await Promise.all([J.getAll(),K.getAll()]);v.value.campaigns=o.length,v.value.contacts=h.length,v.value.messagesSent=o.reduce((_,$)=>_+($.messages_sent||$.sent||0),0)}catch(a){console.error("Error loading profile:",a),d.user&&(t.value.name=d.user.name||"",t.value.email=d.user.email||"",b.value={...t.value})}finally{k.value=!1}}async function B(){var a,s;c.value=!0,f.value="",g.value="";try{if(t.value.password&&t.value.password!==t.value.password_confirmation){g.value="Les mots de passe ne correspondent pas";return}const o={name:t.value.name,email:t.value.email,phone:t.value.phone,company:t.value.company,email_notifications:t.value.email_notifications,weekly_reports:t.value.weekly_reports,campaign_alerts:t.value.campaign_alerts};t.value.password&&(o.password=t.value.password,o.password_confirmation=t.value.password_confirmation);const h=await C.put("/user/profile",o),_=h.data.data||h.data;d.user&&(d.user.name=_.name,d.user.email=_.email),t.value.password="",t.value.password_confirmation="",b.value={...t.value},f.value="Profil mis à jour avec succès",setTimeout(()=>{f.value=""},3e3)}catch(o){console.error("Error saving profile:",o),g.value=((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||"Erreur lors de la mise à jour du profil"}finally{c.value=!1}}function P(){t.value={...b.value},f.value="",g.value=""}return q(()=>{N()}),(a,s)=>(l(),M(R,null,{default:H(()=>[e("div",ne,[e("div",ae,[e("div",ie,[n(r(I),{class:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),s[9]||(s[9]=e("h1",{class:"text-2xl sm:text-3xl font-bold"},"Mon Profil",-1))]),s[10]||(s[10]=e("p",{class:"text-sm text-muted-foreground mt-1 sm:mt-2"},"Gérez vos informations personnelles",-1))]),k.value?(l(),u("div",le,[...s[11]||(s[11]=[e("div",{class:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-b-2 border-primary"},null,-1)])])):(l(),u("div",de,[e("div",me,[e("div",ue,[e("div",ce,[e("div",pe,[e("div",fe,i(S.value),1),e("button",ge,[n(r(oe),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4"})])]),e("h2",ve,i(t.value.name),1),e("p",xe,i(t.value.email),1),e("div",be,[e("span",he,[n(r(re),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s[12]||(s[12]=e("span",null,"Actif",-1))])])])]),e("div",_e,[e("h3",we,[n(r(A),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),s[13]||(s[13]=e("span",null,"Statistiques",-1))]),e("div",ye,[e("div",ke,[e("div",Ve,[n(r(L),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),s[14]||(s[14]=e("span",{class:"text-xs sm:text-sm"},"Campagnes",-1))]),e("span",$e,i(v.value.campaigns),1)]),e("div",Me,[e("div",je,[n(r(z),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),s[15]||(s[15]=e("span",{class:"text-xs sm:text-sm"},"Messages",-1))]),e("span",Ce,i(v.value.messagesSent),1)]),e("div",Ae,[e("div",Ue,[n(r(F),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),s[16]||(s[16]=e("span",{class:"text-xs sm:text-sm"},"Contacts",-1))]),e("span",Ee,i(v.value.contacts),1)])])])]),e("div",Se,[e("div",Ne,[e("div",Be,[n(r(O),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),s[17]||(s[17]=e("h3",{class:"font-semibold text-sm sm:text-base"},"Informations personnelles",-1))]),e("div",Pe,[e("div",De,[e("label",Te,[n(r(Q),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),s[18]||(s[18]=w(" Nom complet ",-1))]),m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.name=o),type:"text",placeholder:"Votre nom complet",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.name]])]),e("div",Ze,[e("label",qe,[n(r(U),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),s[19]||(s[19]=w(" Email ",-1))]),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.email=o),type:"email",placeholder:"votre@email.com",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.email]])]),e("div",He,[e("label",Re,[n(r(W),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),s[20]||(s[20]=w(" Téléphone ",-1))]),m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>t.value.phone=o),type:"tel",placeholder:"+33612345678",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.phone]])]),e("div",Ie,[e("label",Le,[n(r(te),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),s[21]||(s[21]=w(" Entreprise ",-1))]),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>t.value.company=o),type:"text",placeholder:"Nom de l'entreprise",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.company]])])])]),e("div",ze,[e("div",Fe,[n(r(X),{class:"w-5 h-5 text-primary"}),s[22]||(s[22]=e("h3",{class:"font-semibold"},"Sécurité",-1))]),e("div",Ge,[e("div",Je,[s[23]||(s[23]=e("label",{class:"text-sm font-medium"},"Nouveau mot de passe",-1)),m(e("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>t.value.password=o),type:"password",placeholder:"••••••••",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.password]])]),e("div",Ke,[s[24]||(s[24]=e("label",{class:"text-sm font-medium"},"Confirmer le mot de passe",-1)),m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>t.value.password_confirmation=o),type:"password",placeholder:"••••••••",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[x,t.value.password_confirmation]])])]),s[25]||(s[25]=e("p",{class:"text-xs text-muted-foreground mt-2"},"Laisser vide pour ne pas modifier le mot de passe",-1))]),e("div",Oe,[e("div",Qe,[n(r(G),{class:"w-5 h-5 text-primary"}),s[26]||(s[26]=e("h3",{class:"font-semibold"},"Préférences de notifications",-1))]),e("div",We,[e("label",Xe,[m(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>t.value.email_notifications=o),type:"checkbox",class:"mt-1 w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[V,t.value.email_notifications]]),e("div",Ye,[e("div",es,[n(r(U),{class:"w-4 h-4 text-muted-foreground"}),s[27]||(s[27]=e("div",{class:"font-medium text-sm"},"Notifications par email",-1))]),s[28]||(s[28]=e("div",{class:"text-xs text-muted-foreground mt-1"},"Recevoir les alertes importantes par email",-1))])]),e("label",ss,[m(e("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>t.value.weekly_reports=o),type:"checkbox",class:"mt-1 w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[V,t.value.weekly_reports]]),e("div",ts,[e("div",os,[n(r(A),{class:"w-4 h-4 text-muted-foreground"}),s[29]||(s[29]=e("div",{class:"font-medium text-sm"},"Rapports hebdomadaires",-1))]),s[30]||(s[30]=e("div",{class:"text-xs text-muted-foreground mt-1"},"Recevoir les statistiques chaque lundi matin",-1))])]),e("label",rs,[m(e("input",{"onUpdate:modelValue":s[8]||(s[8]=o=>t.value.campaign_alerts=o),type:"checkbox",class:"mt-1 w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[V,t.value.campaign_alerts]]),e("div",ns,[e("div",as,[n(r(Y),{class:"w-4 h-4 text-muted-foreground"}),s[31]||(s[31]=e("div",{class:"font-medium text-sm"},"Alertes campagnes",-1))]),s[32]||(s[32]=e("div",{class:"text-xs text-muted-foreground mt-1"},"Notifications lors de l'envoi ou de la fin d'une campagne",-1))])])])]),f.value?(l(),u("div",is,[e("div",ls,[n(r(E),{class:"w-5 h-5"}),e("p",ds,i(f.value),1)])])):j("",!0),g.value?(l(),u("div",ms,[e("div",us,[n(r(ee),{class:"w-5 h-5"}),e("p",cs,i(g.value),1)])])):j("",!0),e("div",ps,[e("button",{onClick:B,disabled:c.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 sm:h-10 px-4 sm:px-6 py-2"},[c.value?(l(),u("div",gs)):(l(),M(r(E),{key:0,class:"w-4 h-4"})),e("span",vs,i(c.value?"Enregistrement...":"Enregistrer les modifications"),1),e("span",xs,i(c.value?"Enregistrement...":"Enregistrer"),1)],8,fs),e("button",{onClick:P,disabled:c.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 sm:h-10 px-3 sm:px-4 py-2"},[n(r(se),{class:"w-4 h-4"}),s[33]||(s[33]=e("span",null,"Annuler",-1))],8,bs)])])]))])]),_:1}))}});export{Es as default};
