import{_ as L,b as y,r as k,m as R}from"./api-BbWbjYGG.js";import{c as V}from"./campaignService-Bh5BWGaB.js";import{o as a,c,b as e,d as W,r as C,k as m,l as P,m as p,n as N,p as d,q as o,t as n,s as h,F as q,x as z}from"./main-DzrX3Jet.js";import{r as M}from"./CheckCircleIcon-DYX2sO4r.js";import{r as H}from"./RocketLaunchIcon-DcHXX-H2.js";import{r as K}from"./CheckBadgeIcon-CRZAqT8G.js";function G(x,u){return a(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"})])}function I(x,u){return a(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})])}function J(x,u){return a(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})])}const O={class:"p-8"},Q={class:"mb-8"},U={class:"flex items-center gap-2"},X={key:0,class:"flex items-center justify-center py-12"},Y={key:1},Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},ee={class:"rounded-lg border bg-card p-6"},te={class:"flex items-center gap-2 mb-4"},se={class:"text-4xl font-bold text-primary mb-2"},re={class:"flex items-center gap-2"},ne={class:"rounded-lg border bg-card p-6"},oe={class:"flex items-center gap-2 mb-4"},ae={class:"text-4xl font-bold text-success mb-2"},ie={class:"text-sm text-muted-foreground"},de={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},le={class:"rounded-lg border bg-card p-6"},ce={class:"flex items-center gap-2 mb-2"},ue={class:"text-3xl font-bold"},me={class:"rounded-lg border bg-card p-6"},fe={class:"flex items-center gap-2 mb-2"},ve={class:"text-3xl font-bold"},ge={class:"rounded-lg border bg-card p-6"},xe={class:"flex items-center gap-2 mb-2"},_e={class:"text-3xl font-bold"},pe={class:"rounded-lg border bg-card p-6"},he={class:"flex items-center gap-2 mb-6"},be={key:0,class:"text-center py-12"},we={key:1,class:"space-y-4"},ye={class:"flex-1"},ke={class:"flex items-center gap-2"},Ce={class:"font-medium"},Me={class:"flex items-center gap-4 text-sm text-muted-foreground mt-1"},$e={class:"flex items-center gap-1"},Be={class:"flex items-center gap-1"},De={class:"text-right"},Le=W({__name:"Reports",setup(x){const u=C(!0),l=C([]),$=m(()=>l.value.filter(t=>t.status==="Actif"||t.status==="active").length),B=m(()=>l.value.filter(t=>t.status==="Planifié"||t.status==="scheduled").length),D=m(()=>l.value.filter(t=>t.status==="Terminé"||t.status==="completed").length),b=m(()=>{const t=l.value.filter(r=>r.delivery_rate||r.delivered);return t.length===0?"0.0":(t.reduce((r,v)=>r+(v.delivery_rate||v.delivered||0),0)/t.length).toFixed(1)}),A=m(()=>{const t=parseFloat(b.value);return t>=98?"Excellent taux":t>=95?"Très bon taux":t>=90?"Bon taux":"À améliorer"}),f=m(()=>{const t=new Date,s=new Date(t.getTime()-7*24*60*60*1e3),r=new Date(t.getTime()-14*24*60*60*1e3),v=l.value.filter(i=>i.created_at&&new Date(i.created_at)>=s).reduce((i,g)=>i+(g.messages_sent||g.sent||0),0),_=l.value.filter(i=>i.created_at&&new Date(i.created_at)>=r&&new Date(i.created_at)<s).reduce((i,g)=>i+(g.messages_sent||g.sent||0),0),E=_>0?((v-_)/_*100).toFixed(1):"0";return{total:w(v),trend:parseFloat(E)}});function w(t){return t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString()}function F(t){const s=t.toLowerCase();return s==="actif"||s==="active"?"bg-success/10 text-success":s==="planifié"||s==="scheduled"?"bg-warning/10 text-warning":"bg-muted text-muted-foreground"}function S(t){return t>=98?"Excellent":t>=95?"Très bon":t>=90?"Bon":t>=80?"Moyen":"À améliorer"}function T(t){return t>=95?"text-success":t>=90?"text-primary":t>=80?"text-warning":"text-destructive"}async function j(){try{u.value=!0,l.value=await V.getAll()}catch(t){console.error("Error loading campaigns:",t)}finally{u.value=!1}}return P(()=>{j()}),(t,s)=>(a(),p(L,null,{default:N(()=>[e("div",O,[e("div",Q,[e("div",U,[d(o(y),{class:"w-8 h-8 text-primary"}),s[0]||(s[0]=e("h1",{class:"text-3xl font-bold"},"Rapports & Statistiques",-1))]),s[1]||(s[1]=e("p",{class:"text-muted-foreground mt-2"},"Analysez les performances de vos campagnes",-1))]),u.value?(a(),c("div",X,[...s[2]||(s[2]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):(a(),c("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[d(o(k),{class:"w-5 h-5 text-primary"}),s[3]||(s[3]=e("h3",{class:"font-semibold"},"Envois cette semaine",-1))]),e("div",se,n(f.value.total),1),e("div",re,[f.value.trend>0?(a(),p(o(I),{key:0,class:"w-4 h-4 text-success"})):(a(),p(o(G),{key:1,class:"w-4 h-4 text-destructive"})),e("p",{class:h(["text-sm",f.value.trend>0?"text-success":"text-destructive"])},n(f.value.trend>0?"+":"")+n(f.value.trend)+"% vs semaine dernière ",3)])]),e("div",ne,[e("div",oe,[d(o(M),{class:"w-5 h-5 text-success"}),s[4]||(s[4]=e("h3",{class:"font-semibold"},"Taux de livraison moyen",-1))]),e("div",ae,n(b.value)+"%",1),e("p",ie,n(A.value),1)])]),e("div",de,[e("div",le,[e("div",ce,[d(o(H),{class:"w-5 h-5 text-primary"}),s[5]||(s[5]=e("h3",{class:"text-sm font-medium text-muted-foreground"},"Campagnes actives",-1))]),e("div",ue,n($.value),1)]),e("div",me,[e("div",fe,[d(o(R),{class:"w-5 h-5 text-warning"}),s[6]||(s[6]=e("h3",{class:"text-sm font-medium text-muted-foreground"},"Campagnes planifiées",-1))]),e("div",ve,n(B.value),1)]),e("div",ge,[e("div",xe,[d(o(K),{class:"w-5 h-5 text-success"}),s[7]||(s[7]=e("h3",{class:"text-sm font-medium text-muted-foreground"},"Campagnes terminées",-1))]),e("div",_e,n(D.value),1)])]),e("div",pe,[e("div",he,[d(o(J),{class:"w-5 h-5 text-primary"}),s[8]||(s[8]=e("h3",{class:"font-semibold"},"Performance des campagnes",-1))]),l.value.length===0?(a(),c("div",be,[d(o(y),{class:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s[9]||(s[9]=e("p",{class:"text-muted-foreground"},"Aucune campagne à afficher",-1))])):(a(),c("div",we,[(a(!0),c(q,null,z(l.value,r=>(a(),c("div",{key:r.id,class:"flex items-center justify-between p-4 bg-muted/50 rounded-lg hover:bg-muted transition-colors"},[e("div",ye,[e("div",ke,[e("div",Ce,n(r.name),1),e("span",{class:h(["text-xs px-2 py-1 rounded-full",F(r.status)])},n(r.status),3)]),e("div",Me,[e("div",$e,[d(o(k),{class:"w-4 h-4"}),e("span",null,n(w(r.messages_sent||r.sent||0))+" envois",1)]),e("div",Be,[d(o(M),{class:"w-4 h-4"}),e("span",null,n(r.delivery_rate||r.delivered||0)+"% livrés",1)])])]),e("div",De,[e("div",{class:h(["font-semibold",T(r.delivery_rate||r.delivered||0)])},n(S(r.delivery_rate||r.delivered||0)),3)])]))),128))]))])]))])]),_:1}))}});export{Le as default};
