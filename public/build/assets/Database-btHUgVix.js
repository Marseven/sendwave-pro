import{o as r,c as l,b as t,d as Me,r as n,k as Z,m as Ve,n as se,p as Ee,j as Ue,x as a,y as d,i as h,f as c,v as H,C,F as g,q as b,t as u,g as f,w as oe,s as I,D as q,B as J,A as Ge}from"./main-ls90rwIC.js";import{_ as De,f as $,m as Se,l as re,c as le,i as Te,g as ne,h as je}from"./api-DPpa1nXl.js";import{_ as Fe}from"./TabNav.vue_vue_type_script_setup_true_lang-Bs6ZvByp.js";import{s as ze,a as G,b as R}from"./notifications-CHQAjgV4.js";import{r as Ne}from"./MagnifyingGlassIcon-CY_xzg28.js";import{r as ae,a as Le}from"./FolderIcon-BBLJssZb.js";import{r as Be}from"./PencilIcon-DoPBHX3G.js";import{r as Ie}from"./TrashIcon-C2gqBzIZ.js";import{r as K}from"./ArrowDownTrayIcon-CVfufe0v.js";import{r as Re}from"./ArrowUpTrayIcon-BEZaHx_8.js";function Ae(A,M){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Oe(A,M){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"})])}function Pe(A,M){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})])}const Ze={class:"p-4 sm:p-6 lg:p-8"},He={class:"mb-4 sm:mb-6"},qe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4"},Je={class:"text-xl sm:text-2xl font-bold flex items-center gap-2"},Ke={class:"flex items-center gap-2"},Xe={key:0,class:"space-y-6"},Qe={class:"flex flex-col sm:flex-row gap-4"},We={class:"flex-1 relative"},Ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},et={class:"flex items-start justify-between mb-3"},tt={class:"flex items-center gap-3"},st={class:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center"},ot={class:"font-semibold"},rt={class:"text-xs text-muted-foreground"},lt={class:"relative"},nt=["onClick"],at={key:0,class:"absolute right-0 mt-1 w-40 bg-card border rounded-md shadow-lg z-10"},dt=["onClick"],it=["onClick"],ut=["onClick"],ct={class:"flex items-center gap-4 text-sm"},mt={class:"flex items-center gap-1.5 text-muted-foreground"},pt={class:"flex items-center gap-1.5 text-muted-foreground"},vt={class:"mt-4 pt-4 border-t flex gap-2"},xt=["onClick"],gt=["onClick"],bt={key:0,class:"text-center py-12"},ft={key:1,class:"max-w-2xl mx-auto space-y-6"},yt={class:"rounded-lg border bg-card p-6 space-y-6"},ht={class:"flex items-center gap-2 pb-4 border-b"},wt={class:"space-y-2"},kt={class:"flex gap-2"},_t=["value"],Ct={key:0,class:"space-y-4"},$t={class:"p-4 bg-muted/50 rounded-lg flex items-center justify-between"},Mt={class:"flex items-center gap-3"},Vt={class:"font-medium"},Et={class:"text-xs text-muted-foreground"},Ut={class:"space-y-4"},Gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Dt={class:"space-y-2"},St=["value"],Tt={class:"space-y-2"},jt=["value"],Ft={class:"space-y-2"},zt=["value"],Nt={class:"space-y-3"},Lt={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},Bt={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},It=["disabled"],Rt={key:0,class:"flex items-center justify-center gap-2"},At={key:1},Ot={class:"rounded-lg border bg-card p-6"},Pt={key:2,class:"max-w-2xl mx-auto space-y-6"},Zt={class:"rounded-lg border bg-card p-6 space-y-6"},Ht={class:"flex items-center gap-2 pb-4 border-b"},qt={class:"space-y-4"},Jt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Kt={class:"text-xs text-muted-foreground"},Xt={key:0,class:"space-y-2"},Qt=["value"],Wt={class:"space-y-2"},Yt={class:"grid grid-cols-3 gap-3"},es=["value"],ts={class:"font-medium text-sm"},ss={class:"space-y-2"},os={class:"grid grid-cols-2 gap-2"},rs=["value"],ls={class:"text-sm"},ns=["disabled"],as={key:0,class:"flex items-center justify-center gap-2"},ds={key:1},is={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},us={class:"relative bg-card rounded-lg shadow-lg w-full max-w-md p-6 m-4"},cs={class:"text-lg font-semibold mb-4"},ms={class:"space-y-4"},ps={class:"space-y-2"},vs={class:"space-y-2"},xs={class:"flex gap-3 mt-6"},gs=["disabled"],Vs=Me({__name:"Database",setup(A){const M=Ue(),de=[{id:"groups",label:"My Groups"},{id:"import",label:"Import Contact"},{id:"export",label:"Export Contact"}],w=n("groups"),D=n([]),S=n(""),V=n("name"),k=n(null),y=n(!1),_=n(null),v=n({name:"",description:""}),ie=n(null),T=n(!1),m=n(null),O=n(""),x=n({phone:"",name:"",email:""}),j=n({skipDuplicates:!0,validateNumbers:!0}),F=n(!1),p=n("all"),E=n(""),U=n("csv"),z=n(["phone","name","email"]),N=n(!1),X=n(0),ue=[{value:"csv",label:"CSV",icon:ne},{value:"xlsx",label:"Excel",icon:Pe},{value:"txt",label:"TXT",icon:Ae}],ce=[{value:"phone",label:"Telephone"},{value:"name",label:"Nom"},{value:"email",label:"Email"},{value:"created_at",label:"Date creation"},{value:"status",label:"Statut"}],Q=Z(()=>{let o=[...D.value];if(S.value){const e=S.value.toLowerCase();o=o.filter(s=>s.name.toLowerCase().includes(e))}return V.value==="name"?o.sort((e,s)=>e.name.localeCompare(s.name)):V.value==="contacts"?o.sort((e,s)=>(s.contacts_count||0)-(e.contacts_count||0)):V.value==="recent"&&o.sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()),o}),W=Z(()=>O.value&&m.value&&x.value.phone),Y=Z(()=>p.value==="group"&&!E.value?!1:z.value.length>0);async function L(){try{const o=await $.get("/contact-groups");D.value=o.data.data||o.data||[]}catch(o){console.error("Error loading groups:",o)}}async function me(){var o;try{const e=await $.get("/contacts?per_page=1");X.value=e.data.total||((o=e.data.data)==null?void 0:o.length)||0}catch(e){console.error("Error loading contacts count:",e)}}function pe(o){return new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})}function ve(o){k.value=k.value===o?null:o}function xe(o){_.value=o,v.value={name:o.name,description:o.description||""},y.value=!0,k.value=null}function ge(o){M.push(`/contacts?group=${o.id}`),k.value=null}async function be(o){var s,i;if(k.value=null,await ze("Supprimer le groupe",`Etes-vous sur de vouloir supprimer "${o.name}" ? Les contacts ne seront pas supprimes.`))try{await $.delete(`/contact-groups/${o.id}`),G("Groupe supprime"),L()}catch(B){R(((i=(s=B.response)==null?void 0:s.data)==null?void 0:i.message)||"Erreur lors de la suppression")}}function fe(o){M.push(`/send-sms?group=${o.id}`)}function ye(o){w.value="export",p.value="group",E.value=String(o.id)}function ee(){y.value=!1,_.value=null,v.value={name:"",description:""}}async function he(){var o,e;try{_.value?(await $.put(`/contact-groups/${_.value.id}`,v.value),G("Groupe modifie")):(await $.post("/contact-groups",v.value),G("Groupe cree")),ee(),L()}catch(s){R(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de l'enregistrement")}}function we(o){var s;T.value=!1;const e=(s=o.dataTransfer)==null?void 0:s.files;e&&e.length>0&&te(e[0])}function ke(o){const e=o.target;e.files&&e.files.length>0&&te(e.files[0])}function te(o){const e=o.size<1048576?`${(o.size/1024).toFixed(1)} KB`:`${(o.size/1048576).toFixed(1)} MB`;m.value={name:o.name,size:e,columns:["phone","name","email","company"]},x.value={phone:"phone",name:"name",email:"email"}}async function _e(){var o,e;if(W.value){F.value=!0;try{await new Promise(s=>setTimeout(s,1500)),G("Contacts importes avec succes"),m.value=null,L()}catch(s){R(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de l'import")}finally{F.value=!1}}}function Ce(){const o=`phone,name,email
+241771234567,Jean Dupont,jean@example.com
+241621234567,Marie Martin,marie@example.com`,e=new Blob([o],{type:"text/csv"}),s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download="contacts_template.csv",i.click(),URL.revokeObjectURL(s)}async function $e(){var o,e;if(Y.value){N.value=!0;try{const s={format:U.value,fields:z.value.join(",")};p.value==="group"&&(s.group_id=E.value);const i=await $.get("/contacts/export",{params:s,responseType:"blob"}),B=URL.createObjectURL(i.data),P=document.createElement("a");P.href=B,P.download=`contacts_export.${U.value}`,P.click(),URL.revokeObjectURL(B),G("Export termine")}catch(s){R(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de l'export")}finally{N.value=!1}}}return Ve(()=>{L(),me()}),(o,e)=>(r(),se(De,null,{default:Ee(()=>[t("div",Ze,[t("div",He,[t("div",qe,[t("div",null,[t("h1",Je,[a(d(Se),{class:"w-6 h-6 sm:w-7 sm:h-7 text-primary"}),e[24]||(e[24]=h(" Base de données ",-1))]),e[25]||(e[25]=t("p",{class:"text-sm text-muted-foreground mt-1"},"Gérez vos contacts et groupes",-1))]),t("div",Ke,[t("button",{onClick:e[0]||(e[0]=s=>y.value=!0),class:"inline-flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90 h-9 sm:h-10"},[a(d(re),{class:"w-4 h-4"}),e[26]||(e[26]=t("span",{class:"hidden sm:inline"},"Nouveau groupe",-1)),e[27]||(e[27]=t("span",{class:"sm:hidden"},"Nouveau",-1))])])])]),a(Fe,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),tabs:de,class:"mb-6"},null,8,["modelValue"]),w.value==="groups"?(r(),l("div",Xe,[t("div",Qe,[t("div",We,[a(d(Ne),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>S.value=s),type:"text",placeholder:"Rechercher un groupe...",class:"w-full h-10 pl-10 pr-4 rounded-md border border-input bg-background text-sm"},null,512),[[H,S.value]])]),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>V.value=s),class:"h-10 px-3 rounded-md border border-input bg-background text-sm"},[...e[28]||(e[28]=[t("option",{value:"name"},"Trier par nom",-1),t("option",{value:"contacts"},"Par nombre de contacts",-1),t("option",{value:"recent"},"Plus recents",-1)])],512),[[C,V.value]])]),t("div",Ye,[(r(!0),l(g,null,b(Q.value,s=>(r(),l("div",{key:s.id,class:"rounded-lg border bg-card p-5 hover:shadow-md transition-shadow"},[t("div",et,[t("div",tt,[t("div",st,[a(d(ae),{class:"w-5 h-5 text-primary"})]),t("div",null,[t("h3",ot,u(s.name),1),t("p",rt,u(s.description||"Aucune description"),1)])]),t("div",lt,[t("button",{onClick:i=>ve(s.id),class:"p-1 rounded hover:bg-accent"},[a(d(Oe),{class:"w-5 h-5 text-muted-foreground"})],8,nt),k.value===s.id?(r(),l("div",at,[t("button",{onClick:i=>xe(s),class:"w-full px-3 py-2 text-sm text-left hover:bg-accent flex items-center gap-2"},[a(d(Be),{class:"w-4 h-4"}),e[29]||(e[29]=h(" Modifier ",-1))],8,dt),t("button",{onClick:i=>ge(s),class:"w-full px-3 py-2 text-sm text-left hover:bg-accent flex items-center gap-2"},[a(d(le),{class:"w-4 h-4"}),e[30]||(e[30]=h(" Voir contacts ",-1))],8,it),t("button",{onClick:i=>be(s),class:"w-full px-3 py-2 text-sm text-left hover:bg-destructive/10 text-destructive flex items-center gap-2"},[a(d(Ie),{class:"w-4 h-4"}),e[31]||(e[31]=h(" Supprimer ",-1))],8,ut)])):f("",!0)])]),t("div",ct,[t("div",mt,[a(d(le),{class:"w-4 h-4"}),t("span",null,u(s.contacts_count||0)+" contacts",1)]),t("div",pt,[a(d(Te),{class:"w-4 h-4"}),t("span",null,u(pe(s.created_at)),1)])]),t("div",vt,[t("button",{onClick:i=>fe(s),class:"flex-1 h-9 text-sm font-medium rounded-md bg-primary text-primary-foreground hover:bg-primary/90"}," Envoyer SMS ",8,xt),t("button",{onClick:i=>ye(s),class:"h-9 px-3 text-sm font-medium rounded-md border hover:bg-accent"},[a(d(K),{class:"w-4 h-4"})],8,gt)])]))),128))]),Q.value.length===0?(r(),l("div",bt,[a(d(ae),{class:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e[32]||(e[32]=t("h3",{class:"text-lg font-semibold mb-2"},"Aucun groupe",-1)),e[33]||(e[33]=t("p",{class:"text-muted-foreground mb-4"},"Creez votre premier groupe de contacts",-1)),t("button",{onClick:e[4]||(e[4]=s=>y.value=!0),class:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium"}," Creer un groupe ")])):f("",!0)])):f("",!0),w.value==="import"?(r(),l("div",ft,[t("div",yt,[t("div",ht,[a(d(Re),{class:"w-5 h-5 text-primary"}),e[34]||(e[34]=t("h3",{class:"font-semibold"},"Importer des contacts",-1))]),t("div",wt,[e[36]||(e[36]=t("label",{class:"text-sm font-medium"},"Groupe de destination *",-1)),t("div",kt,[c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>O.value=s),class:"flex-1 h-10 px-3 rounded-md border border-input bg-background text-sm"},[e[35]||(e[35]=t("option",{value:""},"Selectionner un groupe...",-1)),(r(!0),l(g,null,b(D.value,s=>(r(),l("option",{key:s.id,value:s.id},u(s.name),9,_t))),128))],512),[[C,O.value]]),t("button",{onClick:e[6]||(e[6]=s=>y.value=!0),class:"h-10 px-3 border rounded-md hover:bg-accent"},[a(d(re),{class:"w-5 h-5"})])])]),t("div",{onDragover:e[8]||(e[8]=oe(s=>T.value=!0,["prevent"])),onDragleave:e[9]||(e[9]=s=>T.value=!1),onDrop:oe(we,["prevent"]),class:I(["border-2 border-dashed rounded-lg p-8 text-center transition-colors",T.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"])},[t("input",{type:"file",ref_key:"fileInput",ref:ie,onChange:ke,accept:".csv,.xlsx,.xls",class:"hidden"},null,544),a(d(Le),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[37]||(e[37]=t("p",{class:"text-sm font-medium mb-2"},"Glissez-deposez votre fichier ici",-1)),e[38]||(e[38]=t("p",{class:"text-xs text-muted-foreground mb-4"},"ou",-1)),t("button",{onClick:e[7]||(e[7]=s=>o.$refs.fileInput.click()),class:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90"}," Parcourir "),e[39]||(e[39]=t("p",{class:"text-xs text-muted-foreground mt-4"}," Formats acceptes: CSV, Excel (.xlsx, .xls) ",-1))],34),m.value?(r(),l("div",Ct,[t("div",$t,[t("div",Mt,[a(d(ne),{class:"w-8 h-8 text-primary"}),t("div",null,[t("p",Vt,u(m.value.name),1),t("p",Et,u(m.value.size),1)])]),t("button",{onClick:e[10]||(e[10]=s=>m.value=null),class:"text-muted-foreground hover:text-destructive"},[a(d(je),{class:"w-5 h-5"})])]),t("div",Ut,[e[45]||(e[45]=t("h4",{class:"font-medium"},"Mapping des colonnes",-1)),t("div",Gt,[t("div",Dt,[e[40]||(e[40]=t("label",{class:"text-sm font-medium"},"Colonne Telephone *",-1)),c(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>x.value.phone=s),class:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm"},[(r(!0),l(g,null,b(m.value.columns,s=>(r(),l("option",{key:s,value:s},u(s),9,St))),128))],512),[[C,x.value.phone]])]),t("div",Tt,[e[42]||(e[42]=t("label",{class:"text-sm font-medium"},"Colonne Nom",-1)),c(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>x.value.name=s),class:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm"},[e[41]||(e[41]=t("option",{value:""},"-- Aucune --",-1)),(r(!0),l(g,null,b(m.value.columns,s=>(r(),l("option",{key:s,value:s},u(s),9,jt))),128))],512),[[C,x.value.name]])]),t("div",Ft,[e[44]||(e[44]=t("label",{class:"text-sm font-medium"},"Colonne Email",-1)),c(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>x.value.email=s),class:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm"},[e[43]||(e[43]=t("option",{value:""},"-- Aucune --",-1)),(r(!0),l(g,null,b(m.value.columns,s=>(r(),l("option",{key:s,value:s},u(s),9,zt))),128))],512),[[C,x.value.email]])])])]),t("div",Nt,[t("label",Lt,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=s=>j.value.skipDuplicates=s),class:"w-4 h-4 rounded"},null,512),[[q,j.value.skipDuplicates]]),e[46]||(e[46]=t("div",null,[t("p",{class:"font-medium text-sm"},"Ignorer les doublons"),t("p",{class:"text-xs text-muted-foreground"},"Ne pas importer les numeros existants")],-1))]),t("label",Bt,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=s=>j.value.validateNumbers=s),class:"w-4 h-4 rounded"},null,512),[[q,j.value.validateNumbers]]),e[47]||(e[47]=t("div",null,[t("p",{class:"font-medium text-sm"},"Valider les numeros"),t("p",{class:"text-xs text-muted-foreground"},"Verifier le format Gabon")],-1))])])])):f("",!0),t("button",{onClick:_e,disabled:!W.value||F.value,class:"w-full h-12 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 disabled:opacity-50"},[F.value?(r(),l("span",Rt,[...e[48]||(e[48]=[t("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),h(" Importation en cours... ",-1)])])):(r(),l("span",At,"Importer les contacts"))],8,It)]),t("div",Ot,[e[50]||(e[50]=t("h3",{class:"font-semibold mb-4"},"Modele de fichier",-1)),e[51]||(e[51]=t("p",{class:"text-sm text-muted-foreground mb-4"}," Telechargez notre modele pour formater correctement vos contacts ",-1)),t("button",{onClick:Ce,class:"inline-flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-accent text-sm font-medium"},[a(d(K),{class:"w-4 h-4"}),e[49]||(e[49]=h(" Telecharger le modele CSV ",-1))])])])):f("",!0),w.value==="export"?(r(),l("div",Pt,[t("div",Zt,[t("div",Ht,[a(d(K),{class:"w-5 h-5 text-primary"}),e[52]||(e[52]=t("h3",{class:"font-semibold"},"Exporter des contacts",-1))]),t("div",qt,[e[55]||(e[55]=t("label",{class:"text-sm font-medium"},"Source des contacts",-1)),t("div",Jt,[t("label",{class:I(["flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent/50",p.value==="all"?"border-primary bg-primary/5":"border-border"])},[c(t("input",{type:"radio","onUpdate:modelValue":e[16]||(e[16]=s=>p.value=s),value:"all",class:"w-4 h-4"},null,512),[[J,p.value]]),t("div",null,[e[53]||(e[53]=t("p",{class:"font-medium text-sm"},"Tous les contacts",-1)),t("p",Kt,u(X.value)+" contacts",1)])],2),t("label",{class:I(["flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent/50",p.value==="group"?"border-primary bg-primary/5":"border-border"])},[c(t("input",{type:"radio","onUpdate:modelValue":e[17]||(e[17]=s=>p.value=s),value:"group",class:"w-4 h-4"},null,512),[[J,p.value]]),e[54]||(e[54]=t("div",null,[t("p",{class:"font-medium text-sm"},"Un groupe specifique"),t("p",{class:"text-xs text-muted-foreground"},"Selectionner ci-dessous")],-1))],2)])]),p.value==="group"?(r(),l("div",Xt,[e[57]||(e[57]=t("label",{class:"text-sm font-medium"},"Groupe a exporter",-1)),c(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>E.value=s),class:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm"},[e[56]||(e[56]=t("option",{value:""},"Selectionner un groupe...",-1)),(r(!0),l(g,null,b(D.value,s=>(r(),l("option",{key:s.id,value:s.id},u(s.name)+" ("+u(s.contacts_count)+" contacts) ",9,Qt))),128))],512),[[C,E.value]])])):f("",!0),t("div",Wt,[e[58]||(e[58]=t("label",{class:"text-sm font-medium"},"Format d'export",-1)),t("div",Yt,[(r(),l(g,null,b(ue,s=>t("label",{key:s.value,class:I(["flex flex-col items-center gap-2 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent/50",U.value===s.value?"border-primary bg-primary/5":"border-border"])},[c(t("input",{type:"radio","onUpdate:modelValue":e[19]||(e[19]=i=>U.value=i),value:s.value,class:"hidden"},null,8,es),[[J,U.value]]),(r(),se(Ge(s.icon),{class:"w-8 h-8 text-muted-foreground"})),t("span",ts,u(s.label),1)],2)),64))])]),t("div",ss,[e[59]||(e[59]=t("label",{class:"text-sm font-medium"},"Champs a exporter",-1)),t("div",os,[(r(),l(g,null,b(ce,s=>t("label",{key:s.value,class:"flex items-center gap-2 p-2 rounded border hover:bg-accent/50 cursor-pointer"},[c(t("input",{type:"checkbox","onUpdate:modelValue":e[20]||(e[20]=i=>z.value=i),value:s.value,class:"w-4 h-4 rounded"},null,8,rs),[[q,z.value]]),t("span",ls,u(s.label),1)])),64))])]),t("button",{onClick:$e,disabled:!Y.value||N.value,class:"w-full h-12 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 disabled:opacity-50"},[N.value?(r(),l("span",as,[...e[60]||(e[60]=[t("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),h(" Exportation en cours... ",-1)])])):(r(),l("span",ds,"Exporter les contacts"))],8,ns)])])):f("",!0)]),y.value?(r(),l("div",is,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[21]||(e[21]=s=>y.value=!1)}),t("div",us,[t("h3",cs,u(_.value?"Modifier le groupe":"Nouveau groupe"),1),t("div",ms,[t("div",ps,[e[61]||(e[61]=t("label",{class:"text-sm font-medium"},"Nom du groupe *",-1)),c(t("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>v.value.name=s),type:"text",placeholder:"Ex: Clients VIP",class:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm"},null,512),[[H,v.value.name]])]),t("div",vs,[e[62]||(e[62]=t("label",{class:"text-sm font-medium"},"Description",-1)),c(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=s=>v.value.description=s),placeholder:"Description du groupe...",rows:"3",class:"w-full px-3 py-2 rounded-md border border-input bg-background text-sm resize-none"},null,512),[[H,v.value.description]])])]),t("div",xs,[t("button",{onClick:he,disabled:!v.value.name,class:"flex-1 h-10 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 disabled:opacity-50"},u(_.value?"Enregistrer":"Creer"),9,gs),t("button",{onClick:ee,class:"px-4 h-10 border rounded-lg hover:bg-accent"}," Annuler ")])])])):f("",!0)]),_:1}))}});export{Vs as default};
