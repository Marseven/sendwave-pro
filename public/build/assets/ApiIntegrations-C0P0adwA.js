import{o as a,c as o,b as e,d as H,r as _,j as O,q as N,t as m,s as g,x as v,g as l,z as C,F as k,p as T,m as F,u as le,a as ce,l as he,n as ge,f as P,v as V,C as z,w as J,D as ye,H as ve}from"./main-GXHSoYD-.js";import{u as re,f as A,_ as xe,o as _e,i as K}from"./api--QcLuAnz.js";import{_ as be}from"./TabNav.vue_vue_type_script_setup_true_lang-BCGdYJTi.js";import{s as fe}from"./subAccountService-DPYel1RM.js";import{b as G,s as ee,a as se}from"./notifications-CHQAjgV4.js";import{r as te}from"./KeyIcon-QT6g5t6K.js";import{r as we}from"./UserIcon-CiNZZN9i.js";import{r as ke}from"./ArrowPathIcon-BrnhlXt3.js";import{r as ae}from"./MagnifyingGlassIcon-CGZJzAa2.js";import{r as Te}from"./CheckCircleIcon-Bokxsqig.js";function Se(r,n){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})])}function U(r,n){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function Ee(r,n){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Pe(r,n){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}const oe=[{id:"auth",name:"Authentification",description:"Inscription, connexion, gestion de profil et permissions",endpoints:[{method:"POST",path:"/api/auth/register",summary:"Inscription d'un nouvel utilisateur",auth:!1,body:{name:"John Doe",email:"john@example.com",password:"password123",password_confirmation:"password123",company:"Ma Société"},response:{access_token:"1|abc...",token_type:"Bearer",user:{id:1,name:"John Doe",email:"john@example.com"}}},{method:"POST",path:"/api/auth/login",summary:"Connexion utilisateur",auth:!1,body:{email:"admin@sendwave.com",password:"password123"},response:{access_token:"1|abcdefghijklmnopqrstuvwxyz",token_type:"Bearer",user:{id:1,name:"Admin",email:"admin@sendwave.com",role:"admin"}}},{method:"POST",path:"/api/auth/logout",summary:"Déconnexion (révocation du token)",auth:!0,response:{message:"Déconnexion réussie"}},{method:"GET",path:"/api/auth/me",summary:"Informations de l'utilisateur connecté",auth:!0,response:{id:1,name:"Admin",email:"admin@sendwave.com",role:"admin",permissions:["send_sms","view_history","manage_contacts"]}},{method:"GET",path:"/api/auth/permissions",summary:"Permissions de l'utilisateur courant",auth:!0,response:{permissions:["send_sms","view_history","manage_contacts","manage_groups"]}},{method:"GET",path:"/api/auth/available-permissions",summary:"Liste de toutes les permissions disponibles",auth:!0,response:{permissions:[{key:"send_sms",label:"Envoyer des SMS"},{key:"view_history",label:"Voir l'historique"}]}},{method:"GET",path:"/api/user/profile",summary:"Profil utilisateur détaillé",auth:!0,response:{id:1,name:"Admin",email:"admin@sendwave.com",company:"SendWave",phone:"+24177000000"}},{method:"PUT",path:"/api/user/profile",summary:"Mettre à jour le profil",auth:!0,body:{name:"Nouveau Nom",company:"Nouvelle Société",phone:"+24177000001"},response:{message:"Profil mis à jour",user:{id:1,name:"Nouveau Nom"}}}]},{id:"messages",name:"Messages",description:"Envoi de SMS, analyse de numéros et historique des messages",endpoints:[{method:"POST",path:"/api/messages/send-otp",summary:"Envoyer un SMS OTP",description:"Endpoint simplifié pour l'envoi de codes OTP à un seul destinataire. Limité à 160 caractères (1 segment SMS). Inclut une référence optionnelle pour la traçabilité.",auth:!0,permissions:["send_sms"],body:{recipient:"+24177123456",message:"Votre code de vérification est : 4829",reference:"otp-login-12345"},response:{success:!0,data:{message_id:42,recipient:"+24177123456",status:"sent",provider:"airtel",cost:20,reference:"otp-login-12345"}},curl:`curl -X POST {baseUrl}/api/messages/send-otp \\
  -H 'X-API-Key: YOUR_API_KEY' \\
  -H 'Content-Type: application/json' \\
  -d '{"recipient":"+24177123456","message":"Votre code: 1234","reference":"ref-001"}'`},{method:"POST",path:"/api/messages/send",summary:"Envoyer un SMS",description:"Envoie un ou plusieurs SMS aux destinataires spécifiés. Les numéros sont normalisés automatiquement et les numéros en liste noire sont filtrés. Le budget et les crédits sont vérifiés avant l'envoi (403 si insuffisants).",auth:!0,permissions:["send_sms"],body:{recipients:["+24177123456","+24162987654"],contact_ids:[1,2,3],group_ids:[1],message:"Votre message ici",_comment:"Au moins un des champs recipients, contact_ids ou group_ids est requis"},response:{message:"Messages envoyés avec succès",data:{total_sent:2,total_cost:40,results:[{phone:"24177123456",status:"sent",provider:"airtel",cost:20},{phone:"24162987654",status:"sent",provider:"moov",cost:20}]}},curl:`# Via Bearer token:
curl -X POST {baseUrl}/api/messages/send \\
  -H 'Authorization: Bearer YOUR_TOKEN' \\
  -H 'Content-Type: application/json' \\
  -d '{"recipients":["+24177123456"],"message":"Hello!"}'

# Via X-API-Key:
curl -X POST {baseUrl}/api/messages/send \\
  -H 'X-API-Key: YOUR_API_KEY' \\
  -H 'Content-Type: application/json' \\
  -d '{"recipients":["+24177123456"],"message":"Hello!"}'`},{method:"POST",path:"/api/messages/analyze",summary:"Analyser un message SMS",description:"Analyse le contenu d'un message : nombre de segments, encodage, caractères spéciaux.",auth:!0,permissions:["send_sms"],body:{message:"Votre message à analyser"},response:{segments:1,encoding:"GSM-7",characters:25,max_characters:160,has_unicode:!1}},{method:"POST",path:"/api/messages/number-info",summary:"Informations sur un numéro de téléphone",description:"Retourne l'opérateur détecté, le pays et le statut de normalisation.",auth:!0,permissions:["send_sms"],body:{phone:"77123456"},response:{original:"77123456",normalized:"+24177123456",country:"GA",operator:"airtel",valid:!0}},{method:"GET",path:"/api/messages/history",summary:"Historique des messages envoyés",description:"Liste paginée des messages avec filtres par date, statut, opérateur.",auth:!0,permissions:["view_history"],parameters:[{name:"page",type:"integer",description:"Numéro de page",example:"1"},{name:"per_page",type:"integer",description:"Résultats par page (max 100)",example:"15"},{name:"status",type:"string",description:"Filtrer par statut: sent, delivered, failed",example:"sent"},{name:"date_from",type:"string",description:"Date de début (Y-m-d)",example:"2026-01-01"},{name:"date_to",type:"string",description:"Date de fin (Y-m-d)",example:"2026-01-31"}],response:{data:[{id:1,phone:"24177123456",message:"Hello",status:"delivered",provider:"airtel",cost:20,created_at:"2026-01-15T10:30:00Z"}],meta:{current_page:1,last_page:5,total:73}}},{method:"GET",path:"/api/messages/stats",summary:"Statistiques des messages",auth:!0,permissions:["view_history"],response:{total_sent:1500,total_delivered:1420,total_failed:80,delivery_rate:94.67,total_cost:3e4}},{method:"GET",path:"/api/messages/export",summary:"Exporter l'historique des messages",description:"Exporte les messages au format CSV ou Excel.",auth:!0,permissions:["export_data"],parameters:[{name:"format",type:"string",description:"Format: csv ou xlsx",example:"csv"},{name:"date_from",type:"string",description:"Date de début",example:"2026-01-01"},{name:"date_to",type:"string",description:"Date de fin",example:"2026-01-31"}],response:{_comment:"Téléchargement du fichier"}}]},{id:"contacts",name:"Contacts",description:"Gestion des contacts : création, import, export, champs personnalisés",endpoints:[{method:"GET",path:"/api/contacts",summary:"Liste des contacts",auth:!0,permissions:["manage_contacts"],parameters:[{name:"page",type:"integer",description:"Numéro de page",example:"1"},{name:"per_page",type:"integer",description:"Résultats par page",example:"15"},{name:"search",type:"string",description:"Recherche par nom, email ou téléphone",example:"John"},{name:"group_id",type:"integer",description:"Filtrer par groupe",example:"3"}],response:{data:[{id:1,first_name:"John",last_name:"Doe",phone:"+24177123456",email:"john@example.com",custom_fields:{}}],meta:{current_page:1,last_page:3,total:42}}},{method:"POST",path:"/api/contacts",summary:"Créer un contact",auth:!0,permissions:["manage_contacts"],body:{first_name:"John",last_name:"Doe",phone:"+24177123456",email:"john@example.com",custom_fields:{ville:"Libreville"}},response:{message:"Contact créé",data:{id:1,first_name:"John",last_name:"Doe",phone:"+24177123456"}}},{method:"GET",path:"/api/contacts/{id}",summary:"Détails d'un contact",auth:!0,permissions:["manage_contacts"],response:{id:1,first_name:"John",last_name:"Doe",phone:"+24177123456",email:"john@example.com",custom_fields:{ville:"Libreville"},groups:[{id:1,name:"Clients VIP"}]}},{method:"PUT",path:"/api/contacts/{id}",summary:"Modifier un contact",auth:!0,permissions:["manage_contacts"],body:{first_name:"Jane",last_name:"Doe",phone:"+24177123456",email:"jane@example.com"},response:{message:"Contact mis à jour",data:{id:1,first_name:"Jane",last_name:"Doe"}}},{method:"DELETE",path:"/api/contacts/{id}",summary:"Supprimer un contact",auth:!0,permissions:["manage_contacts"],response:{message:"Contact supprimé"}},{method:"POST",path:"/api/contacts/delete-many",summary:"Suppression multiple de contacts",description:"Supprime plusieurs contacts en une seule requête. Seuls les contacts appartenant à l'utilisateur sont supprimés.",auth:!0,permissions:["manage_contacts"],body:{ids:[1,2,3]},response:{message:"3 contact(s) supprimé(s)",deleted_count:3}},{method:"POST",path:"/api/contacts/import",summary:"Importer des contacts (CSV/Excel)",description:"Upload d'un fichier CSV ou Excel pour importer des contacts en masse.",auth:!0,permissions:["manage_contacts"],body:{_comment:"multipart/form-data",file:"(fichier CSV ou XLSX)",group_id:1,mapping:{0:"first_name",1:"last_name",2:"phone"}},response:{message:"Import terminé",imported:150,duplicates:5,errors:2}},{method:"POST",path:"/api/contacts/preview-import",summary:"Prévisualiser un import de contacts",auth:!0,permissions:["manage_contacts"],body:{_comment:"multipart/form-data",file:"(fichier CSV ou XLSX)"},response:{headers:["Nom","Prénom","Téléphone"],preview:[["Doe","John","77123456"]],total_rows:150}},{method:"GET",path:"/api/contacts/export",summary:"Exporter les contacts",auth:!0,permissions:["export_data"],parameters:[{name:"format",type:"string",description:"Format: csv ou xlsx",example:"csv"},{name:"group_id",type:"integer",description:"Exporter un groupe spécifique"}],response:{_comment:"Téléchargement du fichier"}}]},{id:"contact-groups",name:"Groupes de Contacts",description:"Création et gestion de groupes, ajout/retrait de membres",endpoints:[{method:"GET",path:"/api/contact-groups",summary:"Liste des groupes",auth:!0,permissions:["manage_groups"],response:{data:[{id:1,name:"Clients VIP",contacts_count:42,created_at:"2026-01-01T00:00:00Z"}]}},{method:"POST",path:"/api/contact-groups",summary:"Créer un groupe",auth:!0,permissions:["manage_groups"],body:{name:"Nouveau Groupe",description:"Description du groupe"},response:{message:"Groupe créé",data:{id:2,name:"Nouveau Groupe"}}},{method:"GET",path:"/api/contact-groups/{id}",summary:"Détails d'un groupe",auth:!0,permissions:["manage_groups"],response:{id:1,name:"Clients VIP",description:"Nos meilleurs clients",contacts_count:42}},{method:"PUT",path:"/api/contact-groups/{id}",summary:"Modifier un groupe",auth:!0,permissions:["manage_groups"],body:{name:"Nom modifié",description:"Nouvelle description"},response:{message:"Groupe mis à jour",data:{id:1,name:"Nom modifié"}}},{method:"DELETE",path:"/api/contact-groups/{id}",summary:"Supprimer un groupe",auth:!0,permissions:["manage_groups"],response:{message:"Groupe supprimé"}},{method:"GET",path:"/api/contact-groups/{id}/contacts",summary:"Contacts d'un groupe",auth:!0,permissions:["manage_groups"],response:{data:[{id:1,first_name:"John",last_name:"Doe",phone:"+24177123456"}],meta:{total:42}}},{method:"POST",path:"/api/contact-groups/{id}/contacts/add",summary:"Ajouter des contacts au groupe",auth:!0,permissions:["manage_groups"],body:{contact_ids:[1,2,3]},response:{message:"3 contacts ajoutés au groupe",added:3}},{method:"POST",path:"/api/contact-groups/{id}/contacts/remove",summary:"Retirer des contacts du groupe",auth:!0,permissions:["manage_groups"],body:{contact_ids:[1,2]},response:{message:"2 contacts retirés du groupe",removed:2}}]},{id:"campaigns",name:"Campagnes",description:"Création, envoi, planification et A/B testing de campagnes SMS",endpoints:[{method:"GET",path:"/api/campaigns",summary:"Liste des campagnes",auth:!0,permissions:["create_campaigns"],parameters:[{name:"status",type:"string",description:"Filtrer par statut: draft, scheduled, sending, completed, failed",example:"draft"}],response:{data:[{id:1,name:"Promo Janvier",status:"completed",recipients_count:500,sent_count:495,created_at:"2026-01-10T08:00:00Z"}]}},{method:"POST",path:"/api/campaigns",summary:"Créer une campagne",auth:!0,permissions:["create_campaigns"],body:{name:"Promo Février",message:"Profitez de nos offres ! {prenom}",group_ids:[1,2],sender_id:"SENDWAVE"},response:{message:"Campagne créée",data:{id:2,name:"Promo Février",status:"draft"}}},{method:"GET",path:"/api/campaigns/{id}",summary:"Détails d'une campagne",auth:!0,permissions:["create_campaigns"],response:{id:1,name:"Promo Janvier",message:"Profitez de nos offres !",status:"completed",recipients_count:500,sent_count:495,failed_count:5,cost:9900,groups:[{id:1,name:"Clients VIP"}]}},{method:"PUT",path:"/api/campaigns/{id}",summary:"Modifier une campagne (brouillon uniquement)",auth:!0,permissions:["create_campaigns"],body:{name:"Promo Modifiée",message:"Nouveau message"},response:{message:"Campagne mise à jour",data:{id:1,name:"Promo Modifiée"}}},{method:"DELETE",path:"/api/campaigns/{id}",summary:"Supprimer une campagne",auth:!0,permissions:["create_campaigns"],response:{message:"Campagne supprimée"}},{method:"POST",path:"/api/campaigns/{id}/send",summary:"Lancer une campagne",description:"Démarre l'envoi immédiat d'une campagne en brouillon.",auth:!0,permissions:["create_campaigns"],response:{message:"Campagne lancée",status:"sending"}},{method:"POST",path:"/api/campaigns/{id}/clone",summary:"Cloner une campagne",auth:!0,permissions:["create_campaigns"],response:{message:"Campagne clonée",data:{id:3,name:"Promo Janvier (copie)",status:"draft"}}},{method:"POST",path:"/api/campaigns/{id}/schedule",summary:"Planifier une campagne",auth:!0,permissions:["create_campaigns"],body:{scheduled_at:"2026-02-14T08:00:00",timezone:"Africa/Libreville"},response:{message:"Campagne planifiée",scheduled_at:"2026-02-14T08:00:00"}},{method:"GET",path:"/api/campaigns/{id}/schedule",summary:"Voir la planification d'une campagne",auth:!0,permissions:["create_campaigns"],response:{scheduled_at:"2026-02-14T08:00:00",timezone:"Africa/Libreville",status:"pending"}},{method:"DELETE",path:"/api/campaigns/{id}/schedule",summary:"Annuler la planification",auth:!0,permissions:["create_campaigns"],response:{message:"Planification annulée"}},{method:"POST",path:"/api/campaigns/{id}/variants",summary:"Créer une variante A/B",auth:!0,permissions:["create_campaigns"],body:{name:"Variante B",message:"Message alternatif",percentage:50},response:{message:"Variante créée",data:{id:1,name:"Variante B",percentage:50}}},{method:"GET",path:"/api/campaigns/{id}/variants",summary:"Lister les variantes d'une campagne",auth:!0,permissions:["create_campaigns"],response:{data:[{id:1,name:"Variante A",message:"Message A",percentage:50},{id:2,name:"Variante B",message:"Message B",percentage:50}]}},{method:"DELETE",path:"/api/campaigns/{id}/variants",summary:"Supprimer toutes les variantes",auth:!0,permissions:["create_campaigns"],response:{message:"Variantes supprimées"}},{method:"GET",path:"/api/campaigns/history",summary:"Historique des campagnes",auth:!0,permissions:["view_history"],parameters:[{name:"status",type:"string",description:"Filtrer par statut",example:"completed"},{name:"date_from",type:"string",description:"Date de début",example:"2026-01-01"},{name:"date_to",type:"string",description:"Date de fin",example:"2026-01-31"}],response:{data:[{id:1,name:"Promo",status:"completed",sent_count:500,created_at:"2026-01-10T08:00:00Z"}],meta:{total:15}}},{method:"GET",path:"/api/campaigns/stats",summary:"Statistiques globales des campagnes",auth:!0,permissions:["view_history"],response:{total_campaigns:25,total_sent:12500,total_delivered:11800,average_delivery_rate:94.4,total_cost:25e4}}]},{id:"templates",name:"Templates",description:"Modèles de messages réutilisables avec variables",endpoints:[{method:"GET",path:"/api/templates",summary:"Liste des templates",auth:!0,permissions:["manage_templates"],response:{data:[{id:1,name:"Bienvenue",content:"Bienvenue {prenom} !",category:"notification",is_public:!1}]}},{method:"POST",path:"/api/templates",summary:"Créer un template",auth:!0,permissions:["manage_templates"],body:{name:"Confirmation",content:"Bonjour {prenom}, votre commande #{custom.order_id} est confirmée.",category:"transactional"},response:{message:"Template créé",data:{id:2,name:"Confirmation"}}},{method:"GET",path:"/api/templates/{id}",summary:"Détails d'un template",auth:!0,permissions:["manage_templates"],response:{id:1,name:"Bienvenue",content:"Bienvenue {prenom} !",category:"notification"}},{method:"PUT",path:"/api/templates/{id}",summary:"Modifier un template",auth:!0,permissions:["manage_templates"],body:{name:"Bienvenue V2",content:"Salut {prenom} ! Bienvenue chez SendWave."},response:{message:"Template mis à jour"}},{method:"DELETE",path:"/api/templates/{id}",summary:"Supprimer un template",auth:!0,permissions:["manage_templates"],response:{message:"Template supprimé"}},{method:"GET",path:"/api/templates/categories",summary:"Liste des catégories de templates",auth:!0,permissions:["manage_templates"],response:{categories:["notification","transactional","marketing","reminder"]}},{method:"POST",path:"/api/templates/{id}/use",summary:"Utiliser un template (incrémenter le compteur)",auth:!0,permissions:["manage_templates"],response:{message:"Template utilisé",usage_count:15}},{method:"POST",path:"/api/templates/{id}/preview",summary:"Prévisualiser un template avec des données",auth:!0,permissions:["manage_templates"],body:{variables:{prenom:"Jean",nom:"Dupont"}},response:{preview:"Bonjour Jean Dupont, bienvenue !"}},{method:"POST",path:"/api/templates/{id}/toggle-public",summary:"Basculer la visibilité publique",auth:!0,permissions:["manage_templates"],response:{message:"Visibilité modifiée",is_public:!0}}]},{id:"analytics",name:"Analytics",description:"Tableau de bord, graphiques, rapports et exports analytiques",endpoints:[{method:"GET",path:"/api/analytics/dashboard",summary:"Données du tableau de bord",auth:!0,permissions:["view_analytics"],response:{total_messages:15e3,total_delivered:14200,total_failed:800,delivery_rate:94.67,total_cost:3e5,active_campaigns:3,total_contacts:2500}},{method:"GET",path:"/api/analytics/chart",summary:"Données pour graphiques",auth:!0,permissions:["view_analytics"],parameters:[{name:"period",type:"string",description:"Période: 7d, 30d, 90d, 12m",example:"30d"},{name:"type",type:"string",description:"Type: messages, cost, delivery_rate",example:"messages"}],response:{labels:["01/01","02/01","03/01"],datasets:[{label:"Messages envoyés",data:[150,200,180]}]}},{method:"GET",path:"/api/analytics/report",summary:"Rapport analytique détaillé",auth:!0,permissions:["view_analytics"],parameters:[{name:"date_from",type:"string",description:"Date de début",example:"2026-01-01"},{name:"date_to",type:"string",description:"Date de fin",example:"2026-01-31"}],response:{period:{from:"2026-01-01",to:"2026-01-31"},summary:{total_sent:5e3,total_cost:1e5},by_operator:{airtel:{sent:3e3,cost:6e4},moov:{sent:2e3,cost:4e4}}}},{method:"GET",path:"/api/analytics/providers",summary:"Statistiques par opérateur",auth:!0,permissions:["view_analytics"],response:{providers:[{name:"airtel",sent:8e3,delivered:7600,failed:400,cost:16e4},{name:"moov",sent:7e3,delivered:6600,failed:400,cost:14e4}]}},{method:"GET",path:"/api/analytics/top-campaigns",summary:"Top campagnes par performance",auth:!0,permissions:["view_analytics"],response:{data:[{id:1,name:"Promo Noel",sent:2e3,delivery_rate:96.5,cost:4e4}]}},{method:"POST",path:"/api/analytics/update",summary:"Recalculer les analytics",auth:!0,permissions:["view_analytics"],response:{message:"Analytics mises à jour"}},{method:"GET",path:"/api/analytics/export/pdf",summary:"Exporter le rapport en PDF",auth:!0,permissions:["export_data"],parameters:[{name:"date_from",type:"string",description:"Date de début",example:"2026-01-01"},{name:"date_to",type:"string",description:"Date de fin",example:"2026-01-31"}],response:{_comment:"Téléchargement PDF"}},{method:"GET",path:"/api/analytics/export/excel",summary:"Exporter le rapport en Excel",auth:!0,permissions:["export_data"],response:{_comment:"Téléchargement XLSX"}},{method:"GET",path:"/api/analytics/export/csv",summary:"Exporter le rapport en CSV",auth:!0,permissions:["export_data"],response:{_comment:"Téléchargement CSV"}}]},{id:"sms-analytics",name:"SMS Analytics",description:"Comptabilité analytique SMS, périodes et clôtures mensuelles",endpoints:[{method:"GET",path:"/api/sms-analytics",summary:"Liste des analytics SMS",auth:!0,permissions:["view_analytics"],parameters:[{name:"date_from",type:"string",description:"Date de début",example:"2026-01-01"},{name:"date_to",type:"string",description:"Date de fin",example:"2026-01-31"}],response:{data:[{id:1,phone:"24177123456",provider:"airtel",cost:20,status:"delivered",created_at:"2026-01-15"}],meta:{total:500}}},{method:"GET",path:"/api/sms-analytics/overview",summary:"Vue d'ensemble analytique",auth:!0,permissions:["view_analytics"],response:{current_month:{sent:1200,cost:24e3,delivery_rate:95.2},previous_month:{sent:1e3,cost:2e4,delivery_rate:93.8},growth:{sent:20,cost:20}}},{method:"GET",path:"/api/sms-analytics/periods",summary:"Liste des périodes disponibles",auth:!0,permissions:["view_analytics"],response:{periods:[{key:"2026-01",label:"Janvier 2026",closed:!0},{key:"2026-02",label:"Février 2026",closed:!1}]}},{method:"GET",path:"/api/sms-analytics/closures",summary:"Liste des clôtures mensuelles",auth:!0,permissions:["view_analytics"],response:{data:[{period_key:"2026-01",total_sent:5e3,total_cost:1e5,closed_at:"2026-02-01T00:30:00Z"}]}},{method:"GET",path:"/api/sms-analytics/closures/{periodKey}",summary:"Détails d'une clôture",auth:!0,permissions:["view_analytics"],response:{period_key:"2026-01",total_sent:5e3,total_delivered:4750,total_failed:250,total_cost:1e5,by_operator:{airtel:3e3,moov:2e3},closed_at:"2026-02-01T00:30:00Z"}},{method:"POST",path:"/api/sms-analytics/report",summary:"Générer un rapport analytique",auth:!0,permissions:["view_analytics"],body:{period:"2026-01",format:"detailed"},response:{report:{period:"2026-01",summary:{total_sent:5e3,total_cost:1e5}}}},{method:"GET",path:"/api/sms-analytics/export",summary:"Exporter les analytics SMS",auth:!0,permissions:["export_data"],parameters:[{name:"period",type:"string",description:"Période (YYYY-MM)",example:"2026-01"},{name:"format",type:"string",description:"Format: csv, xlsx, pdf",example:"csv"}],response:{_comment:"Téléchargement du fichier"}}]},{id:"budget",name:"Budget",description:"Gestion des budgets et plafonds mensuels par sous-compte",endpoints:[{method:"GET",path:"/api/budgets/status/{subAccountId?}",summary:"Statut du budget",description:"Retourne le budget restant, utilisé et le plafond. Sans paramètre, retourne le budget du compte principal.",auth:!0,response:{sub_account_id:1,monthly_limit:5e5,used:125e3,remaining:375e3,percentage_used:25,alert_threshold:80}},{method:"GET",path:"/api/budgets/all",summary:"Budgets de tous les sous-comptes",auth:!0,response:{data:[{sub_account_id:1,name:"Équipe Marketing",monthly_limit:5e5,used:125e3}]}},{method:"PUT",path:"/api/budgets/{subAccountId}",summary:"Modifier le budget d'un sous-compte",auth:!0,body:{monthly_limit:75e4,alert_threshold:85},response:{message:"Budget mis à jour",monthly_limit:75e4}},{method:"POST",path:"/api/budgets/check-send",summary:"Vérifier si l'envoi est possible (budget)",auth:!0,body:{recipients_count:100,cost_per_sms:20},response:{can_send:!0,estimated_cost:2e3,remaining_budget:373e3}},{method:"GET",path:"/api/budgets/history/{subAccountId?}",summary:"Historique des consommations budget",auth:!0,parameters:[{name:"period",type:"string",description:"Période (YYYY-MM)",example:"2026-01"}],response:{data:[{date:"2026-01-15",amount:5e3,type:"sms_send",campaign:"Promo"}]}}]},{id:"blacklist",name:"Liste Noire",description:"Gestion des numéros bloqués, mots-clés STOP",endpoints:[{method:"GET",path:"/api/blacklist",summary:"Liste des numéros bloqués",auth:!0,parameters:[{name:"source",type:"string",description:"Filtrer par source: manual, auto_stop, import",example:"auto_stop"}],response:{data:[{id:1,phone:"+24177000000",source:"auto_stop",reason:"STOP reçu",created_at:"2026-01-15"}],meta:{total:25}}},{method:"POST",path:"/api/blacklist",summary:"Ajouter un numéro à la liste noire",auth:!0,body:{phone:"+24177000000",reason:"Demande du client"},response:{message:"Numéro ajouté à la liste noire"}},{method:"DELETE",path:"/api/blacklist/{id}",summary:"Retirer un numéro de la liste noire",auth:!0,response:{message:"Numéro retiré de la liste noire"}},{method:"POST",path:"/api/blacklist/check",summary:"Vérifier si un numéro est bloqué",auth:!0,body:{phone:"+24177000000"},response:{phone:"+24177000000",is_blacklisted:!0,source:"auto_stop"}},{method:"GET",path:"/api/blacklist/stats",summary:"Statistiques de la liste noire",auth:!0,response:{total:25,by_source:{manual:10,auto_stop:12,import:3}}},{method:"GET",path:"/api/blacklist/stop-keywords",summary:"Liste des mots-clés STOP détectés",auth:!0,response:{keywords:["STOP","ARRET","DESABONNER","UNSUBSCRIBE","CANCEL","QUIT","END","OPTOUT"]}}]},{id:"webhooks",name:"Webhooks",description:"Configuration des webhooks, événements, logs et tests",endpoints:[{method:"GET",path:"/api/webhooks",summary:"Liste des webhooks configurés",auth:!0,response:{data:[{id:1,url:"https://example.com/webhook",events:["message.sent","message.delivered"],active:!0}]}},{method:"POST",path:"/api/webhooks",summary:"Créer un webhook",auth:!0,body:{url:"https://example.com/webhook",events:["message.sent","message.delivered","message.failed"],secret:"my-webhook-secret"},response:{message:"Webhook créé",data:{id:2,url:"https://example.com/webhook"}}},{method:"GET",path:"/api/webhooks/{id}",summary:"Détails d'un webhook",auth:!0,response:{id:1,url:"https://example.com/webhook",events:["message.sent","message.delivered"],active:!0,secret:"********",created_at:"2026-01-01T00:00:00Z"}},{method:"PUT",path:"/api/webhooks/{id}",summary:"Modifier un webhook",auth:!0,body:{url:"https://example.com/new-webhook",events:["message.sent"]},response:{message:"Webhook mis à jour"}},{method:"DELETE",path:"/api/webhooks/{id}",summary:"Supprimer un webhook",auth:!0,response:{message:"Webhook supprimé"}},{method:"GET",path:"/api/webhooks/events",summary:"Liste des événements disponibles",auth:!0,response:{events:[{key:"message.sent",description:"Message envoyé"},{key:"message.delivered",description:"Message délivré"},{key:"message.failed",description:"Échec d'envoi"},{key:"message.received",description:"Réponse SMS reçue"},{key:"campaign.started",description:"Campagne démarrée"},{key:"campaign.completed",description:"Campagne terminée"},{key:"contact.unsubscribed",description:"Contact désabonné (STOP)"}]}},{method:"GET",path:"/api/webhooks/{id}/logs",summary:"Logs de livraison d'un webhook",auth:!0,response:{data:[{id:1,event:"message.sent",status_code:200,response_time:150,created_at:"2026-01-15T10:30:00Z"}]}},{method:"GET",path:"/api/webhooks/{id}/stats",summary:"Statistiques d'un webhook",auth:!0,response:{total_calls:500,successful:490,failed:10,average_response_time:120}},{method:"POST",path:"/api/webhooks/{id}/test",summary:"Tester un webhook",auth:!0,response:{success:!0,status_code:200,response_time:95}},{method:"POST",path:"/api/webhooks/{id}/toggle",summary:"Activer/désactiver un webhook",auth:!0,response:{message:"Webhook activé",active:!0}}]},{id:"api-keys",name:"Clés API",description:"Gestion des clés API pour les intégrations externes",endpoints:[{method:"GET",path:"/api/api-keys",summary:"Liste des clés API",auth:!0,response:{data:[{id:1,name:"App Mobile",key:"sk_live_****...",type:"production",status:"active",rate_limit:100,permissions:["send_sms","view_history"]}]}},{method:"POST",path:"/api/api-keys",summary:"Créer une clé API",auth:!0,body:{name:"Nouvelle App",type:"production",permissions:["send_sms","view_history"],rate_limit:100},response:{message:"Clé API créée",data:{id:2,name:"Nouvelle App",key:"swp_live_xxxxxxxxxxxxx"},full_key:"swp_live_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}},{method:"GET",path:"/api/api-keys/{id}",summary:"Détails d'une clé API",auth:!0,response:{id:1,name:"App Mobile",type:"production",status:"active",permissions:["send_sms"],rate_limit:100,last_used_at:"2026-01-15"}},{method:"PUT",path:"/api/api-keys/{id}",summary:"Modifier une clé API",auth:!0,body:{name:"App Mobile V2",permissions:["send_sms","view_history","manage_contacts"],rate_limit:200},response:{message:"Clé API mise à jour"}},{method:"DELETE",path:"/api/api-keys/{id}",summary:"Supprimer une clé API",auth:!0,response:{message:"Clé API supprimée"}},{method:"POST",path:"/api/api-keys/{id}/revoke",summary:"Révoquer une clé API",description:"Désactive définitivement la clé. Les applications l'utilisant perdent l'accès.",auth:!0,response:{message:"Clé API révoquée"}},{method:"POST",path:"/api/api-keys/{id}/regenerate",summary:"Régénérer une clé API",description:"Génère une nouvelle clé et invalide l'ancienne.",auth:!0,response:{message:"Clé régénérée",full_key:"sk_live_new_xxxxxxxxxxxxxxxxxxxxx"}}]},{id:"sub-accounts",name:"Sous-comptes",description:"Gestion des sous-comptes avec rôles, budgets et permissions",endpoints:[{method:"GET",path:"/api/sub-accounts",summary:"Liste des sous-comptes",auth:!0,response:{data:[{id:1,name:"Équipe Marketing",email:"marketing@company.com",role:"manager",status:"active",credits:5e4}]}},{method:"POST",path:"/api/sub-accounts",summary:"Créer un sous-compte",auth:!0,body:{name:"Équipe Ventes",email:"ventes@company.com",password:"password123",role:"sender",credits:1e5},response:{message:"Sous-compte créé",data:{id:2,name:"Équipe Ventes"}}},{method:"GET",path:"/api/sub-accounts/{id}",summary:"Détails d'un sous-compte",auth:!0,response:{id:1,name:"Équipe Marketing",email:"marketing@company.com",role:"manager",status:"active",credits:5e4,permissions:["send_sms","view_history"]}},{method:"PUT",path:"/api/sub-accounts/{id}",summary:"Modifier un sous-compte",auth:!0,body:{name:"Marketing Pro",role:"admin"},response:{message:"Sous-compte mis à jour"}},{method:"DELETE",path:"/api/sub-accounts/{id}",summary:"Supprimer un sous-compte",auth:!0,response:{message:"Sous-compte supprimé"}},{method:"POST",path:"/api/sub-accounts/login",summary:"Connexion sous-compte",auth:!1,body:{email:"marketing@company.com",password:"password123"},response:{access_token:"2|xyz...",token_type:"Bearer",sub_account:{id:1,name:"Équipe Marketing"}}},{method:"POST",path:"/api/sub-accounts/{id}/credits",summary:"Ajouter/retirer des crédits",auth:!0,body:{amount:5e4,type:"add",reason:"Recharge mensuelle"},response:{message:"Crédits mis à jour",new_balance:1e5}},{method:"POST",path:"/api/sub-accounts/{id}/permissions",summary:"Modifier les permissions",auth:!0,body:{permissions:["send_sms","view_history","manage_contacts","view_analytics"]},response:{message:"Permissions mises à jour"}},{method:"POST",path:"/api/sub-accounts/{id}/suspend",summary:"Suspendre un sous-compte",auth:!0,response:{message:"Sous-compte suspendu"}},{method:"POST",path:"/api/sub-accounts/{id}/activate",summary:"Réactiver un sous-compte",auth:!0,response:{message:"Sous-compte réactivé"}}]},{id:"sms-config",name:"Configuration SMS",description:"Configuration des opérateurs SMS (Airtel, Moov) et providers",superAdminOnly:!0,endpoints:[{method:"GET",path:"/api/sms-configs",summary:"Liste des configurations SMS",auth:!0,response:{data:[{provider:"airtel",enabled:!0,cost_per_sms:20,last_tested:"2026-01-15"},{provider:"moov",enabled:!1,cost_per_sms:20,last_tested:null}]}},{method:"GET",path:"/api/sms-configs/{provider}",summary:"Configuration d'un opérateur",auth:!0,response:{provider:"airtel",enabled:!0,api_url:"https://messaging.airtel.ga:9002/...",cost_per_sms:20,sender_id:"SENDWAVE"}},{method:"PUT",path:"/api/sms-configs/{provider}",summary:"Modifier la configuration d'un opérateur",auth:!0,body:{api_url:"https://new-url.com/api",username:"user",password:"pass",cost_per_sms:25},response:{message:"Configuration mise à jour"}},{method:"POST",path:"/api/sms-configs/{provider}/test",summary:"Tester la connexion opérateur",auth:!0,response:{success:!0,message:"Connexion réussie",response_time:250}},{method:"POST",path:"/api/sms-configs/{provider}/toggle",summary:"Activer/désactiver un opérateur",auth:!0,response:{message:"Opérateur activé",enabled:!0}},{method:"POST",path:"/api/sms-configs/{provider}/reset",summary:"Réinitialiser la configuration",auth:!0,response:{message:"Configuration réinitialisée aux valeurs par défaut"}},{method:"GET",path:"/api/sms-providers",summary:"Liste des providers SMS disponibles",auth:!0,response:{data:[{code:"airtel",name:"Airtel Gabon",type:"http",prefixes:["74","76","77"]},{code:"moov",name:"Moov Gabon",type:"smpp",prefixes:["60","62","65","66"]}]}},{method:"POST",path:"/api/sms-providers",summary:"Ajouter un provider SMS",auth:!0,body:{code:"orange",name:"Orange",type:"http",prefixes:["07"]},response:{message:"Provider créé"}},{method:"GET",path:"/api/sms-providers/{code}",summary:"Détails d'un provider",auth:!0,response:{code:"airtel",name:"Airtel Gabon",type:"http",prefixes:["74","76","77"],enabled:!0}},{method:"POST",path:"/api/sms-providers/{code}/test",summary:"Tester un provider",auth:!0,response:{success:!0,message:"Test réussi"}}]},{id:"phone",name:"Normalisation Téléphone",description:"Normalisation E.164, détection pays et opérateur",endpoints:[{method:"GET",path:"/api/phone/countries",summary:"Liste des pays supportés",auth:!1,response:{countries:[{code:"GA",name:"Gabon",prefix:"241",local_length:8},{code:"CM",name:"Cameroun",prefix:"237",local_length:9},{code:"CG",name:"Congo",prefix:"242",local_length:9},{code:"CI",name:"Côte d'Ivoire",prefix:"225",local_length:10},{code:"SN",name:"Sénégal",prefix:"221",local_length:9}]}},{method:"POST",path:"/api/phone/normalize",summary:"Normaliser un numéro de téléphone",auth:!0,body:{phone:"77123456",country:"GA"},response:{original:"77123456",normalized:"+24177123456",country:"GA",operator:"airtel",valid:!0}},{method:"POST",path:"/api/phone/normalize-many",summary:"Normaliser plusieurs numéros",auth:!0,body:{phones:["77123456","62987654","+237650123456"]},response:{results:[{original:"77123456",normalized:"+24177123456",country:"GA",operator:"airtel",valid:!0},{original:"62987654",normalized:"+24162987654",country:"GA",operator:"moov",valid:!0},{original:"+237650123456",normalized:"+237650123456",country:"CM",operator:"unknown",valid:!0}],summary:{total:3,valid:3,invalid:0}}}]},{id:"incoming-sms",name:"SMS Entrants",description:"Réception de SMS entrants et webhooks opérateurs",endpoints:[{method:"POST",path:"/api/webhooks/incoming/sms",summary:"Webhook SMS entrant (générique)",auth:!1,description:"Endpoint public pour recevoir les SMS entrants. Détecte automatiquement les mots-clés STOP.",body:{from:"+24177123456",to:"SENDWAVE",message:"STOP",timestamp:"2026-01-15T10:30:00Z"},response:{status:"received",action:"blacklisted"}},{method:"POST",path:"/api/webhooks/incoming/airtel",summary:"Webhook SMS entrant Airtel",auth:!1,description:"Endpoint spécifique pour le format de notification Airtel.",body:{sender:"24177123456",receiver:"SENDWAVE",text:"Hello",messageId:"AIR123456"},response:{status:"received"}},{method:"POST",path:"/api/webhooks/incoming/moov",summary:"Webhook SMS entrant Moov",auth:!1,description:"Endpoint spécifique pour le format de notification Moov (SMPP DLR).",body:{source_addr:"24162987654",dest_addr:"SENDWAVE",short_message:"Hello",message_id:"MOOV789"},response:{status:"received"}}]},{id:"audit-logs",name:"Journal d'Audit",description:"Traçabilité des actions utilisateurs et système",superAdminOnly:!0,endpoints:[{method:"GET",path:"/api/audit-logs",summary:"Liste des logs d'audit",auth:!0,parameters:[{name:"action",type:"string",description:"Filtrer par action",example:"sms.sent"},{name:"user_id",type:"integer",description:"Filtrer par utilisateur"},{name:"date_from",type:"string",description:"Date de début",example:"2026-01-01"},{name:"date_to",type:"string",description:"Date de fin",example:"2026-01-31"}],response:{data:[{id:1,action:"sms.sent",user:"Admin",details:"500 SMS envoyés",ip:"192.168.1.1",created_at:"2026-01-15T10:30:00Z"}],meta:{total:200}}},{method:"GET",path:"/api/audit-logs/actions",summary:"Liste des types d'actions",auth:!0,response:{actions:["sms.sent","campaign.created","contact.imported","api_key.created","user.login"]}},{method:"GET",path:"/api/audit-logs/{id}",summary:"Détail d'un log d'audit",auth:!0,response:{id:1,action:"sms.sent",user:{id:1,name:"Admin"},details:{recipients:500,cost:1e4,campaign_id:5},ip:"192.168.1.1",user_agent:"Mozilla/5.0...",created_at:"2026-01-15T10:30:00Z"}}]},{id:"accounts",name:"Comptes",description:"Gestion des comptes clients (SuperAdmin uniquement)",superAdminOnly:!0,endpoints:[{method:"GET",path:"/api/accounts",summary:"Liste des comptes",auth:!0,permissions:["superadmin"],response:{data:[{id:1,name:"Entreprise A",email:"admin@entreprise-a.com",status:"active",credits:5e5}]}},{method:"POST",path:"/api/accounts",summary:"Créer un compte",auth:!0,permissions:["superadmin"],body:{name:"Nouvelle Entreprise",email:"admin@nouvelle.com",password:"password123",credits:1e5},response:{message:"Compte créé",data:{id:2,name:"Nouvelle Entreprise"}}},{method:"GET",path:"/api/accounts/{id}",summary:"Détails d'un compte",auth:!0,permissions:["superadmin"],response:{id:1,name:"Entreprise A",email:"admin@entreprise-a.com",status:"active",credits:5e5}},{method:"PUT",path:"/api/accounts/{id}",summary:"Modifier un compte",auth:!0,permissions:["superadmin"],body:{name:"Entreprise A Pro"},response:{message:"Compte mis à jour"}},{method:"DELETE",path:"/api/accounts/{id}",summary:"Supprimer un compte",auth:!0,permissions:["superadmin"],response:{message:"Compte supprimé"}},{method:"POST",path:"/api/accounts/{id}/credits",summary:"Ajouter des crédits",auth:!0,permissions:["superadmin"],body:{amount:1e5,reason:"Achat crédits"},response:{message:"Crédits ajoutés",new_balance:6e5}},{method:"POST",path:"/api/accounts/{id}/suspend",summary:"Suspendre un compte",auth:!0,permissions:["superadmin"],response:{message:"Compte suspendu"}},{method:"POST",path:"/api/accounts/{id}/activate",summary:"Réactiver un compte",auth:!0,permissions:["superadmin"],response:{message:"Compte réactivé"}},{method:"GET",path:"/api/accounts/{id}/stats",summary:"Statistiques d'un compte",auth:!0,permissions:["superadmin"],response:{total_sent:15e3,total_cost:3e5,users_count:5,active_campaigns:2}},{method:"GET",path:"/api/accounts/{id}/users",summary:"Utilisateurs d'un compte",auth:!0,permissions:["superadmin"],response:{data:[{id:1,name:"Admin",email:"admin@company.com",role:"admin"}]}}]},{id:"users",name:"Utilisateurs",description:"Gestion des utilisateurs d'un compte, rôles et permissions",endpoints:[{method:"GET",path:"/api/users",summary:"Liste des utilisateurs",auth:!0,permissions:["manage_sub_accounts"],response:{data:[{id:1,name:"John Doe",email:"john@company.com",role:"manager",status:"active"}]}},{method:"POST",path:"/api/users",summary:"Créer un utilisateur",auth:!0,permissions:["manage_sub_accounts"],body:{name:"Jane Doe",email:"jane@company.com",password:"password123",role:"sender"},response:{message:"Utilisateur créé",data:{id:2,name:"Jane Doe"}}},{method:"GET",path:"/api/users/{id}",summary:"Détails d'un utilisateur",auth:!0,permissions:["manage_sub_accounts"],response:{id:1,name:"John Doe",email:"john@company.com",role:"manager",permissions:["send_sms","view_history"]}},{method:"PUT",path:"/api/users/{id}",summary:"Modifier un utilisateur",auth:!0,permissions:["manage_sub_accounts"],body:{name:"John Updated",role:"admin"},response:{message:"Utilisateur mis à jour"}},{method:"DELETE",path:"/api/users/{id}",summary:"Supprimer un utilisateur",auth:!0,permissions:["manage_sub_accounts"],response:{message:"Utilisateur supprimé"}},{method:"POST",path:"/api/users/{id}/suspend",summary:"Suspendre un utilisateur",auth:!0,permissions:["manage_sub_accounts"],response:{message:"Utilisateur suspendu"}},{method:"POST",path:"/api/users/{id}/activate",summary:"Réactiver un utilisateur",auth:!0,permissions:["manage_sub_accounts"],response:{message:"Utilisateur réactivé"}},{method:"PUT",path:"/api/users/{id}/permissions",summary:"Modifier les permissions d'un utilisateur",auth:!0,permissions:["manage_sub_accounts"],body:{permissions:["send_sms","view_history","manage_contacts"]},response:{message:"Permissions mises à jour"}},{method:"GET",path:"/api/users/available-roles",summary:"Liste des rôles disponibles",auth:!0,permissions:["manage_sub_accounts"],response:{roles:["admin","manager","sender","viewer"]}},{method:"GET",path:"/api/users/available-permissions",summary:"Permissions attribuables",auth:!0,permissions:["manage_sub_accounts"],response:{permissions:[{key:"send_sms",label:"Envoyer des SMS"},{key:"view_history",label:"Voir l'historique"},{key:"manage_contacts",label:"Gérer les contacts"}]}}]},{id:"custom-roles",name:"Rôles Personnalisés",description:"Création et gestion de rôles personnalisés (SuperAdmin)",superAdminOnly:!0,endpoints:[{method:"GET",path:"/api/custom-roles",summary:"Liste des rôles personnalisés",auth:!0,permissions:["superadmin"],response:{data:[{id:1,name:"Superviseur",permissions:["send_sms","view_history","view_analytics"],users_count:3}]}},{method:"POST",path:"/api/custom-roles",summary:"Créer un rôle personnalisé",auth:!0,permissions:["superadmin"],body:{name:"Opérateur",description:"Peut envoyer des SMS et voir les stats",permissions:["send_sms","view_history","view_analytics"]},response:{message:"Rôle créé",data:{id:2,name:"Opérateur"}}},{method:"GET",path:"/api/custom-roles/{id}",summary:"Détails d'un rôle",auth:!0,permissions:["superadmin"],response:{id:1,name:"Superviseur",description:"Supervision des envois",permissions:["send_sms","view_history"]}},{method:"PUT",path:"/api/custom-roles/{id}",summary:"Modifier un rôle",auth:!0,permissions:["superadmin"],body:{name:"Superviseur Pro",permissions:["send_sms","view_history","view_analytics","manage_contacts"]},response:{message:"Rôle mis à jour"}},{method:"DELETE",path:"/api/custom-roles/{id}",summary:"Supprimer un rôle",auth:!0,permissions:["superadmin"],response:{message:"Rôle supprimé"}},{method:"POST",path:"/api/custom-roles/{id}/duplicate",summary:"Dupliquer un rôle",auth:!0,permissions:["superadmin"],response:{message:"Rôle dupliqué",data:{id:3,name:"Superviseur (copie)"}}},{method:"GET",path:"/api/custom-roles/permissions",summary:"Permissions attribuables aux rôles",auth:!0,permissions:["superadmin"],response:{permissions:[{key:"send_sms",label:"Envoyer des SMS",group:"Messages"},{key:"view_history",label:"Voir l'historique",group:"Messages"},{key:"manage_contacts",label:"Gérer les contacts",group:"Contacts"}]}}]},{id:"system",name:"Système",description:"Endpoints systèmes en lecture seule",superAdminOnly:!0,endpoints:[{method:"GET",path:"/api/system-roles",summary:"Rôles système prédéfinis",auth:!0,response:{roles:[{key:"admin",label:"Administrateur",description:"Accès complet"},{key:"manager",label:"Manager",description:"Gestion des envois et contacts"},{key:"sender",label:"Envoyeur",description:"Envoi de SMS uniquement"},{key:"viewer",label:"Lecteur",description:"Lecture seule"}]}},{method:"GET",path:"/api/system-permissions",summary:"Permissions système",auth:!0,response:{permissions:["send_sms","view_history","manage_contacts","manage_groups","create_campaigns","view_analytics","manage_templates","export_data"]}}]}];function Ce(r){return{GET:"bg-blue-600 text-white",POST:"bg-green-600 text-white",PUT:"bg-orange-500 text-white",DELETE:"bg-red-600 text-white"}[r]||"bg-gray-600 text-white"}const Ae={class:"border rounded-lg overflow-hidden"},Ge={class:"text-sm font-mono flex-1 truncate"},Oe={class:"text-xs text-muted-foreground hidden sm:block max-w-[200px] truncate"},Me={key:0,class:"border-t bg-muted/20 p-4 space-y-4"},De={class:"font-medium text-sm"},Le={key:0,class:"text-sm text-muted-foreground mt-1"},$e={class:"flex flex-wrap gap-2"},qe={key:0,class:"inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},Ie={key:1,class:"inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"},Ve={key:0},je={class:"rounded border overflow-hidden"},Ue={class:"w-full text-sm"},Ne={class:"divide-y"},Re={class:"px-3 py-1.5 font-mono text-xs"},Be={class:"px-3 py-1.5 text-xs text-muted-foreground"},ze={class:"px-3 py-1.5 text-xs text-muted-foreground hidden sm:table-cell"},Je={key:0,class:"ml-1 text-xs bg-muted px-1 rounded"},Fe={key:1},He={class:"relative"},We={class:"p-3 bg-muted rounded-lg text-xs font-mono overflow-x-auto max-h-[300px]"},Ye={key:2},Xe={class:"relative"},Ze={class:"p-3 bg-muted rounded-lg text-xs font-mono overflow-x-auto max-h-[300px] text-green-700 dark:text-green-400"},Qe={key:3},Ke={class:"relative"},es={class:"p-3 bg-gray-900 text-gray-100 rounded-lg text-xs font-mono overflow-x-auto"},ss=H({__name:"ApiEndpoint",props:{endpoint:{},baseUrl:{}},setup(r){const n=r,x=_(!1),E=O(()=>Ce(n.endpoint.method)),b=O(()=>{if(n.endpoint.curl)return n.endpoint.curl.replace("{baseUrl}",n.baseUrl);const h=`${n.baseUrl}${n.endpoint.path}`;let i=`curl -X ${n.endpoint.method} ${h}`;if(n.endpoint.auth&&(i+=` \\
  -H 'Authorization: Bearer YOUR_TOKEN'`),n.endpoint.body){const S={...n.endpoint.body};delete S._comment,Object.keys(S).length>0&&(i+=` \\
  -H 'Content-Type: application/json'`,i+=` \\
  -d '${JSON.stringify(S)}'`)}return i});function c(h){return JSON.stringify(h,null,2)}function f(h){navigator.clipboard.writeText(h)}return(h,i)=>{var S;return a(),o("div",Ae,[e("button",{onClick:i[0]||(i[0]=y=>x.value=!x.value),class:"w-full flex items-center gap-3 p-3 hover:bg-muted/50 transition-colors text-left"},[e("span",{class:N(["px-2 py-0.5 text-xs font-semibold rounded min-w-[52px] text-center",E.value])},m(r.endpoint.method),3),e("code",Ge,m(r.endpoint.path),1),e("span",Oe,m(r.endpoint.summary),1),g(v(re),{class:N(["w-4 h-4 text-muted-foreground transition-transform shrink-0",{"rotate-180":x.value}])},null,8,["class"])]),x.value?(a(),o("div",Me,[e("div",null,[e("h4",De,m(r.endpoint.summary),1),r.endpoint.description?(a(),o("p",Le,m(r.endpoint.description),1)):l("",!0)]),e("div",$e,[r.endpoint.auth?(a(),o("span",qe,[g(v(Ee),{class:"w-3 h-3"}),i[4]||(i[4]=C(" Authentification requise ",-1))])):(a(),o("span",Ie,[g(v(Pe),{class:"w-3 h-3"}),i[5]||(i[5]=C(" Public ",-1))])),(a(!0),o(k,null,T(r.endpoint.permissions,y=>(a(),o("span",{key:y,class:"px-2 py-0.5 text-xs rounded-full bg-primary/10 text-primary"},m(y),1))),128))]),(S=r.endpoint.parameters)!=null&&S.length?(a(),o("div",Ve,[i[7]||(i[7]=e("h5",{class:"text-xs font-semibold uppercase text-muted-foreground mb-2"},"Paramètres",-1)),e("div",je,[e("table",Ue,[i[6]||(i[6]=e("thead",{class:"bg-muted/50"},[e("tr",null,[e("th",{class:"text-left px-3 py-1.5 text-xs font-medium text-muted-foreground"},"Nom"),e("th",{class:"text-left px-3 py-1.5 text-xs font-medium text-muted-foreground"},"Type"),e("th",{class:"text-left px-3 py-1.5 text-xs font-medium text-muted-foreground hidden sm:table-cell"},"Description")])],-1)),e("tbody",Ne,[(a(!0),o(k,null,T(r.endpoint.parameters,y=>(a(),o("tr",{key:y.name},[e("td",Re,m(y.name),1),e("td",Be,m(y.type),1),e("td",ze,[C(m(y.description)+" ",1),y.example?(a(),o("code",Je,m(y.example),1)):l("",!0)])]))),128))])])])])):l("",!0),r.endpoint.body?(a(),o("div",Fe,[i[8]||(i[8]=e("h5",{class:"text-xs font-semibold uppercase text-muted-foreground mb-2"},"Corps de la requête",-1)),e("div",He,[e("pre",We,m(c(r.endpoint.body)),1),e("button",{onClick:i[1]||(i[1]=y=>f(c(r.endpoint.body))),class:"absolute top-2 right-2 p-1 rounded hover:bg-background/80 text-muted-foreground hover:text-foreground",title:"Copier"},[g(v(U),{class:"w-3.5 h-3.5"})])])])):l("",!0),r.endpoint.response?(a(),o("div",Ye,[i[9]||(i[9]=e("h5",{class:"text-xs font-semibold uppercase text-muted-foreground mb-2"},"Réponse",-1)),e("div",Xe,[e("pre",Ze,m(c(r.endpoint.response)),1),e("button",{onClick:i[2]||(i[2]=y=>f(c(r.endpoint.response))),class:"absolute top-2 right-2 p-1 rounded hover:bg-background/80 text-muted-foreground hover:text-foreground",title:"Copier"},[g(v(U),{class:"w-3.5 h-3.5"})])])])):l("",!0),b.value?(a(),o("div",Qe,[i[10]||(i[10]=e("h5",{class:"text-xs font-semibold uppercase text-muted-foreground mb-2"},"Exemple cURL",-1)),e("div",Ke,[e("pre",es,m(b.value),1),e("button",{onClick:i[3]||(i[3]=y=>f(b.value)),class:"absolute top-2 right-2 p-1 rounded hover:bg-gray-700 text-gray-400 hover:text-gray-200",title:"Copier"},[g(v(U),{class:"w-3.5 h-3.5"})])])])):l("",!0)])):l("",!0)])}}}),ts={class:"rounded-lg border bg-card"},as={class:"flex items-center gap-3"},os={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10 text-primary"},rs={class:"text-sm font-bold"},ns={class:"font-semibold text-sm"},is={class:"text-xs text-muted-foreground"},ms={key:0,class:"border-t p-4 space-y-2"},ds={key:0,class:"text-sm text-muted-foreground text-center py-4"},us=H({__name:"ApiCategorySection",props:{category:{},baseUrl:{},searchQuery:{},methodFilter:{},defaultOpen:{type:Boolean}},setup(r){const n=r,x=_(n.defaultOpen??!1),E=O(()=>{let b=n.category.endpoints;if(n.methodFilter&&(b=b.filter(c=>c.method===n.methodFilter)),n.searchQuery){const c=n.searchQuery.toLowerCase();b=b.filter(f=>{var h;return f.path.toLowerCase().includes(c)||f.summary.toLowerCase().includes(c)||((h=f.description)==null?void 0:h.toLowerCase().includes(c))})}return b});return(b,c)=>(a(),o("div",ts,[e("button",{onClick:c[0]||(c[0]=f=>x.value=!x.value),class:"w-full flex items-center justify-between p-4 hover:bg-muted/30 transition-colors text-left"},[e("div",as,[e("div",os,[e("span",rs,m(r.category.endpoints.length),1)]),e("div",null,[e("h3",ns,m(r.category.name),1),e("p",is,m(r.category.description),1)])]),g(v(re),{class:N(["w-5 h-5 text-muted-foreground transition-transform shrink-0",{"rotate-180":x.value}])},null,8,["class"])]),x.value?(a(),o("div",ms,[(a(!0),o(k,null,T(E.value,(f,h)=>(a(),F(ss,{key:h,endpoint:f,"base-url":r.baseUrl},null,8,["endpoint","base-url"]))),128)),E.value.length===0?(a(),o("p",ds," Aucun endpoint ne correspond aux filtres. ")):l("",!0)])):l("",!0)]))}}),j={async getAll(){const r=await A.get("/api-keys");return r.data.data||r.data},async getById(r){const n=await A.get(`/api-keys/${r}`);return n.data.data||n.data},async create(r){const n=await A.post("/api-keys",r);return n.data.data||n.data},async update(r,n){const x=await A.put(`/api-keys/${r}`,n);return x.data.data||x.data},async revoke(r){const n=await A.post(`/api-keys/${r}/revoke`);return n.data.data||n.data},async regenerate(r){const n=await A.post(`/api-keys/${r}/regenerate`);return n.data.data||n.data},async delete(r){await A.delete(`/api-keys/${r}`)}},ps={class:"p-4 sm:p-6 lg:p-8"},ls={class:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4"},cs={key:0,class:"space-y-6"},hs={class:"rounded-lg border bg-card"},gs={key:0,class:"p-8 flex items-center justify-center"},ys={key:1,class:"p-8 text-center text-muted-foreground"},vs={key:2,class:"divide-y"},xs={class:"flex items-start justify-between"},_s={class:"flex-1"},bs={class:"flex items-center gap-2"},fs={class:"font-medium"},ws={key:0,class:"px-2 py-0.5 text-xs rounded-full bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"},ks={class:"mt-1 flex items-center gap-2"},Ts={class:"text-sm font-mono bg-muted px-2 py-1 rounded"},Ss=["onClick"],Es={class:"mt-2 flex items-center gap-4 text-xs text-muted-foreground flex-wrap"},Ps={key:0,class:"inline-flex items-center gap-1"},Cs={key:1},As={class:"mt-2 flex flex-wrap gap-1"},Gs={key:0,class:"mt-2 flex flex-wrap gap-1"},Os={class:"flex gap-2"},Ms=["onClick","disabled"],Ds=["onClick","disabled"],Ls={key:1,class:"space-y-6"},$s={class:"flex flex-col sm:flex-row gap-3"},qs={class:"relative flex-1"},Is={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Vs={class:"rounded-lg border bg-card p-4"},js={class:"text-2xl font-bold text-primary"},Us={class:"rounded-lg border bg-card p-4"},Ns={class:"text-xs font-mono text-muted-foreground"},Rs={class:"space-y-3"},Bs={key:0,class:"text-center py-12 text-muted-foreground"},zs={class:"bg-background rounded-lg shadow-lg w-full max-w-md p-6"},Js={class:"flex items-center justify-between mb-6"},Fs={class:"space-y-2"},Hs={class:"space-y-2"},Ws=["value"],Ys={key:0,class:"text-xs text-destructive"},Xs={class:"space-y-2"},Zs={class:"space-y-2"},Qs={class:"space-y-2"},Ks=["value"],et={class:"text-sm"},st={class:"space-y-2"},tt={class:"space-y-2"},at={class:"flex gap-2"},ot=["onKeydown"],rt={key:0,class:"flex flex-wrap gap-1 mt-1"},nt=["onClick"],it={class:"flex gap-3 pt-4 border-t"},mt=["disabled"],dt={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ut={class:"bg-background rounded-lg shadow-lg w-full max-w-md p-6"},pt={class:"text-center mb-6"},lt={class:"w-16 h-16 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center mx-auto mb-4"},ct={class:"p-4 bg-muted rounded-lg mb-6"},ht={class:"text-sm font-mono break-all"},gt={class:"flex gap-3"},Et=H({__name:"ApiIntegrations",setup(r){const n=le(),x=O(()=>window.location.origin),E=O(()=>n.isSuperAdmin?oe:oe.filter(u=>!u.superAdminOnly)),b=O(()=>E.value.reduce((u,s)=>u+s.endpoints.length,0)),c=_("keys"),f=[{id:"keys",label:"Mes Clés",icon:te},{id:"docs",label:"Documentation API",icon:Se}],h=_(""),i=_(""),S=O(()=>!h.value&&!i.value?E.value:E.value.filter(u=>{const s=h.value.toLowerCase(),t=i.value;return u.endpoints.some(p=>{var Q;const w=!t||p.method===t,pe=!s||p.path.toLowerCase().includes(s)||p.summary.toLowerCase().includes(s)||((Q=p.description)==null?void 0:Q.toLowerCase().includes(s))||u.name.toLowerCase().includes(s);return w&&pe})})),y=_([]),R=_([]),B=_(!1),L=_(!1),M=_(!1),$=_(!1),q=_(""),D=_(""),W={send_sms:"Envoyer des SMS",view_history:"Voir l'historique",manage_contacts:"Gérer les contacts",view_balance:"Voir le solde"},d=ce({name:"",sub_account_id:"",type:"production",permissions:["send_sms","view_history"],rate_limit:100,allowed_ips:[]});async function I(){B.value=!0;try{const[u,s]=await Promise.all([j.getAll(),fe.getAll()]);y.value=u,R.value=s}catch(u){console.error("Error loading API keys:",u)}finally{B.value=!1}}function ne(){d.name="",d.sub_account_id="",d.type="production",d.permissions=["send_sms","view_history"],d.rate_limit=100,d.allowed_ips=[],D.value="",M.value=!0}function Y(){const u=D.value.trim();if(!u)return;if(!/^(\d{1,3}\.){3}\d{1,3}$/.test(u)){G("Format IP invalide (ex: 192.168.1.1)");return}if(d.allowed_ips.includes(u)){G("Cette IP est déjà dans la liste");return}d.allowed_ips.push(u),D.value=""}function ie(u){d.allowed_ips.splice(u,1)}async function me(){var u,s;if(!d.name){G("Veuillez entrer un nom pour la clé");return}if(!d.sub_account_id){G("Veuillez sélectionner un sous-compte");return}L.value=!0;try{const t={name:d.name,sub_account_id:d.sub_account_id,type:d.type,permissions:d.permissions,rate_limit:d.rate_limit,allowed_ips:d.allowed_ips.length>0?d.allowed_ips:void 0},p=await j.create(t);M.value=!1,q.value=p.full_key||p.key,$.value=!0,await I()}catch(t){G(((s=(u=t.response)==null?void 0:u.data)==null?void 0:s.message)||"Erreur lors de la création")}finally{L.value=!1}}async function de(u){var t,p;if(await ee("Révoquer la clé API ?","Cette action est irréversible. Les applications utilisant cette clé ne pourront plus accéder à l'API."))try{await j.revoke(u),se("Clé API révoquée"),await I()}catch(w){G(((p=(t=w.response)==null?void 0:t.data)==null?void 0:p.message)||"Erreur lors de la révocation")}}async function ue(u){var t,p;if(await ee("Régénérer la clé API ?","L'ancienne clé sera invalidée et remplacée par une nouvelle."))try{const w=await j.regenerate(u);q.value=w.full_key||w.key,$.value=!0,await I()}catch(w){G(((p=(t=w.response)==null?void 0:t.data)==null?void 0:p.message)||"Erreur lors de la régénération")}}function X(u){navigator.clipboard.writeText(u),se("Clé copiée dans le presse-papier")}function Z(u){return new Date(u).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}return he(()=>{I()}),(u,s)=>(a(),F(xe,null,{default:ge(()=>[e("div",ps,[e("div",ls,[s[15]||(s[15]=e("div",null,[e("h1",{class:"text-xl sm:text-3xl font-bold"},"Clés API"),e("p",{class:"text-sm text-muted-foreground mt-1 sm:mt-2"},"Gérez vos clés API et consultez la documentation complète")],-1)),c.value==="keys"?(a(),o("button",{key:0,onClick:ne,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 sm:h-10 px-3 sm:px-4 py-2"},[g(v(_e),{class:"w-4 h-4"}),s[13]||(s[13]=e("span",{class:"hidden sm:inline"},"Nouvelle clé API",-1)),s[14]||(s[14]=e("span",{class:"sm:hidden"},"Nouvelle clé",-1))])):l("",!0)]),g(be,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),tabs:f,class:"mb-6"},null,8,["modelValue"]),c.value==="keys"?(a(),o("div",cs,[e("div",hs,[s[20]||(s[20]=e("div",{class:"p-6 border-b"},[e("h3",{class:"font-semibold"},"Clés API actives"),e("p",{class:"text-sm text-muted-foreground"},"Les clés permettent aux applications externes d'accéder à l'API SendWave")],-1)),B.value?(a(),o("div",gs,[...s[16]||(s[16]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)])])):y.value.length===0?(a(),o("div",ys,[g(v(te),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),s[17]||(s[17]=e("p",null,"Aucune clé API créée",-1)),s[18]||(s[18]=e("p",{class:"text-sm"},"Créez une clé pour commencer à utiliser l'API",-1))])):(a(),o("div",vs,[(a(!0),o(k,null,T(y.value,t=>(a(),o("div",{key:t.id,class:"p-4 hover:bg-muted/50"},[e("div",xs,[e("div",_s,[e("div",bs,[e("span",fs,m(t.name),1),e("span",{class:N(["px-2 py-0.5 text-xs rounded-full",t.type==="production"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"])},m(t.type==="production"?"Production":"Test"),3),t.status==="revoked"?(a(),o("span",ws," Révoquée ")):l("",!0)]),e("div",ks,[e("code",Ts,m(t.key),1),t.full_key?(a(),o("button",{key:0,onClick:p=>X(t.full_key),class:"text-xs text-primary hover:underline"}," Copier ",8,Ss)):l("",!0)]),e("div",Es,[t.sub_account_name?(a(),o("span",Ps,[g(v(we),{class:"w-3 h-3"}),C(" "+m(t.sub_account_name),1)])):l("",!0),e("span",null,"Créée le "+m(Z(t.created_at)),1),t.last_used_at?(a(),o("span",Cs,"Dernière utilisation: "+m(Z(t.last_used_at)),1)):l("",!0),e("span",null,"Limite: "+m(t.rate_limit)+" req/min",1)]),e("div",As,[(a(!0),o(k,null,T(t.permissions,p=>(a(),o("span",{key:p,class:"px-2 py-0.5 text-xs rounded bg-primary/10 text-primary"},m(W[p]||p),1))),128))]),t.allowed_ips&&t.allowed_ips.length>0?(a(),o("div",Gs,[s[19]||(s[19]=e("span",{class:"text-xs text-muted-foreground mr-1"},"IPs:",-1)),(a(!0),o(k,null,T(t.allowed_ips,p=>(a(),o("span",{key:p,class:"px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300 font-mono"},m(p),1))),128))])):l("",!0)]),e("div",Os,[e("button",{onClick:p=>ue(t.id),disabled:t.status==="revoked",class:"text-sm px-3 py-1 rounded border hover:bg-accent disabled:opacity-50",title:"Régénérer"},[g(v(ke),{class:"w-4 h-4"})],8,Ms),e("button",{onClick:p=>de(t.id),disabled:t.status==="revoked",class:"text-sm px-3 py-1 rounded border hover:bg-destructive/10 text-destructive disabled:opacity-50",title:"Révoquer"},[g(v(K),{class:"w-4 h-4"})],8,Ds)])])]))),128))]))])])):l("",!0),c.value==="docs"?(a(),o("div",Ls,[e("div",$s,[e("div",qs,[g(v(ae),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),P(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>h.value=t),type:"text",placeholder:"Rechercher un endpoint (ex: /messages/send, contacts, webhook...)",class:"flex h-10 w-full rounded-md border border-input bg-background pl-9 pr-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"},null,512),[[V,h.value]])]),P(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),class:"flex h-10 rounded-md border border-input bg-background px-3 py-2 text-sm min-w-[140px]"},[...s[21]||(s[21]=[e("option",{value:""},"Toutes les méthodes",-1),e("option",{value:"GET"},"GET",-1),e("option",{value:"POST"},"POST",-1),e("option",{value:"PUT"},"PUT",-1),e("option",{value:"DELETE"},"DELETE",-1)])],512),[[z,i.value]])]),e("div",Is,[e("div",Vs,[e("div",js,m(b.value),1),s[22]||(s[22]=e("div",{class:"text-sm text-muted-foreground"},"Endpoints API",-1))]),e("div",Us,[s[23]||(s[23]=e("div",{class:"text-sm font-medium mb-1"},"URL de base",-1)),e("code",Ns,m(x.value)+"/api",1)]),s[24]||(s[24]=e("div",{class:"rounded-lg border bg-card p-4"},[e("div",{class:"text-sm font-medium mb-1"},"Authentification"),e("code",{class:"text-xs font-mono text-muted-foreground"},"Authorization: Bearer {token}")],-1))]),e("div",Rs,[(a(!0),o(k,null,T(S.value,t=>(a(),F(us,{key:t.id,category:t,"base-url":x.value,"search-query":h.value,"method-filter":i.value,"default-open":!!h.value||!!i.value},null,8,["category","base-url","search-query","method-filter","default-open"]))),128))]),S.value.length===0?(a(),o("div",Bs,[g(v(ae),{class:"w-10 h-10 mx-auto mb-3 opacity-50"}),e("p",null,'Aucun endpoint trouvé pour "'+m(h.value)+'"',1)])):l("",!0),s[25]||(s[25]=e("div",{class:"p-4 bg-yellow-50 dark:bg-yellow-950 rounded-lg border border-yellow-200 dark:border-yellow-800"},[e("h4",{class:"font-medium text-yellow-800 dark:text-yellow-200 mb-1"},"Limites de requêtes"),e("p",{class:"text-sm text-yellow-700 dark:text-yellow-300"},[C(" Chaque clé API a une limite de requêtes par minute. En cas de dépassement, vous recevrez une erreur 429 (Too Many Requests). L'endpoint "),e("code",{class:"bg-yellow-100 dark:bg-yellow-900 px-1 rounded"},"/api/messages/send"),C(" a un rate limit additionnel spécifique. ")])],-1))])):l("",!0)]),M.value?(a(),o("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:s[11]||(s[11]=J(t=>M.value=!1,["self"]))},[e("div",zs,[e("div",Js,[s[26]||(s[26]=e("h2",{class:"text-xl font-bold"},"Nouvelle clé API",-1)),e("button",{onClick:s[3]||(s[3]=t=>M.value=!1),class:"hover:bg-accent rounded-full p-1"},[g(v(K),{class:"w-5 h-5"})])]),e("form",{onSubmit:J(me,["prevent"]),class:"space-y-4 max-h-[70vh] overflow-y-auto pr-1"},[e("div",Fs,[s[27]||(s[27]=e("label",{class:"text-sm font-medium"},"Nom de la clé *",-1)),P(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>d.name=t),type:"text",placeholder:"Ex: Application mobile",required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[V,d.name]])]),e("div",Hs,[s[29]||(s[29]=e("label",{class:"text-sm font-medium"},"Sous-compte rattaché *",-1)),P(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>d.sub_account_id=t),required:"",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[s[28]||(s[28]=e("option",{value:"",disabled:""},"Sélectionner un sous-compte",-1)),(a(!0),o(k,null,T(R.value,t=>(a(),o("option",{key:t.id,value:t.id},m(t.name)+" ("+m(t.status==="active"?"Actif":"Inactif")+") ",9,Ws))),128))],512),[[z,d.sub_account_id,void 0,{number:!0}]]),R.value.length===0?(a(),o("p",Ys," Aucun sous-compte disponible. Créez d'abord un sous-compte. ")):l("",!0)]),e("div",Xs,[s[31]||(s[31]=e("label",{class:"text-sm font-medium"},"Type",-1)),P(e("select",{"onUpdate:modelValue":s[6]||(s[6]=t=>d.type=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[...s[30]||(s[30]=[e("option",{value:"production"},"Production",-1),e("option",{value:"test"},"Test",-1)])],512),[[z,d.type]])]),e("div",Zs,[s[32]||(s[32]=e("label",{class:"text-sm font-medium"},"Permissions",-1)),e("div",Qs,[(a(),o(k,null,T(W,(t,p)=>e("label",{key:p,class:"flex items-center gap-2"},[P(e("input",{type:"checkbox",value:p,"onUpdate:modelValue":s[7]||(s[7]=w=>d.permissions=w),class:"rounded border-input"},null,8,Ks),[[ye,d.permissions]]),e("span",et,m(t),1)])),64))])]),e("div",st,[s[33]||(s[33]=e("label",{class:"text-sm font-medium"},"Limite de requêtes (par minute)",-1)),P(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>d.rate_limit=t),type:"number",min:"1",max:"10000",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[V,d.rate_limit,void 0,{number:!0}]])]),e("div",tt,[s[34]||(s[34]=e("label",{class:"text-sm font-medium"},"IPs autorisées (optionnel)",-1)),s[35]||(s[35]=e("p",{class:"text-xs text-muted-foreground"},"Restreignez l'accès à des adresses IP spécifiques. Laissez vide pour tout autoriser.",-1)),e("div",at,[P(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>D.value=t),type:"text",placeholder:"Ex: 192.168.1.1",onKeydown:ve(J(Y,["prevent"]),["enter"]),class:"flex h-10 flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm font-mono"},null,40,ot),[[V,D.value]]),e("button",{type:"button",onClick:Y,class:"h-10 px-3 rounded-md border hover:bg-accent text-sm"}," Ajouter ")]),d.allowed_ips.length>0?(a(),o("div",rt,[(a(!0),o(k,null,T(d.allowed_ips,(t,p)=>(a(),o("span",{key:t,class:"inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300 font-mono"},[C(m(t)+" ",1),e("button",{type:"button",onClick:w=>ie(p),class:"hover:text-destructive"},"×",8,nt)]))),128))])):l("",!0)]),e("div",it,[e("button",{type:"button",onClick:s[10]||(s[10]=t=>M.value=!1),class:"flex-1 h-10 px-4 rounded-md border hover:bg-accent"}," Annuler "),e("button",{type:"submit",disabled:L.value||!d.sub_account_id,class:"flex-1 h-10 px-4 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50"},m(L.value?"Création...":"Créer la clé"),9,mt)])],32)])])):l("",!0),$.value?(a(),o("div",dt,[e("div",ut,[e("div",pt,[e("div",lt,[g(v(Te),{class:"w-8 h-8 text-green-600 dark:text-green-400"})]),s[36]||(s[36]=e("h2",{class:"text-xl font-bold"},"Clé API créée",-1)),s[37]||(s[37]=e("p",{class:"text-sm text-muted-foreground mt-2"},"Copiez cette clé maintenant, elle ne sera plus affichée en entier.",-1))]),e("div",ct,[e("code",ht,m(q.value),1)]),e("div",gt,[e("button",{onClick:s[12]||(s[12]=t=>{X(q.value),$.value=!1}),class:"flex-1 h-10 px-4 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center gap-2"},[g(v(U),{class:"w-4 h-4"}),s[38]||(s[38]=C(" Copier et fermer ",-1))])])])])):l("",!0)]),_:1}))}});export{Et as default};
