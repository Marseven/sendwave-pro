import{d as D,u as M,r as m,m as B,n as w,p as j,o as n,b as e,x as a,y as r,c as f,i as h,f as p,v as g,D as k,t as x,g as V}from"./main-p_IsPDMq.js";import{_ as P,f as C,o as R,g as T,h as q,a as A}from"./api-C5nYJgYy.js";import{r as L}from"./UserIcon-CjlpdeIh.js";import{r as $}from"./EnvelopeIcon-D0nEcqUK.js";import{r as z}from"./KeyIcon-CvZznmVq.js";import{r as N}from"./CheckCircleIcon-B9ask-N9.js";import{r as F,a as G}from"./XCircleIcon-B3WVDQZv.js";const H={class:"p-8"},I={class:"mb-8"},J={class:"flex items-center gap-2"},K={key:0,class:"flex items-center justify-center py-12"},O={key:1,class:"max-w-2xl space-y-6"},Q={class:"rounded-lg border bg-card p-6"},W={class:"flex items-center gap-2 mb-4"},X={class:"space-y-4"},Y={class:"space-y-2"},Z={class:"text-sm font-medium flex items-center gap-2"},ee={class:"space-y-2"},se={class:"text-sm font-medium flex items-center gap-2"},oe={class:"rounded-lg border bg-card p-6"},te={class:"flex items-center gap-2 mb-4"},re={class:"space-y-4"},ae={class:"space-y-2"},ie={class:"space-y-2"},ne={class:"rounded-lg border bg-card p-6"},le={class:"flex items-center gap-2 mb-4"},de={class:"space-y-3"},ue={class:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},ce={class:"flex-1"},me={class:"flex items-center gap-2"},pe={class:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},fe={class:"flex-1"},ve={class:"flex items-center gap-2"},ge={key:0,class:"rounded-lg bg-success/10 border border-success/20 p-4"},be={class:"flex items-center gap-2 text-success"},xe={class:"font-medium"},_e={key:1,class:"rounded-lg bg-destructive/10 border border-destructive/20 p-4"},ye={class:"flex items-center gap-2 text-destructive"},we={class:"font-medium"},he={class:"flex gap-3"},ke=["disabled"],Ve={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Ce=["disabled"],je=D({__name:"Settings",setup($e){const l=M(),b=m(!0),d=m(!1),u=m(""),c=m(""),o=m({name:"",email:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0}),v=m({name:"",email:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0});async function E(){try{b.value=!0;const i=await C.get("/user/profile"),s=i.data.data||i.data;o.value={name:s.name||"",email:s.email||"",password:"",password_confirmation:"",email_notifications:s.email_notifications??!0,weekly_reports:s.weekly_reports??!0},v.value={...o.value}}catch(i){console.error("Error loading settings:",i),l.user&&(o.value.name=l.user.name||"",o.value.email=l.user.email||"",v.value={...o.value})}finally{b.value=!1}}async function S(){var i,s;try{if(d.value=!0,u.value="",c.value="",o.value.password&&o.value.password!==o.value.password_confirmation){c.value="Les mots de passe ne correspondent pas";return}const t={name:o.value.name,email:o.value.email,email_notifications:o.value.email_notifications,weekly_reports:o.value.weekly_reports};o.value.password&&(t.password=o.value.password,t.password_confirmation=o.value.password_confirmation);const _=await C.put("/user/profile",t),y=_.data.data||_.data;l.user&&(l.user.name=y.name,l.user.email=y.email),o.value.password="",o.value.password_confirmation="",v.value={...o.value},u.value="Paramètres enregistrés avec succès",setTimeout(()=>{u.value=""},3e3)}catch(t){console.error("Error saving settings:",t),c.value=((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Erreur lors de l'enregistrement des paramètres"}finally{d.value=!1}}function U(){o.value={...v.value},u.value="",c.value=""}return B(()=>{E()}),(i,s)=>(n(),w(P,null,{default:j(()=>[e("div",H,[e("div",I,[e("div",J,[a(r(R),{class:"w-8 h-8 text-primary"}),s[6]||(s[6]=e("h1",{class:"text-3xl font-bold"},"Paramètres",-1))]),s[7]||(s[7]=e("p",{class:"text-muted-foreground mt-2"},"Configurez votre compte et vos préférences",-1))]),b.value?(n(),f("div",K,[...s[8]||(s[8]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):(n(),f("div",O,[e("div",Q,[e("div",W,[a(r(T),{class:"w-5 h-5 text-primary"}),s[9]||(s[9]=e("h3",{class:"font-semibold"},"Profil",-1))]),e("div",X,[e("div",Y,[e("label",Z,[a(r(L),{class:"w-4 h-4 text-muted-foreground"}),s[10]||(s[10]=h(" Nom complet ",-1))]),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.name=t),type:"text",placeholder:"Votre nom complet",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[g,o.value.name]])]),e("div",ee,[e("label",se,[a(r($),{class:"w-4 h-4 text-muted-foreground"}),s[11]||(s[11]=h(" Email ",-1))]),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.email=t),type:"email",placeholder:"votre@email.com",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[g,o.value.email]])])])]),e("div",oe,[e("div",te,[a(r(z),{class:"w-5 h-5 text-primary"}),s[12]||(s[12]=e("h3",{class:"font-semibold"},"Sécurité",-1))]),e("div",re,[e("div",ae,[s[13]||(s[13]=e("label",{class:"text-sm font-medium"},"Nouveau mot de passe",-1)),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.password=t),type:"password",placeholder:"Laisser vide pour ne pas changer",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[g,o.value.password]])]),e("div",ie,[s[14]||(s[14]=e("label",{class:"text-sm font-medium"},"Confirmer le mot de passe",-1)),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.password_confirmation=t),type:"password",placeholder:"Confirmer le nouveau mot de passe",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[g,o.value.password_confirmation]])])])]),e("div",ne,[e("div",le,[a(r(q),{class:"w-5 h-5 text-primary"}),s[15]||(s[15]=e("h3",{class:"font-semibold"},"Notifications",-1))]),e("div",de,[e("label",ue,[p(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.email_notifications=t),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[k,o.value.email_notifications]]),e("div",ce,[e("div",me,[a(r($),{class:"w-4 h-4 text-muted-foreground"}),s[16]||(s[16]=e("div",{class:"font-medium text-sm"},"Notifications par email",-1))]),s[17]||(s[17]=e("div",{class:"text-xs text-muted-foreground mt-1"},"Recevoir les alertes importantes par email",-1))])]),e("label",pe,[p(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.value.weekly_reports=t),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[k,o.value.weekly_reports]]),e("div",fe,[e("div",ve,[a(r(A),{class:"w-4 h-4 text-muted-foreground"}),s[18]||(s[18]=e("div",{class:"font-medium text-sm"},"Rapports hebdomadaires",-1))]),s[19]||(s[19]=e("div",{class:"text-xs text-muted-foreground mt-1"},"Recevoir les statistiques chaque lundi matin",-1))])])])]),u.value?(n(),f("div",ge,[e("div",be,[a(r(N),{class:"w-5 h-5"}),e("p",xe,x(u.value),1)])])):V("",!0),c.value?(n(),f("div",_e,[e("div",ye,[a(r(F),{class:"w-5 h-5"}),e("p",we,x(c.value),1)])])):V("",!0),e("div",he,[e("button",{onClick:S,disabled:d.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[d.value?(n(),f("div",Ve)):(n(),w(r(N),{key:0,class:"w-4 h-4"})),e("span",null,x(d.value?"Enregistrement...":"Enregistrer"),1)],8,ke),e("button",{onClick:U,disabled:d.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"},[a(r(G),{class:"w-4 h-4"}),s[20]||(s[20]=e("span",null,"Annuler",-1))],8,Ce)])]))])]),_:1}))}});export{je as default};
