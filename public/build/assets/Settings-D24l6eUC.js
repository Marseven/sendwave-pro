import{d as z,u as T,r as p,m as D,n as h,p as M,o as n,b as s,x as i,y as r,c as g,i as k,f as a,v as f,D as b,C as A,t as _,g as V}from"./main-B8nnKBzl.js";import{_ as N,f as C,p as P,g as j,h as q,a as B,b as F,j as R}from"./api-DmY4CThG.js";import{r as W}from"./UserIcon-DwS3NgXI.js";import{r as S}from"./EnvelopeIcon-DYb2QtlF.js";import{r as J}from"./KeyIcon-DoywfiFD.js";import{r as O}from"./ExclamationTriangleIcon-sZHk8aX8.js";import{r as G}from"./GlobeAltIcon-DU9cgeSo.js";import{r as U}from"./CheckCircleIcon-DC7hkeBk.js";import{r as H,a as I}from"./XCircleIcon-nlWaCKla.js";const K={class:"p-8"},Q={class:"mb-8"},X={class:"flex items-center gap-2"},Y={key:0,class:"flex items-center justify-center py-12"},Z={key:1,class:"max-w-2xl space-y-6"},ee={class:"rounded-lg border bg-card p-6"},se={class:"flex items-center gap-2 mb-4"},te={class:"space-y-4"},oe={class:"space-y-2"},re={class:"text-sm font-medium flex items-center gap-2"},ie={class:"space-y-2"},ae={class:"text-sm font-medium flex items-center gap-2"},le={class:"rounded-lg border bg-card p-6"},ne={class:"flex items-center gap-2 mb-4"},de={class:"space-y-4"},ue={class:"space-y-2"},ce={class:"space-y-2"},me={class:"rounded-lg border bg-card p-6"},pe={class:"flex items-center gap-2 mb-4"},fe={class:"space-y-3"},ge={class:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},ve={class:"flex-1"},be={class:"flex items-center gap-2"},xe={class:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},_e={class:"flex-1"},ye={class:"flex items-center gap-2"},we={class:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},he={class:"flex-1"},ke={class:"flex items-center gap-2"},Ae={class:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-muted/50 transition-colors"},Ve={class:"flex-1"},Ce={class:"flex items-center gap-2"},Se={class:"rounded-lg border bg-card p-6"},Ue={class:"flex items-center gap-2 mb-4"},$e={class:"grid grid-cols-2 gap-4"},Ee={class:"space-y-2"},Le={class:"space-y-2"},ze={class:"rounded-lg border bg-card p-6"},Te={class:"flex items-center gap-2 mb-4"},De={class:"space-y-4"},Me={class:"space-y-2"},Ne={class:"space-y-2"},Pe={key:0,class:"rounded-lg bg-success/10 border border-success/20 p-4"},je={class:"flex items-center gap-2 text-success"},qe={class:"font-medium"},Be={key:1,class:"rounded-lg bg-destructive/10 border border-destructive/20 p-4"},Fe={class:"flex items-center gap-2 text-destructive"},Re={class:"font-medium"},We={class:"flex gap-3"},Je=["disabled"],Oe={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Ge=["disabled"],os=z({__name:"Settings",setup(He){const d=T(),x=p(!0),u=p(!1),c=p(""),m=p(""),t=p({name:"",email:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0,campaign_alerts:!0,low_credit_alert:!0,language:"fr",timezone:"Africa/Libreville",default_signature:"",credit_alert_threshold:5e3}),v=p({name:"",email:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0,campaign_alerts:!0,low_credit_alert:!0,language:"fr",timezone:"Africa/Libreville",default_signature:"",credit_alert_threshold:5e3});async function $(){try{x.value=!0;const l=await C.get("/user/profile"),e=l.data.data||l.data;t.value={name:e.name||"",email:e.email||"",password:"",password_confirmation:"",email_notifications:e.email_notifications??!0,weekly_reports:e.weekly_reports??!0,campaign_alerts:e.campaign_alerts??!0,low_credit_alert:e.low_credit_alert??!0,language:e.language||"fr",timezone:e.timezone||"Africa/Libreville",default_signature:e.default_signature||"",credit_alert_threshold:e.credit_alert_threshold||5e3},v.value={...t.value}}catch(l){console.error("Error loading settings:",l),d.user&&(t.value.name=d.user.name||"",t.value.email=d.user.email||"",v.value={...t.value})}finally{x.value=!1}}async function E(){var l,e;try{if(u.value=!0,c.value="",m.value="",t.value.password&&t.value.password!==t.value.password_confirmation){m.value="Les mots de passe ne correspondent pas";return}const o={name:t.value.name,email:t.value.email,email_notifications:t.value.email_notifications,weekly_reports:t.value.weekly_reports,campaign_alerts:t.value.campaign_alerts,low_credit_alert:t.value.low_credit_alert,language:t.value.language,timezone:t.value.timezone,default_signature:t.value.default_signature,credit_alert_threshold:t.value.credit_alert_threshold};t.value.password&&(o.password=t.value.password,o.password_confirmation=t.value.password_confirmation);const y=await C.put("/user/profile",o),w=y.data.data||y.data;d.user&&(d.user.name=w.name,d.user.email=w.email),t.value.password="",t.value.password_confirmation="",v.value={...t.value},c.value="Paramètres enregistrés avec succès",setTimeout(()=>{c.value=""},3e3)}catch(o){console.error("Error saving settings:",o),m.value=((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.message)||"Erreur lors de l'enregistrement des paramètres"}finally{u.value=!1}}function L(){t.value={...v.value},c.value="",m.value=""}return D(()=>{$()}),(l,e)=>(n(),h(N,null,{default:M(()=>[s("div",K,[s("div",Q,[s("div",X,[i(r(P),{class:"w-8 h-8 text-primary"}),e[12]||(e[12]=s("h1",{class:"text-3xl font-bold"},"Paramètres",-1))]),e[13]||(e[13]=s("p",{class:"text-muted-foreground mt-2"},"Configurez votre compte et vos préférences",-1))]),x.value?(n(),g("div",Y,[...e[14]||(e[14]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):(n(),g("div",Z,[s("div",ee,[s("div",se,[i(r(j),{class:"w-5 h-5 text-primary"}),e[15]||(e[15]=s("h3",{class:"font-semibold"},"Profil",-1))]),s("div",te,[s("div",oe,[s("label",re,[i(r(W),{class:"w-4 h-4 text-muted-foreground"}),e[16]||(e[16]=k(" Nom complet ",-1))]),a(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o),type:"text",placeholder:"Votre nom complet",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.name]])]),s("div",ie,[s("label",ae,[i(r(S),{class:"w-4 h-4 text-muted-foreground"}),e[17]||(e[17]=k(" Email ",-1))]),a(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.email=o),type:"email",placeholder:"votre@email.com",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.email]])])])]),s("div",le,[s("div",ne,[i(r(J),{class:"w-5 h-5 text-primary"}),e[18]||(e[18]=s("h3",{class:"font-semibold"},"Sécurité",-1))]),s("div",de,[s("div",ue,[e[19]||(e[19]=s("label",{class:"text-sm font-medium"},"Nouveau mot de passe",-1)),a(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.password=o),type:"password",placeholder:"Laisser vide pour ne pas changer",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.password]])]),s("div",ce,[e[20]||(e[20]=s("label",{class:"text-sm font-medium"},"Confirmer le mot de passe",-1)),a(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.password_confirmation=o),type:"password",placeholder:"Confirmer le nouveau mot de passe",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.password_confirmation]])])])]),s("div",me,[s("div",pe,[i(r(q),{class:"w-5 h-5 text-primary"}),e[21]||(e[21]=s("h3",{class:"font-semibold"},"Notifications",-1))]),s("div",fe,[s("label",ge,[a(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.email_notifications=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[b,t.value.email_notifications]]),s("div",ve,[s("div",be,[i(r(S),{class:"w-4 h-4 text-muted-foreground"}),e[22]||(e[22]=s("div",{class:"font-medium text-sm"},"Notifications par email",-1))]),e[23]||(e[23]=s("div",{class:"text-xs text-muted-foreground mt-1"},"Recevoir les alertes importantes par email",-1))])]),s("label",xe,[a(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.weekly_reports=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[b,t.value.weekly_reports]]),s("div",_e,[s("div",ye,[i(r(B),{class:"w-4 h-4 text-muted-foreground"}),e[24]||(e[24]=s("div",{class:"font-medium text-sm"},"Rapports hebdomadaires",-1))]),e[25]||(e[25]=s("div",{class:"text-xs text-muted-foreground mt-1"},"Recevoir les statistiques chaque lundi matin",-1))])]),s("label",we,[a(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.campaign_alerts=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[b,t.value.campaign_alerts]]),s("div",he,[s("div",ke,[i(r(O),{class:"w-4 h-4 text-muted-foreground"}),e[26]||(e[26]=s("div",{class:"font-medium text-sm"},"Alertes campagnes",-1))]),e[27]||(e[27]=s("div",{class:"text-xs text-muted-foreground mt-1"},"Être notifié en cas d'échec ou d'anomalie",-1))])]),s("label",Ae,[a(s("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.low_credit_alert=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[b,t.value.low_credit_alert]]),s("div",Ve,[s("div",Ce,[i(r(F),{class:"w-4 h-4 text-muted-foreground"}),e[28]||(e[28]=s("div",{class:"font-medium text-sm"},"Alerte crédit faible",-1))]),e[29]||(e[29]=s("div",{class:"text-xs text-muted-foreground mt-1"},"Être notifié quand le solde est bas",-1))])])])]),s("div",Se,[s("div",Ue,[i(r(G),{class:"w-5 h-5 text-primary"}),e[30]||(e[30]=s("h3",{class:"font-semibold"},"Préférences régionales",-1))]),s("div",$e,[s("div",Ee,[e[32]||(e[32]=s("label",{class:"text-sm font-medium"},"Langue",-1)),a(s("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.language=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[31]||(e[31]=[s("option",{value:"fr"},"Français",-1),s("option",{value:"en"},"English",-1)])],512),[[A,t.value.language]])]),s("div",Le,[e[34]||(e[34]=s("label",{class:"text-sm font-medium"},"Fuseau horaire",-1)),a(s("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.timezone=o),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[33]||(e[33]=[s("option",{value:"Africa/Libreville"},"Africa/Libreville (WAT)",-1),s("option",{value:"Africa/Lagos"},"Africa/Lagos (WAT)",-1),s("option",{value:"Africa/Douala"},"Africa/Douala (WAT)",-1),s("option",{value:"Europe/Paris"},"Europe/Paris (CET)",-1),s("option",{value:"UTC"},"UTC",-1)])],512),[[A,t.value.timezone]])])])]),s("div",ze,[s("div",Te,[i(r(R),{class:"w-5 h-5 text-primary"}),e[35]||(e[35]=s("h3",{class:"font-semibold"},"Préférences SMS",-1))]),s("div",De,[s("div",Me,[e[36]||(e[36]=s("label",{class:"text-sm font-medium"},"Signature par défaut",-1)),a(s("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.default_signature=o),type:"text",placeholder:"Ex: - JOBS SMS",maxlength:"30",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[f,t.value.default_signature]]),e[37]||(e[37]=s("p",{class:"text-xs text-muted-foreground"},"Ajoutée automatiquement à la fin de vos messages (max 30 caractères)",-1))]),s("div",Ne,[e[38]||(e[38]=s("label",{class:"text-sm font-medium"},"Seuil alerte crédit (FCFA)",-1)),a(s("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.credit_alert_threshold=o),type:"number",min:"0",step:"1000",placeholder:"5000",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[f,t.value.credit_alert_threshold,void 0,{number:!0}]]),e[39]||(e[39]=s("p",{class:"text-xs text-muted-foreground"},"Recevoir une alerte quand le solde passe en dessous de ce montant",-1))])])]),c.value?(n(),g("div",Pe,[s("div",je,[i(r(U),{class:"w-5 h-5"}),s("p",qe,_(c.value),1)])])):V("",!0),m.value?(n(),g("div",Be,[s("div",Fe,[i(r(H),{class:"w-5 h-5"}),s("p",Re,_(m.value),1)])])):V("",!0),s("div",We,[s("button",{onClick:E,disabled:u.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[u.value?(n(),g("div",Oe)):(n(),h(r(U),{key:0,class:"w-4 h-4"})),s("span",null,_(u.value?"Enregistrement...":"Enregistrer"),1)],8,Je),s("button",{onClick:L,disabled:u.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"},[i(r(I),{class:"w-4 h-4"}),e[40]||(e[40]=s("span",null,"Annuler",-1))],8,Ge)])]))])]),_:1}))}});export{os as default};
