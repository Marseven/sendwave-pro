import{o as n,c as a,b as s,d as Se,r,k as x,m as Ce,n as ne,p as _e,x as u,y as d,i as D,f as i,C as y,v as g,t as o,g as c,D as F,w as ae,s as re,F as z,q as B}from"./main-BcgoGG9h.js";import{_ as Me,f as O,r as ie,g as J,h as Ve,i as $e}from"./api-t-xCStKc.js";import{_ as De}from"./TabNav.vue_vue_type_script_setup_true_lang-azSSVh6S.js";import{c as Ue}from"./contactService-VO56x9Cv.js";import{s as je,a as W,b as q}from"./notifications-CHQAjgV4.js";import{r as Ae,a as Ee}from"./CogIcon-BPj0k6nh.js";import{r as de}from"./UserGroupIcon-HOtW0Zh-.js";import{r as ue,a as Te}from"./FolderIcon-pUxCLMYx.js";import{r as Ze}from"./DocumentArrowUpIcon-BR-a2R8_.js";function me(pe,K){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"})])}const Fe={class:"p-4 sm:p-6 lg:p-8"},ze={class:"mb-4 sm:mb-6"},Be={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4"},Ie={class:"text-xl sm:text-2xl font-bold flex items-center gap-2"},Ne={class:"flex items-center gap-2"},Pe=["disabled"],Le={class:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0"},Oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6"},Re={class:"lg:col-span-2 space-y-4 sm:space-y-6"},He={key:0,class:"space-y-4 sm:space-y-6"},Xe={class:"rounded-lg border bg-card p-4 sm:p-6 space-y-4 sm:space-y-6"},Ge={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"},Je={class:"space-y-1.5 sm:space-y-2"},We={class:"space-y-1.5 sm:space-y-2"},qe={class:"space-y-1.5 sm:space-y-2 sm:col-span-2 lg:col-span-1"},Ke={class:"space-y-1.5 sm:space-y-2"},Qe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-2"},Ye={class:"flex items-center gap-2"},es={class:"relative"},ss={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 text-xs text-muted-foreground"},ts={key:0,class:"text-destructive"},ls={class:"space-y-1.5 sm:space-y-2"},os={class:"flex items-center justify-between"},ns={class:"flex items-center gap-2 sm:gap-3 text-xs"},as={class:"text-muted-foreground"},rs={key:0,class:"px-2 py-0.5 bg-warning/10 text-warning rounded font-medium"},is={key:1,class:"space-y-6"},ds={class:"rounded-lg border bg-card p-6 space-y-6"},us={class:"flex items-center gap-2 pb-4 border-b"},ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ps={class:"space-y-2"},cs={class:"space-y-2"},vs={class:"space-y-2"},xs={class:"space-y-2"},fs={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t"},gs={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},bs={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},ys={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},hs={class:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-accent/50"},ws={key:2,class:"space-y-6"},ks={class:"rounded-lg border bg-card p-6 space-y-6"},Ss={class:"flex items-center gap-2 pb-4 border-b"},Cs={key:0,class:"p-4 bg-muted/50 rounded-lg"},_s={class:"flex items-center justify-between"},Ms={class:"flex items-center gap-3"},Vs={class:"font-medium"},$s={class:"text-xs text-muted-foreground"},Ds={key:1,class:"space-y-4"},Us={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},js={class:"space-y-2"},As=["value"],Es={class:"space-y-2"},Ts=["value"],Zs={key:2,class:"space-y-2"},Fs={class:"flex flex-col sm:flex-row gap-2 sm:gap-3"},zs=["disabled"],Bs={key:1,class:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white"},Is=["disabled"],Ns={class:"lg:hidden rounded-lg border bg-card p-4"},Ps={class:"flex items-center justify-between"},Ls={class:"flex items-center gap-2"},Os={class:"text-lg font-bold text-primary"},Rs={class:"flex gap-4 mt-2 text-xs text-muted-foreground"},Hs={class:"hidden lg:block space-y-4 sm:space-y-6"},Xs={class:"rounded-lg border bg-card p-4 sm:p-6"},Gs={class:"font-semibold mb-3 sm:mb-4 flex items-center gap-2 text-sm sm:text-base"},Js={class:"space-y-2 sm:space-y-3"},Ws={class:"flex justify-between text-xs sm:text-sm"},qs={class:"font-medium"},Ks={class:"flex justify-between text-xs sm:text-sm"},Qs={class:"flex justify-between text-xs sm:text-sm"},Ys={class:"font-medium"},et={class:"border-t pt-2 sm:pt-3 mt-2 sm:mt-3"},st={class:"flex justify-between"},tt={class:"text-lg sm:text-xl font-bold text-primary"},lt={class:"rounded-lg border bg-card p-4 sm:p-6"},ot={class:"space-y-2"},nt={class:"rounded-lg border bg-card p-4 sm:p-6"},at={class:"space-y-2"},rt=["onClick"],it={class:"font-medium text-xs sm:text-sm truncate"},dt={class:"text-xs text-muted-foreground truncate"},ut={key:0,class:"text-xs sm:text-sm text-muted-foreground text-center py-3 sm:py-4"},mt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},pt={class:"relative bg-card rounded-lg shadow-lg w-full max-w-sm sm:max-w-md p-4 sm:p-6"},ct={class:"space-y-3 sm:space-y-4"},vt={class:"space-y-1.5 sm:space-y-2"},xt=["min"],ft={class:"space-y-1.5 sm:space-y-2"},gt={class:"flex gap-2 sm:gap-3 mt-4 sm:mt-6"},bt=["disabled"],yt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ht={class:"relative bg-card rounded-lg shadow-lg w-full max-w-sm sm:max-w-lg p-4 sm:p-6 max-h-[85vh] overflow-hidden flex flex-col"},wt={class:"flex-1 overflow-y-auto space-y-2 min-h-0"},kt=["value"],St={class:"min-w-0"},Ct={class:"font-medium text-xs sm:text-sm truncate"},_t={class:"text-xs text-muted-foreground truncate"},Mt={class:"flex gap-2 sm:gap-3 mt-3 sm:mt-4 pt-3 sm:pt-4 border-t"},Vt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},$t={class:"relative bg-card rounded-lg shadow-lg w-full max-w-sm sm:max-w-lg p-4 sm:p-6 max-h-[85vh] overflow-hidden flex flex-col"},Dt={class:"flex-1 overflow-y-auto space-y-2 min-h-0"},Ut=["onClick"],jt={class:"font-medium text-sm"},At={class:"text-xs sm:text-sm text-muted-foreground mt-1 line-clamp-2"},Lt=Se({__name:"SendSms",setup(pe){const K=[{id:"send",label:"Send SMS"},{id:"opt",label:"Send Opt SMS"},{id:"file",label:"SMS From File"}],h=r("send"),w=r("transactional"),k=r("auto"),I=r("JOBSSMS"),b=r(""),m=r(""),U=r(!1),f=r({unicode:!1,flash:!1,dlr:!0,priority:!1}),ce=r(null),N=r(!1),v=r(null),j=r({phone:"",name:""}),A=r(!1),S=r(!1),Q=r(!1),C=r(!1),_=r(""),M=r(""),ve=new Date().toISOString().split("T")[0],R=r([]),P=r(""),E=r([]),H=r([]),Y=x(()=>H.value.slice(0,3)),T=x(()=>b.value.split(/[\n,]/).map(l=>l.trim()).filter(l=>l.length>0)),V=x(()=>T.value.length),L=x(()=>{const l={airtel:0,moov:0,invalid:0};return T.value.forEach(e=>{const t=e.replace(/\D/g,"").slice(-8);if(t.length!==8){l.invalid++;return}const p=t.substring(0,2);["77","74","76"].includes(p)?l.airtel++:["60","62","65","66"].includes(p)?l.moov++:l.invalid++}),l}),ee=x(()=>m.value.length),$=x(()=>Math.ceil(ee.value/160)||1),Z=x(()=>V.value*$.value),X=x(()=>Z.value*20),G=x(()=>h.value==="file"?v.value&&m.value.trim().length>0:V.value>0&&m.value.trim().length>0),xe=x(()=>{if(!P.value)return R.value;const l=P.value.toLowerCase();return R.value.filter(e=>e.name.toLowerCase().includes(l)||e.phone.includes(l))});async function fe(){try{const l=await Ue.getAll();R.value=l.filter(e=>e.status==="active")}catch(l){console.error("Error loading contacts:",l)}}async function se(){try{const l=await O.get("/templates");H.value=l.data.data||l.data||[]}catch(l){console.error("Error loading templates:",l)}}function te(l){m.value=l.content}function ge(){const l=new Set(T.value);E.value.forEach(e=>l.add(e)),b.value=Array.from(l).join(`
`),E.value=[],S=!1}function be(l){var t;N.value=!1;const e=(t=l.dataTransfer)==null?void 0:t.files;e&&e.length>0&&le(e[0])}function ye(l){const e=l.target;e.files&&e.files.length>0&&le(e.files[0])}function le(l){v.value={name:l.name,rows:100,columns:["phone","name","email"]},j.value={phone:"phone",name:"name"}}async function he(){var e,t;if(!(!G.value||!await je("Confirmer l'envoi",`Envoyer ${Z.value} SMS a ${V.value} destinataire(s) pour ${X.value} XAF ?`))){U.value=!0;try{const p={recipients:T.value,message:m.value,type:"immediate",channel:w.value,route:k.value,sender_id:I.value,options:f.value};await O.post("/messages/send",p),W(`${Z.value} SMS envoye(s) avec succes !`),oe()}catch(p){console.error("Error sending message:",p),q(((t=(e=p.response)==null?void 0:e.data)==null?void 0:t.message)||"Erreur lors de l'envoi")}finally{U.value=!1}}}async function we(){var e,t;if(!_.value||!M.value)return;const l=`${_.value} ${M.value}`;try{await O.post("/messages/send",{recipients:T.value,message:m.value,type:"scheduled",scheduled_at:l,channel:w.value,route:k.value,sender_id:I.value}),W("Message planifie avec succes !"),A.value=!1,oe()}catch(p){q(((t=(e=p.response)==null?void 0:e.data)==null?void 0:t.message)||"Erreur lors de la planification")}}async function ke(){var l,e;try{await O.post("/templates",{name:`Brouillon ${new Date().toLocaleString()}`,content:m.value,is_public:!1}),W("Brouillon sauvegarde"),se()}catch(t){q(((e=(l=t.response)==null?void 0:l.data)==null?void 0:e.message)||"Erreur lors de la sauvegarde")}}function oe(){b.value="",m.value="",v.value=null,_.value="",M.value=""}return Ce(()=>{fe(),se()}),(l,e)=>(n(),ne(Me,null,{default:_e(()=>[s("div",Fe,[s("div",ze,[s("div",Be,[s("div",null,[s("h1",Ie,[u(d(ie),{class:"w-6 h-6 sm:w-7 sm:h-7 text-primary"}),e[38]||(e[38]=D(" Envoi de SMS ",-1))]),e[39]||(e[39]=s("p",{class:"text-sm text-muted-foreground mt-1"},"Envoyez des SMS unitaires ou en masse",-1))]),s("div",Ne,[s("button",{onClick:e[0]||(e[0]=t=>C.value=!0),class:"inline-flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 border rounded-lg hover:bg-accent transition-colors text-xs sm:text-sm font-medium"},[u(d(J),{class:"w-4 h-4"}),e[40]||(e[40]=s("span",{class:"hidden sm:inline"},"Templates",-1))]),s("button",{onClick:ke,disabled:!m.value,class:"inline-flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 border rounded-lg hover:bg-accent transition-colors text-xs sm:text-sm font-medium disabled:opacity-50"},[u(d(Ae),{class:"w-4 h-4"}),e[41]||(e[41]=s("span",{class:"hidden sm:inline"},"Brouillon",-1))],8,Pe)])])]),s("div",Le,[u(De,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=t=>h.value=t),tabs:K,class:"mb-4 sm:mb-6"},null,8,["modelValue"])]),s("div",Oe,[s("div",Re,[h.value==="send"?(n(),a("div",He,[s("div",Xe,[s("div",Ge,[s("div",Je,[e[43]||(e[43]=s("label",{class:"text-xs sm:text-sm font-medium"},"Message Channel",-1)),i(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>w.value=t),class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm focus:ring-2 focus:ring-primary"},[...e[42]||(e[42]=[s("option",{value:"transactional"},"Transactional",-1),s("option",{value:"marketing"},"Marketing",-1)])],512),[[y,w.value]])]),s("div",We,[e[45]||(e[45]=s("label",{class:"text-xs sm:text-sm font-medium"},"Message Route",-1)),i(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>k.value=t),class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm focus:ring-2 focus:ring-primary"},[...e[44]||(e[44]=[s("option",{value:"auto"},"Auto (Recommended)",-1),s("option",{value:"airtel"},"Airtel Direct",-1),s("option",{value:"moov"},"Moov Direct",-1)])],512),[[y,k.value]])]),s("div",qe,[e[47]||(e[47]=s("label",{class:"text-xs sm:text-sm font-medium"},"Sender ID",-1)),i(s("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>I.value=t),class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm focus:ring-2 focus:ring-primary"},[...e[46]||(e[46]=[s("option",{value:"JOBSSMS"},"JOBSSMS (Default)",-1),s("option",{value:"SendWave"},"SendWave",-1)])],512),[[y,I.value]])])]),s("div",Ke,[s("div",Qe,[e[50]||(e[50]=s("label",{class:"text-xs sm:text-sm font-medium"},"Destinataires",-1)),s("div",Ye,[s("button",{onClick:e[5]||(e[5]=t=>S.value=!0),class:"text-xs text-primary hover:underline flex items-center gap-1"},[u(d(de),{class:"w-4 h-4"}),e[48]||(e[48]=D(" Contacts ",-1))]),s("button",{onClick:e[6]||(e[6]=t=>Q.value=!0),class:"text-xs text-primary hover:underline flex items-center gap-1"},[u(d(ue),{class:"w-4 h-4"}),e[49]||(e[49]=D(" Groupes ",-1))])])]),s("div",es,[i(s("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>b.value=t),placeholder:`Entrez les numéros (un par ligne ou séparés par virgule)
+241 77 75 07 37
62 34 56 78`,rows:"3",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm font-mono focus:ring-2 focus:ring-primary resize-none"},null,512),[[g,b.value]])]),s("div",ss,[s("span",null,o(V.value)+" destinataire(s) - Airtel: "+o(L.value.airtel)+", Moov: "+o(L.value.moov),1),L.value.invalid>0?(n(),a("span",ts,o(L.value.invalid)+" invalide(s)",1)):c("",!0)])]),s("div",ls,[s("div",os,[e[51]||(e[51]=s("label",{class:"text-xs sm:text-sm font-medium"},"Message",-1)),s("div",ns,[s("span",as,o(ee.value)+"/160",1),$.value>1?(n(),a("span",rs,o($.value)+" SMS ",1)):c("",!0)])]),i(s("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>m.value=t),placeholder:"Tapez votre message ici...",rows:"5",maxlength:"640",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm focus:ring-2 focus:ring-primary resize-none"},null,512),[[g,m.value]])])])])):c("",!0),h.value==="opt"?(n(),a("div",is,[s("div",ds,[s("div",us,[u(d(Ee),{class:"w-5 h-5 text-primary"}),e[52]||(e[52]=s("h3",{class:"font-semibold"},"Options avancees",-1))]),s("div",ms,[s("div",ps,[e[54]||(e[54]=s("label",{class:"text-sm font-medium"},"Message Channel",-1)),i(s("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>w.value=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[...e[53]||(e[53]=[s("option",{value:"transactional"},"Transactional",-1),s("option",{value:"marketing"},"Marketing",-1)])],512),[[y,w.value]])]),s("div",cs,[e[56]||(e[56]=s("label",{class:"text-sm font-medium"},"Message Route",-1)),i(s("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>k.value=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[...e[55]||(e[55]=[s("option",{value:"auto"},"Auto",-1),s("option",{value:"airtel"},"Airtel Direct",-1),s("option",{value:"moov"},"Moov Direct",-1)])],512),[[y,k.value]])])]),s("div",vs,[e[57]||(e[57]=s("label",{class:"text-sm font-medium"},"Destinataires",-1)),i(s("textarea",{"onUpdate:modelValue":e[11]||(e[11]=t=>b.value=t),placeholder:"Numeros de telephone...",rows:"3",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm font-mono resize-none"},null,512),[[g,b.value]])]),s("div",xs,[e[58]||(e[58]=s("label",{class:"text-sm font-medium"},"Message",-1)),i(s("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>m.value=t),placeholder:"Votre message...",rows:"4",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm resize-none"},null,512),[[g,m.value]])]),s("div",fs,[s("label",gs,[i(s("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=t=>f.value.unicode=t),class:"w-4 h-4 rounded"},null,512),[[F,f.value.unicode]]),e[59]||(e[59]=s("div",null,[s("p",{class:"font-medium text-sm"},"Unicode Support"),s("p",{class:"text-xs text-muted-foreground"},"Caracteres speciaux et emojis")],-1))]),s("label",bs,[i(s("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=t=>f.value.flash=t),class:"w-4 h-4 rounded"},null,512),[[F,f.value.flash]]),e[60]||(e[60]=s("div",null,[s("p",{class:"font-medium text-sm"},"Flash SMS"),s("p",{class:"text-xs text-muted-foreground"},"Affichage immediat")],-1))]),s("label",ys,[i(s("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=t=>f.value.dlr=t),class:"w-4 h-4 rounded"},null,512),[[F,f.value.dlr]]),e[61]||(e[61]=s("div",null,[s("p",{class:"font-medium text-sm"},"Delivery Report"),s("p",{class:"text-xs text-muted-foreground"},"Accusé de réception")],-1))]),s("label",hs,[i(s("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=t=>f.value.priority=t),class:"w-4 h-4 rounded"},null,512),[[F,f.value.priority]]),e[62]||(e[62]=s("div",null,[s("p",{class:"font-medium text-sm"},"Prioritaire"),s("p",{class:"text-xs text-muted-foreground"},"Envoi en priorité haute")],-1))])])])])):c("",!0),h.value==="file"?(n(),a("div",ws,[s("div",ks,[s("div",Ss,[u(d(Ze),{class:"w-5 h-5 text-primary"}),e[63]||(e[63]=s("h3",{class:"font-semibold"},"Import depuis fichier",-1))]),s("div",{onDragover:e[18]||(e[18]=ae(t=>N.value=!0,["prevent"])),onDragleave:e[19]||(e[19]=t=>N.value=!1),onDrop:ae(be,["prevent"]),class:re(["border-2 border-dashed rounded-lg p-8 text-center transition-colors",N.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"])},[s("input",{type:"file",ref_key:"fileInput",ref:ce,onChange:ye,accept:".csv,.xlsx,.xls,.txt",class:"hidden"},null,544),u(d(Te),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[64]||(e[64]=s("p",{class:"text-sm font-medium mb-2"},"Glissez-deposez votre fichier ici",-1)),e[65]||(e[65]=s("p",{class:"text-xs text-muted-foreground mb-4"},"ou",-1)),s("button",{onClick:e[17]||(e[17]=t=>l.$refs.fileInput.click()),class:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90"}," Parcourir "),e[66]||(e[66]=s("p",{class:"text-xs text-muted-foreground mt-4"}," Formats acceptes: CSV, Excel (.xlsx, .xls), TXT ",-1))],34),v.value?(n(),a("div",Cs,[s("div",_s,[s("div",Ms,[u(d(J),{class:"w-8 h-8 text-primary"}),s("div",null,[s("p",Vs,o(v.value.name),1),s("p",$s,o(v.value.rows)+" lignes detectees",1)])]),s("button",{onClick:e[20]||(e[20]=t=>v.value=null),class:"text-muted-foreground hover:text-destructive"},[u(d(Ve),{class:"w-5 h-5"})])])])):c("",!0),v.value?(n(),a("div",Ds,[e[70]||(e[70]=s("h4",{class:"font-medium"},"Mapping des colonnes",-1)),s("div",Us,[s("div",js,[e[67]||(e[67]=s("label",{class:"text-sm font-medium"},"Colonne Telephone",-1)),i(s("select",{"onUpdate:modelValue":e[21]||(e[21]=t=>j.value.phone=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(n(!0),a(z,null,B(v.value.columns,t=>(n(),a("option",{key:t,value:t},o(t),9,As))),128))],512),[[y,j.value.phone]])]),s("div",Es,[e[69]||(e[69]=s("label",{class:"text-sm font-medium"},"Colonne Nom (optionnel)",-1)),i(s("select",{"onUpdate:modelValue":e[22]||(e[22]=t=>j.value.name=t),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[e[68]||(e[68]=s("option",{value:""},"-- Aucune --",-1)),(n(!0),a(z,null,B(v.value.columns,t=>(n(),a("option",{key:t,value:t},o(t),9,Ts))),128))],512),[[y,j.value.name]])])])])):c("",!0),v.value?(n(),a("div",Zs,[e[71]||(e[71]=s("label",{class:"text-sm font-medium"},"Message (variables: {name}, {phone})",-1)),i(s("textarea",{"onUpdate:modelValue":e[23]||(e[23]=t=>m.value=t),placeholder:"Bonjour {name}, votre code est...",rows:"4",class:"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm resize-none"},null,512),[[g,m.value]])])):c("",!0)])])):c("",!0),s("div",Fs,[s("button",{onClick:he,disabled:!G.value||U.value,class:"flex-1 inline-flex items-center justify-center gap-2 h-10 sm:h-12 px-4 sm:px-6 bg-success text-white rounded-lg text-sm sm:text-base font-medium hover:bg-success/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[U.value?(n(),a("div",Bs)):(n(),ne(d(ie),{key:0,class:"w-4 h-4 sm:w-5 sm:h-5"})),D(" "+o(U.value?"Envoi...":"Envoyer"),1)],8,zs),s("button",{onClick:e[24]||(e[24]=t=>A.value=!0),disabled:!G.value,class:"inline-flex items-center justify-center gap-2 h-10 sm:h-12 px-4 sm:px-6 border rounded-lg text-sm sm:text-base font-medium hover:bg-accent disabled:opacity-50 transition-colors"},[u(d($e),{class:"w-4 h-4 sm:w-5 sm:h-5"}),e[72]||(e[72]=D(" Planifier ",-1))],8,Is)]),s("div",Ns,[s("div",Ps,[s("div",Ls,[u(d(me),{class:"w-5 h-5 text-primary"}),e[73]||(e[73]=s("span",{class:"font-semibold text-sm"},"Estimation",-1))]),s("span",Os,o(X.value)+" XAF",1)]),s("div",Rs,[s("span",null,o(V.value)+" dest.",1),s("span",null,o($.value)+" SMS/msg",1),s("span",null,o(Z.value)+" total",1)])])]),s("div",Hs,[s("div",Xs,[s("h3",Gs,[u(d(me),{class:"w-5 h-5 text-primary"}),e[74]||(e[74]=D(" Estimation ",-1))]),s("div",Js,[s("div",Ws,[e[75]||(e[75]=s("span",{class:"text-muted-foreground"},"Destinataires",-1)),s("span",qs,o(V.value),1)]),s("div",Ks,[e[76]||(e[76]=s("span",{class:"text-muted-foreground"},"SMS par message",-1)),s("span",{class:re(["font-medium",$.value>1?"text-warning":""])},o($.value),3)]),s("div",Qs,[e[77]||(e[77]=s("span",{class:"text-muted-foreground"},"Total SMS",-1)),s("span",Ys,o(Z.value),1)]),s("div",et,[s("div",st,[e[78]||(e[78]=s("span",{class:"font-medium text-sm"},"Cout estime",-1)),s("span",tt,o(X.value)+" XAF",1)])])])]),s("div",lt,[e[82]||(e[82]=s("h3",{class:"font-semibold mb-3 sm:mb-4 text-sm sm:text-base"},"Actions rapides",-1)),s("div",ot,[s("button",{onClick:e[25]||(e[25]=t=>S.value=!0),class:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[u(d(de),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),e[79]||(e[79]=s("div",{class:"min-w-0"},[s("p",{class:"font-medium text-xs sm:text-sm"},"Ajouter des contacts"),s("p",{class:"text-xs text-muted-foreground hidden sm:block"},"Depuis votre repertoire")],-1))]),s("button",{onClick:e[26]||(e[26]=t=>Q.value=!0),class:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[u(d(ue),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),e[80]||(e[80]=s("div",{class:"min-w-0"},[s("p",{class:"font-medium text-xs sm:text-sm"},"Selectionner un groupe"),s("p",{class:"text-xs text-muted-foreground hidden sm:block"},"Envoi a un groupe entier")],-1))]),s("button",{onClick:e[27]||(e[27]=t=>C.value=!0),class:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[u(d(J),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),e[81]||(e[81]=s("div",{class:"min-w-0"},[s("p",{class:"font-medium text-xs sm:text-sm"},"Utiliser un template"),s("p",{class:"text-xs text-muted-foreground hidden sm:block"},"Messages predefinis")],-1))])])]),s("div",nt,[e[83]||(e[83]=s("h3",{class:"font-semibold mb-3 sm:mb-4 text-sm sm:text-base"},"Templates recents",-1)),s("div",at,[(n(!0),a(z,null,B(Y.value,t=>(n(),a("button",{key:t.id,onClick:p=>te(t),class:"w-full p-2 sm:p-3 rounded-lg border hover:bg-accent transition-colors text-left"},[s("p",it,o(t.name),1),s("p",dt,o(t.content),1)],8,rt))),128)),Y.value.length===0?(n(),a("p",ut," Aucun template recent ")):c("",!0)])])])])]),A.value?(n(),a("div",mt,[s("div",{class:"absolute inset-0 bg-black/50",onClick:e[28]||(e[28]=t=>A.value=!1)}),s("div",pt,[e[86]||(e[86]=s("h3",{class:"text-base sm:text-lg font-semibold mb-3 sm:mb-4"},"Planifier l'envoi",-1)),s("div",ct,[s("div",vt,[e[84]||(e[84]=s("label",{class:"text-xs sm:text-sm font-medium"},"Date",-1)),i(s("input",{type:"date","onUpdate:modelValue":e[29]||(e[29]=t=>_.value=t),min:d(ve),class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm"},null,8,xt),[[g,_.value]])]),s("div",ft,[e[85]||(e[85]=s("label",{class:"text-xs sm:text-sm font-medium"},"Heure",-1)),i(s("input",{type:"time","onUpdate:modelValue":e[30]||(e[30]=t=>M.value=t),class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm"},null,512),[[g,M.value]])])]),s("div",gt,[s("button",{onClick:we,disabled:!_.value||!M.value,class:"flex-1 h-9 sm:h-10 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90 disabled:opacity-50"}," Planifier ",8,bt),s("button",{onClick:e[31]||(e[31]=t=>A.value=!1),class:"px-3 sm:px-4 h-9 sm:h-10 border rounded-lg text-sm hover:bg-accent"}," Annuler ")])])])):c("",!0),S.value?(n(),a("div",yt,[s("div",{class:"absolute inset-0 bg-black/50",onClick:e[32]||(e[32]=t=>S.value=!1)}),s("div",ht,[e[87]||(e[87]=s("h3",{class:"text-base sm:text-lg font-semibold mb-3 sm:mb-4"},"Selectionner des contacts",-1)),i(s("input",{type:"text","onUpdate:modelValue":e[33]||(e[33]=t=>P.value=t),placeholder:"Rechercher...",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-xs sm:text-sm mb-3 sm:mb-4"},null,512),[[g,P.value]]),s("div",wt,[(n(!0),a(z,null,B(xe.value,t=>(n(),a("label",{key:t.id,class:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg border hover:bg-accent cursor-pointer"},[i(s("input",{type:"checkbox",value:t.phone,"onUpdate:modelValue":e[34]||(e[34]=p=>E.value=p),class:"w-4 h-4 rounded flex-shrink-0"},null,8,kt),[[F,E.value]]),s("div",St,[s("p",Ct,o(t.name),1),s("p",_t,o(t.phone),1)])]))),128))]),s("div",Mt,[s("button",{onClick:ge,class:"flex-1 h-9 sm:h-10 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90"}," Ajouter ("+o(E.value.length)+") ",1),s("button",{onClick:e[35]||(e[35]=t=>S.value=!1),class:"px-3 sm:px-4 h-9 sm:h-10 border rounded-lg text-sm hover:bg-accent"}," Annuler ")])])])):c("",!0),C.value?(n(),a("div",Vt,[s("div",{class:"absolute inset-0 bg-black/50",onClick:e[36]||(e[36]=t=>C.value=!1)}),s("div",$t,[e[88]||(e[88]=s("h3",{class:"text-base sm:text-lg font-semibold mb-3 sm:mb-4"},"Templates",-1)),s("div",Dt,[(n(!0),a(z,null,B(H.value,t=>(n(),a("button",{key:t.id,onClick:p=>{te(t),C.value=!1},class:"w-full p-3 sm:p-4 rounded-lg border hover:bg-accent transition-colors text-left"},[s("p",jt,o(t.name),1),s("p",At,o(t.content),1)],8,Ut))),128))]),s("button",{onClick:e[37]||(e[37]=t=>C.value=!1),class:"mt-3 sm:mt-4 w-full h-9 sm:h-10 border rounded-lg text-sm hover:bg-accent"}," Fermer ")])])):c("",!0)]),_:1}))}});export{Lt as default};
