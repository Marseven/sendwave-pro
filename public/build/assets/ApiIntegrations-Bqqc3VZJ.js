import{e as i,_ as k}from"./api-CKpQafZN.js";import{s as _,a as p}from"./notifications-CHQAjgV4.js";import{r as h}from"./KeyIcon-Bh11PzD3.js";import{o as a,c,b as e,d as w,r as v,l as A,m as C,n as I,p as m,q as f,x as P,t as d,F as B,g as $}from"./main-oWKmIcvx.js";function q(s,n){return a(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})])}const g={async getAll(){const s=await i.get("/api-keys");return s.data.data||s.data},async getById(s){const n=await i.get(`/api-keys/${s}`);return n.data.data||n.data},async create(s){const n=await i.post("/api-keys",s);return n.data.data||n.data},async revoke(s){await i.post(`/api-keys/${s}/revoke`)},async delete(s){await i.delete(`/api-keys/${s}`)}},S={class:"p-8"},j={class:"mb-8 flex items-center justify-between"},N={class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},V={class:"max-w-3xl space-y-6"},E={class:"rounded-lg border bg-card p-6"},M={class:"space-y-3"},R={class:"font-medium"},z={class:"text-sm text-muted-foreground font-mono"},D={class:"text-xs text-muted-foreground mt-1"},F={class:"flex gap-2"},T=["onClick","disabled"],J=["onClick","disabled"],L={key:0,class:"text-center text-muted-foreground py-8"},O={class:"rounded-lg border bg-card p-6"},G={class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"},X=w({__name:"ApiIntegrations",setup(s){const n=v([]),l=v(!1);async function u(){l.value=!0;try{n.value=await g.getAll()}catch(r){console.error("Error loading API keys:",r)}finally{l.value=!1}}async function b(r){if(await _("Révoquer la clé API ?","Êtes-vous sûr de vouloir révoquer cette clé API ?"))try{await g.revoke(r),p("Clé API révoquée avec succès"),await u()}catch(o){console.error("Error revoking API key:",o)}}function x(r){navigator.clipboard.writeText(r),p("Clé copiée dans le presse-papier")}return A(()=>{u()}),(r,t)=>(a(),C(k,null,{default:I(()=>[e("div",S,[e("div",j,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"Intégrations API"),e("p",{class:"text-muted-foreground mt-2"},"Configurez vos clés API et webhooks")],-1)),e("button",N,[m(f(h),{class:"w-4 h-4"}),t[0]||(t[0]=e("span",null,"Nouvelle clé API",-1))])]),e("div",V,[e("div",E,[t[2]||(t[2]=e("h3",{class:"font-semibold mb-4"},"Clés API actives",-1)),e("div",M,[(a(!0),c(B,null,P(n.value,o=>(a(),c("div",{key:o.id,class:"flex items-center justify-between p-4 bg-muted/50 rounded-lg"},[e("div",null,[e("div",R,d(o.name),1),e("div",z,d(o.key),1),e("div",D,d(o.type==="production"?"Production":"Test")+" "+d(o.status==="revoked"?"(Révoquée)":""),1)]),e("div",F,[e("button",{onClick:y=>x(o.key),class:"text-sm px-3 py-1 rounded border hover:bg-accent",disabled:o.status==="revoked"}," Copier ",8,T),e("button",{onClick:y=>b(o.id),class:"text-sm px-3 py-1 rounded border hover:bg-destructive/10 text-destructive",disabled:o.status==="revoked"}," Révoquer ",8,J)])]))),128)),n.value.length===0?(a(),c("div",L," Aucune clé API active ")):$("",!0)])]),e("div",O,[t[4]||(t[4]=e("h3",{class:"font-semibold mb-4"},"Documentation",-1)),t[5]||(t[5]=e("p",{class:"text-sm text-muted-foreground mb-4"},"Consultez notre documentation pour intégrer l'API JOBS SMS dans vos applications.",-1)),e("button",G,[m(f(q),{class:"w-4 h-4"}),t[3]||(t[3]=e("span",null,"Voir la documentation",-1))])])])])]),_:1}))}});export{X as default};
