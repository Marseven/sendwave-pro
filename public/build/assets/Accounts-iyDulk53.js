import{o as r,c as n,b as t,d as xt,u as gt,r as u,k as qe,l as yt,m as ze,n as wt,G as ht,x as l,s as a,z as g,q as $,g as m,F as _,p as C,t as i,f as p,C as H,w as z,v as b,D as kt}from"./main-BXz8XKfw.js";import{_ as _t,f as h,n as Le,c as Te,h as Ie,o as de,t as Ae,i as L}from"./api-BWbGm7JT.js";import{b as v,a as w,s as Z}from"./notifications-CHQAjgV4.js";import{s as N}from"./subAccountService-ByIVqynC.js";import{r as Ct}from"./ShieldCheckIcon-B3EC6lLg.js";import{r as Be}from"./KeyIcon-Br7AYfCY.js";import{r as ae}from"./PencilIcon-CUb5zNVc.js";import{r as Ge}from"./BanknotesIcon-FSm90nEw.js";import{r as Se}from"./CheckCircleIcon-BAuRg9hz.js";import{r as $e}from"./TrashIcon-B6HKN3r4.js";import{r as jt}from"./DocumentDuplicateIcon-CwIpoecu.js";import{r as De}from"./InformationCircleIcon-D7ASNo4k.js";function At(ue,f){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})])}function St(ue,f){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function Pe(ue,f){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}const $t={class:"p-4 sm:p-6 lg:p-8"},Mt={class:"mb-6 border-b overflow-x-auto"},Ut={class:"flex gap-2 sm:gap-4 -mb-px min-w-max"},Vt={key:0},Et={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},Nt={key:0,class:"flex items-center justify-center py-8"},Ft={key:1,class:"flex flex-col items-center justify-center py-12 rounded-lg border bg-card"},Rt={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},qt={class:"p-4 sm:p-5"},zt={class:"flex items-start justify-between gap-2 mb-3"},Lt={class:"flex-1 min-w-0"},Tt={class:"font-semibold text-base truncate"},It={class:"text-xs text-muted-foreground mt-0.5 truncate"},Bt={class:"grid grid-cols-2 gap-3 text-sm mb-4"},Gt={class:"font-semibold text-primary"},Dt={class:"font-semibold"},Pt={class:"font-semibold"},Xt={class:"font-semibold"},Ht={class:"flex flex-wrap gap-2 pt-3 border-t"},Zt=["onClick"],Jt=["onClick"],Kt=["onClick"],Ot=["onClick"],Qt={key:1},Wt={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},Yt={class:"flex items-center gap-3"},es={class:"text-sm text-muted-foreground"},ts=["value"],ss={key:0,class:"flex items-center justify-center py-8"},os={key:1,class:"flex flex-col items-center justify-center py-12 rounded-lg border bg-card"},rs={key:2,class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4"},ns={class:"p-4 sm:p-5"},ls={class:"flex items-start justify-between gap-2 mb-3"},is={class:"flex-1 min-w-0"},ds={class:"font-semibold text-base truncate"},as={class:"text-xs text-muted-foreground mt-0.5 truncate"},us={key:0,class:"text-xs text-primary mt-0.5 truncate"},ms={class:"flex items-center gap-2 mb-3"},ps={class:"flex flex-wrap gap-2 pt-3 border-t"},cs=["onClick"],fs=["onClick"],bs=["onClick"],vs=["onClick"],xs={key:2},gs={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},ys={class:"flex gap-2"},ws={key:0,class:"flex items-center justify-center py-8"},hs={key:1,class:"flex flex-col items-center justify-center py-12 rounded-lg border bg-card"},ks={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},_s={class:"p-4 sm:p-5"},Cs={class:"flex items-start justify-between gap-2 mb-3"},js={class:"flex-1 min-w-0"},As={class:"flex items-center gap-2"},Ss={class:"font-semibold text-base truncate"},$s={class:"text-xs text-muted-foreground mt-0.5 truncate"},Ms={class:"flex items-center gap-1.5 flex-shrink-0"},Us={class:"grid grid-cols-2 gap-3 text-sm mb-4"},Vs={class:"font-semibold text-primary"},Es={class:"font-semibold"},Ns={class:"font-semibold"},Fs={class:"font-semibold"},Rs={class:"flex flex-wrap gap-2 pt-3 border-t"},qs=["onClick"],zs=["onClick"],Ls=["onClick"],Ts=["onClick"],Is=["onClick"],Bs={key:3},Gs={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},Ds={key:0,class:"flex items-center justify-center py-8"},Ps={key:1,class:"flex flex-col items-center justify-center py-12 rounded-lg border bg-card"},Xs={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},Hs={class:"p-4 sm:p-5"},Zs={class:"flex items-start justify-between gap-2 mb-2"},Js={class:"font-semibold text-base"},Ks={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-muted"},Os={class:"text-xs text-muted-foreground mb-3"},Qs={class:"flex flex-wrap gap-1 mb-3"},Ws={key:0,class:"text-xs px-1.5 py-0.5 rounded bg-muted"},Ys={class:"flex flex-wrap gap-2 pt-3 border-t"},eo=["onClick"],to=["onClick"],so=["onClick"],oo={key:4},ro={class:"mb-4"},no={class:"flex items-center gap-2 mb-2"},lo={key:0,class:"flex items-center justify-center py-8"},io={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ao={class:"p-4 sm:p-5"},uo={class:"flex items-start justify-between gap-2 mb-2"},mo={class:"font-semibold text-base"},po={class:"text-xs px-2 py-0.5 rounded-full bg-muted"},co={class:"text-xs text-muted-foreground mb-3"},fo={class:"mb-2"},bo={class:"flex flex-wrap gap-1 max-h-24 overflow-y-auto"},vo={key:5},xo={class:"mb-4"},go={class:"flex items-center gap-2 mb-2"},yo={key:0,class:"flex items-center justify-center py-8"},wo={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ho={class:"p-4 sm:p-5"},ko={class:"font-semibold text-base mb-3 capitalize"},_o={class:"space-y-2"},Co={class:"text-sm font-medium"},jo={class:"text-xs text-muted-foreground"},Ao={key:6,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},So={class:"relative bg-background rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},$o={class:"sticky top-0 bg-background border-b p-4 flex items-center justify-between"},Mo={class:"text-lg font-semibold"},Uo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vo={key:0,class:"border-t pt-4 mt-4"},Eo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},No={class:"md:col-span-2"},Fo={class:"flex justify-end gap-3 pt-4 border-t"},Ro=["disabled"],qo={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},zo={key:7,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Lo={class:"relative bg-background rounded-lg shadow-lg w-full max-w-md"},To={class:"p-4 border-b flex items-center justify-between"},Io={class:"text-sm text-muted-foreground"},Bo={class:"text-sm"},Go={class:"font-semibold text-primary"},Do={class:"flex justify-end gap-3 pt-4 border-t"},Po=["disabled"],Xo={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Ho={key:8,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Zo={class:"relative bg-background rounded-lg shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto"},Jo={class:"sticky top-0 bg-background border-b p-4 flex items-center justify-between"},Ko={class:"text-lg font-semibold"},Oo={key:0},Qo={key:1},Wo=["value"],Yo=["value"],er={class:"flex justify-end gap-3 pt-4 border-t"},tr=["disabled"],sr={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},or={key:9,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},rr={class:"relative bg-background rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},nr={class:"sticky top-0 bg-background border-b p-4 flex items-center justify-between"},lr={class:"text-lg font-semibold"},ir={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},dr={class:"text-xs font-semibold uppercase text-muted-foreground mb-2"},ar={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},ur=["value"],mr={class:"text-sm"},pr={class:"flex justify-end gap-3 pt-4 border-t"},cr=["disabled"],fr={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},br={key:10,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},vr={class:"relative bg-background rounded-lg shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto"},xr={class:"sticky top-0 bg-background border-b p-4 flex items-center justify-between"},gr={class:"text-lg font-semibold"},yr={key:0},wr={key:1},hr={key:2},kr={class:"flex justify-end gap-3 pt-4 border-t"},_r=["disabled"],Cr={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},jr={key:11,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ar={class:"relative bg-background rounded-lg shadow-lg w-full max-w-md"},Sr={class:"p-4 border-b flex items-center justify-between"},$r={class:"text-sm text-muted-foreground"},Mr={class:"text-sm"},Ur={class:"font-semibold text-primary"},Vr={class:"flex justify-end gap-3 pt-4 border-t"},Er=["disabled"],Nr={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Fr={key:12,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Rr={class:"relative bg-background rounded-lg shadow-lg w-full max-w-md"},qr={class:"p-4 border-b flex items-center justify-between"},zr=["value"],Lr=["value"],Tr={class:"flex justify-end gap-3 pt-4 border-t"},Ir=["disabled"],Br={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},tn=xt({__name:"Accounts",setup(ue){const f=gt(),me=ht(),Me=["accounts","users","sub-accounts","custom-roles","system-roles","permissions"],y=u((()=>{const o=me.query.tab;return o&&Me.includes(o)?o:f.isSuperAdmin?"accounts":f.canManageUsers?"users":"system-roles"})());qe(()=>me.query.tab,o=>{o&&Me.includes(o)&&(y.value=o)}),qe(()=>f.isSuperAdmin,o=>{o&&y.value!=="users"&&!me.query.tab&&(y.value="accounts")},{immediate:!0});const pe=u(!1),ce=u(!1),fe=u(!1),be=u(!1),ve=u(!1),xe=u(!1),K=u(!1),O=u(!1),Q=u(!1),W=u(!1),Y=u(!1),ee=u(!1),te=u(!1),T=u([]),ge=u([]),I=u([]),ye=u([]),Ue=u([]),we=u({}),Ve=u([]),se=u(""),he=u(!1),ke=u(!1),_e=u(!1),B=u(!1),Ce=u(!1),G=u(!1),D=u(!1),F=u(null),R=u(null),P=u(null),V=u(null),x=u({name:"",email:"",phone:"",company_id:"",sms_credits:0,monthly_budget:null,admin_name:"",admin_email:"",admin_password:""}),j=u({name:"",email:"",password:"",role:"agent",account_id:""}),U=u({name:"",description:"",permissions:[]}),M=u({accountId:0,accountName:"",currentCredits:0,amount:0,note:""}),c=u({name:"",email:"",password:"",role:"sender",sms_credits:0,monthly_budget:null}),E=u({subAccountId:0,subAccountName:"",currentCredits:0,amount:0}),A=u({from_sub_account_id:0,to_sub_account_id:0,amount:0}),je={active:"Actif",suspended:"Suspendu",pending:"En attente"},Xe={super_admin:"Super Admin",admin:"Admin",agent:"Agent"},He={admin:"Administrateur",manager:"Gestionnaire",sender:"Expéditeur",viewer:"Lecteur"};function S(o){return new Intl.NumberFormat("fr-FR").format(o)}async function J(){if(f.isSuperAdmin){pe.value=!0;try{const o=await h.get("/accounts");T.value=o.data.data||[]}catch{v("Erreur lors du chargement des comptes")}finally{pe.value=!1}}}async function X(){ce.value=!0;try{const o={};se.value&&(o.account_id=se.value);const s=(await h.get("/users",{params:o})).data.data;ge.value=Array.isArray(s)?s:(s==null?void 0:s.data)||[]}catch{v("Erreur lors du chargement des utilisateurs")}finally{ce.value=!1}}async function oe(){if(f.isSuperAdmin){be.value=!0;try{const o=await h.get("/custom-roles");ye.value=o.data.data||[]}catch{v("Erreur lors du chargement des rôles personnalisés")}finally{be.value=!1}}}async function Ze(){ve.value=!0;try{const o=await h.get("/system-roles");Ue.value=o.data.data||[]}catch{v("Erreur lors du chargement des rôles système")}finally{ve.value=!1}}async function Je(){xe.value=!0;try{const o=await h.get("/system-permissions");we.value=o.data.data||{}}catch{v("Erreur lors du chargement des permissions")}finally{xe.value=!1}}async function Ke(){try{const o=await h.get("/users/available-roles");Ve.value=o.data.data||[]}catch(o){console.error("Error loading roles:",o)}}function Ee(o){F.value=o||null,o?x.value={name:o.name,email:o.email,phone:o.phone||"",company_id:o.company_id||"",sms_credits:o.sms_credits||0,monthly_budget:o.monthly_budget,admin_name:"",admin_email:"",admin_password:""}:x.value={name:"",email:"",phone:"",company_id:"",sms_credits:0,monthly_budget:null,admin_name:"",admin_email:"",admin_password:""},he.value=!0}function re(){he.value=!1,F.value=null}async function Oe(){var o,e;K.value=!0;try{F.value?(await h.put(`/accounts/${F.value.id}`,x.value),w("Compte mis à jour avec succès")):(await h.post("/accounts",x.value),w("Compte créé avec succès")),re(),await J()}catch(s){v(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de la sauvegarde")}finally{K.value=!1}}function Qe(o){M.value={accountId:o.id,accountName:o.name,currentCredits:o.sms_credits,amount:0,note:""},B.value=!0}async function We(){var o,e;Y.value=!0;try{await h.post(`/accounts/${M.value.accountId}/credits`,{amount:M.value.amount,note:M.value.note}),w(`${M.value.amount} crédits ajoutés avec succès`),B.value=!1,await J()}catch(s){v(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de l'ajout des crédits")}finally{Y.value=!1}}async function Ye(o){var s,d;if(await Z("Suspendre ce compte ?","Tous les utilisateurs de ce compte seront également suspendus."))try{await h.post(`/accounts/${o.id}/suspend`),w("Compte suspendu"),await J()}catch(k){v(((d=(s=k.response)==null?void 0:s.data)==null?void 0:d.message)||"Erreur lors de la suspension")}}async function et(o){var e,s;try{await h.post(`/accounts/${o.id}/activate`),w("Compte activé"),await J()}catch(d){v(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de l'activation")}}function Ne(o){var e;R.value=o||null,o?j.value={name:o.name,email:o.email,password:"",role:o.role,account_id:o.account_id||""}:j.value={name:"",email:"",password:"",role:"agent",account_id:((e=f.user)==null?void 0:e.account_id)||""},ke.value=!0}function ne(){ke.value=!1,R.value=null}async function tt(){var o,e;O.value=!0;try{const s={...j.value};s.password||delete s.password,s.account_id||delete s.account_id,R.value?(await h.put(`/users/${R.value.id}`,s),w("Utilisateur mis à jour")):(await h.post("/users",s),w("Utilisateur créé")),ne(),await X()}catch(s){v(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de la sauvegarde")}finally{O.value=!1}}async function st(o){var s,d;if(await Z("Suspendre cet utilisateur ?"))try{await h.post(`/users/${o.id}/suspend`),w("Utilisateur suspendu"),await X()}catch(k){v(((d=(s=k.response)==null?void 0:s.data)==null?void 0:d.message)||"Erreur lors de la suspension")}}async function ot(o){var e,s;try{await h.post(`/users/${o.id}/activate`),w("Utilisateur activé"),await X()}catch(d){v(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de l'activation")}}async function rt(o){var s,d;if(await Z("Supprimer cet utilisateur ?","Cette action est irréversible."))try{await h.delete(`/users/${o.id}`),w("Utilisateur supprimé"),await X()}catch(k){v(((d=(s=k.response)==null?void 0:s.data)==null?void 0:d.message)||"Erreur lors de la suppression")}}function Fe(o){P.value=o||null,o?U.value={name:o.name,description:o.description||"",permissions:[...o.permissions||[]]}:U.value={name:"",description:"",permissions:[]},_e.value=!0}function le(){_e.value=!1,P.value=null}async function nt(){var o,e;W.value=!0;try{P.value?(await h.put(`/custom-roles/${P.value.id}`,U.value),w("Rôle mis à jour")):(await h.post("/custom-roles",U.value),w("Rôle créé")),le(),await oe()}catch(s){v(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de la sauvegarde")}finally{W.value=!1}}async function lt(o){var e,s;try{await h.post(`/custom-roles/${o.id}/duplicate`),w("Rôle dupliqué"),await oe()}catch(d){v(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de la duplication")}}async function it(o){var s,d;if(await Z("Supprimer ce rôle ?"))try{await h.delete(`/custom-roles/${o.id}`),w("Rôle supprimé"),await oe()}catch(k){v(((d=(s=k.response)==null?void 0:s.data)==null?void 0:d.message)||"Erreur lors de la suppression")}}async function q(){fe.value=!0;try{I.value=await N.getAll()}catch{v("Erreur lors du chargement des sous-comptes")}finally{fe.value=!1}}function Re(o){V.value=o||null,o?c.value={name:o.name,email:o.email,password:"",role:o.role,sms_credits:o.sms_credits||0,monthly_budget:o.monthly_budget}:c.value={name:"",email:"",password:"",role:"sender",sms_credits:0,monthly_budget:null},Ce.value=!0}function ie(){Ce.value=!1,V.value=null}async function dt(){var o,e;Q.value=!0;try{if(V.value){const s={name:c.value.name,email:c.value.email,role:c.value.role,monthly_budget:c.value.monthly_budget};c.value.password&&(s.password=c.value.password),await N.update(V.value.id,s),w("Sous-compte mis à jour")}else await N.create({name:c.value.name,email:c.value.email,password:c.value.password,role:c.value.role,sms_credits:c.value.sms_credits,monthly_budget:c.value.monthly_budget}),w("Sous-compte créé");ie(),await q()}catch(s){v(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de la sauvegarde")}finally{Q.value=!1}}function at(o){E.value={subAccountId:o.id,subAccountName:o.name,currentCredits:o.sms_credits,amount:0},G.value=!0}async function ut(){var o,e;ee.value=!0;try{await N.addCredits(E.value.subAccountId,E.value.amount),w(`${S(E.value.amount)} FCFA ajoutés avec succès`),G.value=!1,await q()}catch(s){v(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors de l'ajout des crédits")}finally{ee.value=!1}}function mt(){A.value={from_sub_account_id:0,to_sub_account_id:0,amount:0},D.value=!0}async function pt(){var o,e;te.value=!0;try{await N.transferCredits(A.value),w("Transfert effectué avec succès"),D.value=!1,await q()}catch(s){v(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Erreur lors du transfert")}finally{te.value=!1}}async function ct(o){var s,d;if(await Z("Suspendre ce sous-compte ?"))try{await N.suspend(o.id),w("Sous-compte suspendu"),await q()}catch(k){v(((d=(s=k.response)==null?void 0:s.data)==null?void 0:d.message)||"Erreur lors de la suspension")}}async function ft(o){var e,s;try{await N.activate(o.id),w("Sous-compte activé"),await q()}catch(d){v(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de l'activation")}}async function bt(o){var s,d;if(o.is_default){v("Impossible de supprimer le sous-compte principal.");return}if(await Z("Supprimer ce sous-compte ?","Cette action est irréversible."))try{await N.delete(o.id),w("Sous-compte supprimé"),await q()}catch(k){v(((d=(s=k.response)==null?void 0:s.data)==null?void 0:d.message)||"Erreur lors de la suppression")}}return yt(async()=>{await Promise.all([J(),X(),q(),oe(),Ze(),Je(),Ke()])}),(o,e)=>(r(),ze(_t,null,{default:wt(()=>[t("div",$t,[e[142]||(e[142]=t("div",{class:"mb-4 sm:mb-6 lg:mb-8"},[t("h1",{class:"text-2xl sm:text-3xl font-bold"},"Gestion des comptes"),t("p",{class:"text-sm text-muted-foreground mt-1 sm:mt-2"}," Gérez les comptes, utilisateurs et rôles de la plateforme ")],-1)),t("div",Mt,[t("nav",Ut,[l(f).isSuperAdmin?(r(),n("button",{key:0,onClick:e[0]||(e[0]=s=>y.value="accounts"),class:$(["py-3 px-2 sm:px-3 text-xs sm:text-sm font-medium border-b-2 transition-colors whitespace-nowrap",y.value==="accounts"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"])},[a(l(Le),{class:"w-4 h-4 inline mr-1 sm:mr-2"}),e[51]||(e[51]=g(" Comptes ",-1))],2)):m("",!0),l(f).canManageUsers?(r(),n("button",{key:1,onClick:e[1]||(e[1]=s=>y.value="users"),class:$(["py-3 px-2 sm:px-3 text-xs sm:text-sm font-medium border-b-2 transition-colors whitespace-nowrap",y.value==="users"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"])},[a(l(Te),{class:"w-4 h-4 inline mr-1 sm:mr-2"}),e[52]||(e[52]=g(" Utilisateurs ",-1))],2)):m("",!0),l(f).isAdmin||l(f).isSuperAdmin?(r(),n("button",{key:2,onClick:e[2]||(e[2]=s=>y.value="sub-accounts"),class:$(["py-3 px-2 sm:px-3 text-xs sm:text-sm font-medium border-b-2 transition-colors whitespace-nowrap",y.value==="sub-accounts"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"])},[a(l(Ie),{class:"w-4 h-4 inline mr-1 sm:mr-2"}),e[53]||(e[53]=g(" Sous-comptes ",-1))],2)):m("",!0),l(f).isSuperAdmin?(r(),n("button",{key:3,onClick:e[3]||(e[3]=s=>y.value="custom-roles"),class:$(["py-3 px-2 sm:px-3 text-xs sm:text-sm font-medium border-b-2 transition-colors whitespace-nowrap",y.value==="custom-roles"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"])},[a(l(Pe),{class:"w-4 h-4 inline mr-1 sm:mr-2"}),e[54]||(e[54]=g(" Rôles personnalisés ",-1))],2)):m("",!0),t("button",{onClick:e[4]||(e[4]=s=>y.value="system-roles"),class:$(["py-3 px-2 sm:px-3 text-xs sm:text-sm font-medium border-b-2 transition-colors whitespace-nowrap",y.value==="system-roles"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"])},[a(l(Ct),{class:"w-4 h-4 inline mr-1 sm:mr-2"}),e[55]||(e[55]=g(" Rôles système ",-1))],2),t("button",{onClick:e[5]||(e[5]=s=>y.value="permissions"),class:$(["py-3 px-2 sm:px-3 text-xs sm:text-sm font-medium border-b-2 transition-colors whitespace-nowrap",y.value==="permissions"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"])},[a(l(Be),{class:"w-4 h-4 inline mr-1 sm:mr-2"}),e[56]||(e[56]=g(" Permissions ",-1))],2)])]),y.value==="accounts"&&l(f).isSuperAdmin?(r(),n("div",Vt,[t("div",Et,[e[58]||(e[58]=t("p",{class:"text-sm text-muted-foreground"}," Gérez les comptes (entreprises/organisations) de la plateforme ",-1)),t("button",{onClick:e[6]||(e[6]=s=>Ee()),class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-xs sm:text-sm font-medium transition-colors bg-primary text-primary-foreground hover:bg-primary/90 h-9 sm:h-10 px-3 sm:px-4 py-2"},[a(l(de),{class:"w-4 h-4"}),e[57]||(e[57]=t("span",null,"Nouveau compte",-1))])]),pe.value?(r(),n("div",Nt,[...e[59]||(e[59]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"},null,-1)])])):T.value.length===0?(r(),n("div",Ft,[a(l(Le),{class:"w-12 h-12 text-muted-foreground mb-4"}),e[60]||(e[60]=t("p",{class:"text-lg font-medium"},"Aucun compte",-1)),e[61]||(e[61]=t("p",{class:"text-sm text-muted-foreground mt-1"},"Créez votre premier compte",-1))])):(r(),n("div",Rt,[(r(!0),n(_,null,C(T.value,s=>(r(),n("div",{key:s.id,class:"rounded-lg border bg-card shadow-sm hover:shadow-md transition-shadow"},[t("div",qt,[t("div",zt,[t("div",Lt,[t("h3",Tt,i(s.name),1),t("p",It,i(s.email),1)]),t("span",{class:$(["text-xs px-2 py-0.5 rounded-full font-medium flex-shrink-0",{"bg-green-100 text-green-700":s.status==="active","bg-red-100 text-red-700":s.status==="suspended","bg-yellow-100 text-yellow-700":s.status==="pending"}])},i(je[s.status]),3)]),t("div",Bt,[t("div",null,[e[62]||(e[62]=t("p",{class:"text-xs text-muted-foreground"},"Crédits SMS",-1)),t("p",Gt,i(S(s.sms_credits)),1)]),t("div",null,[e[63]||(e[63]=t("p",{class:"text-xs text-muted-foreground"},"Utilisateurs",-1)),t("p",Dt,i(s.users_count||0),1)]),t("div",null,[e[64]||(e[64]=t("p",{class:"text-xs text-muted-foreground"},"SMS envoyés",-1)),t("p",Pt,i(S(s.sms_sent_total)),1)]),t("div",null,[e[65]||(e[65]=t("p",{class:"text-xs text-muted-foreground"},"Budget mensuel",-1)),t("p",Xt,i(s.monthly_budget?S(s.monthly_budget):"Illimité"),1)])]),t("div",Ht,[t("button",{onClick:d=>Ee(s),class:"flex-1 inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border px-2 py-1.5 hover:bg-accent"},[a(l(ae),{class:"w-3 h-3"}),e[66]||(e[66]=g(" Modifier ",-1))],8,Zt),t("button",{onClick:d=>Qe(s),class:"flex-1 inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border px-2 py-1.5 hover:bg-accent"},[a(l(Ge),{class:"w-3 h-3"}),e[67]||(e[67]=g(" Crédits ",-1))],8,Jt),s.status==="active"?(r(),n("button",{key:0,onClick:d=>Ye(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-destructive text-destructive px-2 py-1.5 hover:bg-destructive/10"},[a(l(Ae),{class:"w-3 h-3"})],8,Kt)):(r(),n("button",{key:1,onClick:d=>et(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-success text-success px-2 py-1.5 hover:bg-success/10"},[a(l(Se),{class:"w-3 h-3"})],8,Ot))])])]))),128))]))])):m("",!0),y.value==="users"&&l(f).canManageUsers?(r(),n("div",Qt,[t("div",Wt,[t("div",Yt,[t("p",es,i(l(f).isSuperAdmin?"Gérez tous les utilisateurs":"Gérez les utilisateurs de votre compte"),1),l(f).isSuperAdmin&&T.value.length>0?p((r(),n("select",{key:0,"onUpdate:modelValue":e[7]||(e[7]=s=>se.value=s),onChange:X,class:"text-sm rounded-md border border-input bg-background px-2 py-1"},[e[68]||(e[68]=t("option",{value:""},"Tous les comptes",-1)),(r(!0),n(_,null,C(T.value,s=>(r(),n("option",{key:s.id,value:s.id},i(s.name),9,ts))),128))],544)),[[H,se.value]]):m("",!0)]),l(f).canCreateAgents?(r(),n("button",{key:0,onClick:e[8]||(e[8]=s=>Ne()),class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-xs sm:text-sm font-medium transition-colors bg-primary text-primary-foreground hover:bg-primary/90 h-9 sm:h-10 px-3 sm:px-4 py-2"},[a(l(de),{class:"w-4 h-4"}),t("span",null,i(l(f).isSuperAdmin?"Nouvel utilisateur":"Nouvel agent"),1)])):m("",!0)]),ce.value?(r(),n("div",ss,[...e[69]||(e[69]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"},null,-1)])])):ge.value.length===0?(r(),n("div",os,[a(l(Te),{class:"w-12 h-12 text-muted-foreground mb-4"}),e[70]||(e[70]=t("p",{class:"text-lg font-medium"},"Aucun utilisateur",-1)),e[71]||(e[71]=t("p",{class:"text-sm text-muted-foreground mt-1"},"Créez votre premier utilisateur",-1))])):(r(),n("div",rs,[(r(!0),n(_,null,C(ge.value,s=>(r(),n("div",{key:s.id,class:"rounded-lg border bg-card shadow-sm hover:shadow-md transition-shadow"},[t("div",ns,[t("div",ls,[t("div",is,[t("h3",ds,i(s.name),1),t("p",as,i(s.email),1),s.account?(r(),n("p",us,i(s.account.name),1)):m("",!0)]),t("span",{class:$(["text-xs px-2 py-0.5 rounded-full font-medium flex-shrink-0",{"bg-green-100 text-green-700":s.status==="active","bg-red-100 text-red-700":s.status==="suspended","bg-yellow-100 text-yellow-700":s.status==="pending"}])},i(je[s.status]),3)]),t("div",ms,[t("span",{class:$(["text-xs px-2 py-0.5 rounded-md font-medium",{"bg-purple-100 text-purple-700":s.role==="super_admin","bg-blue-100 text-blue-700":s.role==="admin","bg-teal-100 text-teal-700":s.role==="agent"}])},i(Xe[s.role]),3)]),t("div",ps,[t("button",{onClick:d=>Ne(s),class:"flex-1 inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border px-2 py-1.5 hover:bg-accent"},[a(l(ae),{class:"w-3 h-3"}),e[72]||(e[72]=g(" Modifier ",-1))],8,cs),s.status==="active"?(r(),n("button",{key:0,onClick:d=>st(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-destructive text-destructive px-2 py-1.5 hover:bg-destructive/10"},[a(l(Ae),{class:"w-3 h-3"})],8,fs)):(r(),n("button",{key:1,onClick:d=>ot(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-success text-success px-2 py-1.5 hover:bg-success/10"},[a(l(Se),{class:"w-3 h-3"})],8,bs)),t("button",{onClick:d=>rt(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-destructive text-destructive px-2 py-1.5 hover:bg-destructive/10"},[a(l($e),{class:"w-3 h-3"})],8,vs)])])]))),128))]))])):m("",!0),y.value==="sub-accounts"&&(l(f).isAdmin||l(f).isSuperAdmin)?(r(),n("div",xs,[t("div",gs,[e[75]||(e[75]=t("p",{class:"text-sm text-muted-foreground"}," Gérez les sous-comptes et leurs crédits SMS ",-1)),t("div",ys,[I.value.length>=2?(r(),n("button",{key:0,onClick:e[9]||(e[9]=s=>mt()),class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-xs sm:text-sm font-medium transition-colors border border-input bg-background hover:bg-accent h-9 sm:h-10 px-3 sm:px-4 py-2"},[a(l(At),{class:"w-4 h-4"}),e[73]||(e[73]=t("span",null,"Transférer",-1))])):m("",!0),t("button",{onClick:e[10]||(e[10]=s=>Re()),class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-xs sm:text-sm font-medium transition-colors bg-primary text-primary-foreground hover:bg-primary/90 h-9 sm:h-10 px-3 sm:px-4 py-2"},[a(l(de),{class:"w-4 h-4"}),e[74]||(e[74]=t("span",null,"Nouveau sous-compte",-1))])])]),fe.value?(r(),n("div",ws,[...e[76]||(e[76]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"},null,-1)])])):I.value.length===0?(r(),n("div",hs,[a(l(Ie),{class:"w-12 h-12 text-muted-foreground mb-4"}),e[77]||(e[77]=t("p",{class:"text-lg font-medium"},"Aucun sous-compte",-1)),e[78]||(e[78]=t("p",{class:"text-sm text-muted-foreground mt-1"},"Créez votre premier sous-compte",-1))])):(r(),n("div",ks,[(r(!0),n(_,null,C(I.value,s=>(r(),n("div",{key:s.id,class:$(["rounded-lg border bg-card shadow-sm hover:shadow-md transition-shadow",{"ring-2 ring-primary/30":s.is_default}])},[t("div",_s,[t("div",Cs,[t("div",js,[t("div",As,[t("h3",Ss,i(s.name),1),s.is_default?(r(),ze(l(St),{key:0,class:"w-4 h-4 text-primary flex-shrink-0",title:"Compte principal"})):m("",!0)]),t("p",$s,i(s.email),1)]),t("div",Ms,[t("span",{class:$(["text-xs px-2 py-0.5 rounded-full font-medium",{"bg-purple-100 text-purple-700":s.role==="admin","bg-blue-100 text-blue-700":s.role==="manager","bg-teal-100 text-teal-700":s.role==="sender","bg-gray-100 text-gray-700":s.role==="viewer"}])},i(He[s.role]||s.role),3),t("span",{class:$(["text-xs px-2 py-0.5 rounded-full font-medium",{"bg-green-100 text-green-700":s.status==="active","bg-red-100 text-red-700":s.status==="suspended","bg-yellow-100 text-yellow-700":s.status==="inactive"}])},i(je[s.status]||s.status),3)])]),t("div",Us,[t("div",null,[e[79]||(e[79]=t("p",{class:"text-xs text-muted-foreground"},"Solde (FCFA)",-1)),t("p",Vs,i(S(s.sms_credits)),1)]),t("div",null,[e[80]||(e[80]=t("p",{class:"text-xs text-muted-foreground"},"Consommé ce mois",-1)),t("p",Es,i(S(s.budget_used)),1)]),t("div",null,[e[81]||(e[81]=t("p",{class:"text-xs text-muted-foreground"},"Budget mensuel",-1)),t("p",Ns,i(s.monthly_budget?S(s.monthly_budget)+" FCFA":"Illimité"),1)]),t("div",null,[e[82]||(e[82]=t("p",{class:"text-xs text-muted-foreground"},"SMS envoyés",-1)),t("p",Fs,i(S(s.sms_used)),1)])]),t("div",Rs,[t("button",{onClick:d=>Re(s),class:"flex-1 inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border px-2 py-1.5 hover:bg-accent"},[a(l(ae),{class:"w-3 h-3"}),e[83]||(e[83]=g(" Modifier ",-1))],8,qs),t("button",{onClick:d=>at(s),class:"flex-1 inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border px-2 py-1.5 hover:bg-accent"},[a(l(Ge),{class:"w-3 h-3"}),e[84]||(e[84]=g(" Crédits ",-1))],8,zs),s.status==="active"?(r(),n("button",{key:0,onClick:d=>ct(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-destructive text-destructive px-2 py-1.5 hover:bg-destructive/10"},[a(l(Ae),{class:"w-3 h-3"})],8,Ls)):(r(),n("button",{key:1,onClick:d=>ft(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-success text-success px-2 py-1.5 hover:bg-success/10"},[a(l(Se),{class:"w-3 h-3"})],8,Ts)),s.is_default?m("",!0):(r(),n("button",{key:2,onClick:d=>bt(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-destructive text-destructive px-2 py-1.5 hover:bg-destructive/10"},[a(l($e),{class:"w-3 h-3"})],8,Is))])])],2))),128))]))])):m("",!0),y.value==="custom-roles"&&l(f).isSuperAdmin?(r(),n("div",Bs,[t("div",Gs,[e[86]||(e[86]=t("p",{class:"text-sm text-muted-foreground"}," Créez et gérez des rôles personnalisés avec des permissions spécifiques ",-1)),t("button",{onClick:e[11]||(e[11]=s=>Fe()),class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-xs sm:text-sm font-medium transition-colors bg-primary text-primary-foreground hover:bg-primary/90 h-9 sm:h-10 px-3 sm:px-4 py-2"},[a(l(de),{class:"w-4 h-4"}),e[85]||(e[85]=t("span",null,"Nouveau rôle",-1))])]),be.value?(r(),n("div",Ds,[...e[87]||(e[87]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"},null,-1)])])):ye.value.length===0?(r(),n("div",Ps,[a(l(Pe),{class:"w-12 h-12 text-muted-foreground mb-4"}),e[88]||(e[88]=t("p",{class:"text-lg font-medium"},"Aucun rôle personnalisé",-1)),e[89]||(e[89]=t("p",{class:"text-sm text-muted-foreground mt-1"},"Créez votre premier rôle personnalisé",-1))])):(r(),n("div",Xs,[(r(!0),n(_,null,C(ye.value,s=>(r(),n("div",{key:s.id,class:"rounded-lg border bg-card shadow-sm"},[t("div",Hs,[t("div",Zs,[t("h3",Js,i(s.name),1),s.is_system?(r(),n("span",Ks,"Système")):m("",!0)]),t("p",Os,i(s.description||"Aucune description"),1),t("div",Qs,[(r(!0),n(_,null,C((s.permissions||[]).slice(0,4),d=>(r(),n("span",{key:d,class:"text-xs px-1.5 py-0.5 rounded bg-primary/10 text-primary"},i(d),1))),128)),(s.permissions||[]).length>4?(r(),n("span",Ws," +"+i(s.permissions.length-4),1)):m("",!0)]),t("div",Ys,[s.is_system?m("",!0):(r(),n("button",{key:0,onClick:d=>Fe(s),class:"flex-1 inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border px-2 py-1.5 hover:bg-accent"},[a(l(ae),{class:"w-3 h-3"}),e[90]||(e[90]=g(" Modifier ",-1))],8,eo)),t("button",{onClick:d=>lt(s),class:"flex-1 inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border px-2 py-1.5 hover:bg-accent"},[a(l(jt),{class:"w-3 h-3"}),e[91]||(e[91]=g(" Dupliquer ",-1))],8,to),!s.is_system&&(s.users_count||0)===0?(r(),n("button",{key:1,onClick:d=>it(s),class:"inline-flex items-center justify-center gap-1 text-xs font-medium rounded-md border border-destructive text-destructive px-2 py-1.5 hover:bg-destructive/10"},[a(l($e),{class:"w-3 h-3"})],8,so)):m("",!0)])])]))),128))]))])):m("",!0),y.value==="system-roles"?(r(),n("div",oo,[t("div",ro,[t("div",no,[a(l(De),{class:"w-5 h-5 text-muted-foreground"}),e[92]||(e[92]=t("p",{class:"text-sm text-muted-foreground"}," Les rôles système sont prédéfinis et ne peuvent pas être modifiés ",-1))])]),ve.value?(r(),n("div",lo,[...e[93]||(e[93]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"},null,-1)])])):(r(),n("div",io,[(r(!0),n(_,null,C(Ue.value,s=>(r(),n("div",{key:s.value,class:"rounded-lg border bg-card shadow-sm"},[t("div",ao,[t("div",uo,[t("h3",mo,i(s.label),1),t("span",po,"Niveau "+i(s.level),1)]),t("p",co,i(s.description),1),t("div",fo,[e[94]||(e[94]=t("p",{class:"text-xs font-medium mb-1"},"Permissions par défaut :",-1)),t("div",bo,[(r(!0),n(_,null,C(s.default_permissions,d=>(r(),n("span",{key:d,class:"text-xs px-1.5 py-0.5 rounded bg-primary/10 text-primary"},i(d),1))),128))])])])]))),128))]))])):m("",!0),y.value==="permissions"?(r(),n("div",vo,[t("div",xo,[t("div",go,[a(l(De),{class:"w-5 h-5 text-muted-foreground"}),e[95]||(e[95]=t("p",{class:"text-sm text-muted-foreground"}," Liste de toutes les permissions disponibles dans le système ",-1))])]),xe.value?(r(),n("div",yo,[...e[96]||(e[96]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"},null,-1)])])):(r(),n("div",wo,[(r(!0),n(_,null,C(we.value,(s,d)=>(r(),n("div",{key:d,class:"rounded-lg border bg-card shadow-sm"},[t("div",ho,[t("h3",ko,i(d),1),t("div",_o,[(r(!0),n(_,null,C(s,k=>(r(),n("div",{key:k.value,class:"flex items-start gap-2 p-2 rounded-md bg-muted/50"},[a(l(Be),{class:"w-4 h-4 text-primary flex-shrink-0 mt-0.5"}),t("div",null,[t("p",Co,i(k.label),1),t("p",jo,i(k.value),1)])]))),128))])])]))),128))]))])):m("",!0),he.value?(r(),n("div",Ao,[t("div",{class:"absolute inset-0 bg-black/50",onClick:re}),t("div",So,[t("div",$o,[t("h2",Mo,i(F.value?"Modifier le compte":"Nouveau compte"),1),t("button",{onClick:re,class:"hover:bg-accent rounded-full p-1"},[a(l(L),{class:"w-5 h-5"})])]),t("form",{onSubmit:z(Oe,["prevent"]),class:"p-4 space-y-4"},[t("div",Uo,[t("div",null,[e[97]||(e[97]=t("label",{class:"text-sm font-medium"},"Nom du compte *",-1)),p(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>x.value.name=s),type:"text",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"Nom de l'entreprise"},null,512),[[b,x.value.name]])]),t("div",null,[e[98]||(e[98]=t("label",{class:"text-sm font-medium"},"Email *",-1)),p(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>x.value.email=s),type:"email",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"contact@entreprise.com"},null,512),[[b,x.value.email]])]),t("div",null,[e[99]||(e[99]=t("label",{class:"text-sm font-medium"},"Téléphone",-1)),p(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>x.value.phone=s),type:"text",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"+229 XX XX XX XX"},null,512),[[b,x.value.phone]])]),t("div",null,[e[100]||(e[100]=t("label",{class:"text-sm font-medium"},"N° Entreprise (SIRET, etc.)",-1)),p(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>x.value.company_id=s),type:"text",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,x.value.company_id]])]),t("div",null,[e[101]||(e[101]=t("label",{class:"text-sm font-medium"},"Crédits SMS initiaux",-1)),p(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>x.value.sms_credits=s),type:"number",min:"0",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,x.value.sms_credits,void 0,{number:!0}]])]),t("div",null,[e[102]||(e[102]=t("label",{class:"text-sm font-medium"},"Budget mensuel",-1)),p(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>x.value.monthly_budget=s),type:"number",min:"0",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"Laisser vide pour illimité"},null,512),[[b,x.value.monthly_budget,void 0,{number:!0}]])])]),F.value?m("",!0):(r(),n("div",Vo,[e[106]||(e[106]=t("h3",{class:"text-sm font-semibold mb-3"},"Administrateur du compte",-1)),t("div",Eo,[t("div",null,[e[103]||(e[103]=t("label",{class:"text-sm font-medium"},"Nom *",-1)),p(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>x.value.admin_name=s),type:"text",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,x.value.admin_name]])]),t("div",null,[e[104]||(e[104]=t("label",{class:"text-sm font-medium"},"Email *",-1)),p(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>x.value.admin_email=s),type:"email",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,x.value.admin_email]])]),t("div",No,[e[105]||(e[105]=t("label",{class:"text-sm font-medium"},"Mot de passe *",-1)),p(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>x.value.admin_password=s),type:"password",required:"",minlength:"8",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,x.value.admin_password]])])])])),t("div",Fo,[t("button",{type:"button",onClick:re,class:"inline-flex items-center justify-center rounded-md text-sm font-medium border border-input bg-background hover:bg-accent h-10 px-4"}," Annuler "),t("button",{type:"submit",disabled:K.value,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 disabled:opacity-50"},[K.value?(r(),n("div",qo)):m("",!0),g(" "+i(F.value?"Mettre à jour":"Créer le compte"),1)],8,Ro)])],32)])])):m("",!0),B.value?(r(),n("div",zo,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[21]||(e[21]=s=>B.value=!1)}),t("div",Lo,[t("div",To,[e[107]||(e[107]=t("h2",{class:"text-lg font-semibold"},"Ajouter des crédits",-1)),t("button",{onClick:e[22]||(e[22]=s=>B.value=!1),class:"hover:bg-accent rounded-full p-1"},[a(l(L),{class:"w-5 h-5"})])]),t("form",{onSubmit:z(We,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[e[109]||(e[109]=t("label",{class:"text-sm font-medium"},"Compte",-1)),t("p",Io,i(M.value.accountName),1),t("p",Bo,[e[108]||(e[108]=g("Solde actuel: ",-1)),t("span",Go,i(S(M.value.currentCredits)),1)])]),t("div",null,[e[110]||(e[110]=t("label",{class:"text-sm font-medium"},"Montant à ajouter *",-1)),p(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>M.value.amount=s),type:"number",min:"1",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,M.value.amount,void 0,{number:!0}]])]),t("div",null,[e[111]||(e[111]=t("label",{class:"text-sm font-medium"},"Note (optionnel)",-1)),p(t("textarea",{"onUpdate:modelValue":e[24]||(e[24]=s=>M.value.note=s),rows:"2",class:"mt-1 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm resize-none"},null,512),[[b,M.value.note]])]),t("div",Do,[t("button",{type:"button",onClick:e[25]||(e[25]=s=>B.value=!1),class:"inline-flex items-center justify-center rounded-md text-sm font-medium border border-input bg-background hover:bg-accent h-10 px-4"}," Annuler "),t("button",{type:"submit",disabled:Y.value,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-success text-success-foreground hover:bg-success/90 h-10 px-4 disabled:opacity-50"},[Y.value?(r(),n("div",Xo)):m("",!0),e[112]||(e[112]=g(" Ajouter ",-1))],8,Po)])],32)])])):m("",!0),ke.value?(r(),n("div",Ho,[t("div",{class:"absolute inset-0 bg-black/50",onClick:ne}),t("div",Zo,[t("div",Jo,[t("h2",Ko,i(R.value?"Modifier l'utilisateur":"Nouvel utilisateur"),1),t("button",{onClick:ne,class:"hover:bg-accent rounded-full p-1"},[a(l(L),{class:"w-5 h-5"})])]),t("form",{onSubmit:z(tt,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[e[113]||(e[113]=t("label",{class:"text-sm font-medium"},"Nom *",-1)),p(t("input",{"onUpdate:modelValue":e[26]||(e[26]=s=>j.value.name=s),type:"text",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,j.value.name]])]),t("div",null,[e[114]||(e[114]=t("label",{class:"text-sm font-medium"},"Email *",-1)),p(t("input",{"onUpdate:modelValue":e[27]||(e[27]=s=>j.value.email=s),type:"email",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,j.value.email]])]),R.value?m("",!0):(r(),n("div",Oo,[e[115]||(e[115]=t("label",{class:"text-sm font-medium"},"Mot de passe *",-1)),p(t("input",{"onUpdate:modelValue":e[28]||(e[28]=s=>j.value.password=s),type:"password",required:"",minlength:"8",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,j.value.password]])])),l(f).isSuperAdmin?(r(),n("div",Qo,[e[117]||(e[117]=t("label",{class:"text-sm font-medium"},"Compte",-1)),p(t("select",{"onUpdate:modelValue":e[29]||(e[29]=s=>j.value.account_id=s),class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[e[116]||(e[116]=t("option",{value:""},"Aucun compte",-1)),(r(!0),n(_,null,C(T.value,s=>(r(),n("option",{key:s.id,value:s.id},i(s.name),9,Wo))),128))],512),[[H,j.value.account_id]])])):m("",!0),t("div",null,[e[118]||(e[118]=t("label",{class:"text-sm font-medium"},"Rôle *",-1)),p(t("select",{"onUpdate:modelValue":e[30]||(e[30]=s=>j.value.role=s),required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(r(!0),n(_,null,C(Ve.value,s=>(r(),n("option",{key:s.value,value:s.value},i(s.label),9,Yo))),128))],512),[[H,j.value.role]])]),t("div",er,[t("button",{type:"button",onClick:ne,class:"inline-flex items-center justify-center rounded-md text-sm font-medium border border-input bg-background hover:bg-accent h-10 px-4"}," Annuler "),t("button",{type:"submit",disabled:O.value,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 disabled:opacity-50"},[O.value?(r(),n("div",sr)):m("",!0),g(" "+i(R.value?"Mettre à jour":"Créer"),1)],8,tr)])],32)])])):m("",!0),_e.value?(r(),n("div",or,[t("div",{class:"absolute inset-0 bg-black/50",onClick:le}),t("div",rr,[t("div",nr,[t("h2",lr,i(P.value?"Modifier le rôle":"Nouveau rôle personnalisé"),1),t("button",{onClick:le,class:"hover:bg-accent rounded-full p-1"},[a(l(L),{class:"w-5 h-5"})])]),t("form",{onSubmit:z(nt,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[e[119]||(e[119]=t("label",{class:"text-sm font-medium"},"Nom du rôle *",-1)),p(t("input",{"onUpdate:modelValue":e[31]||(e[31]=s=>U.value.name=s),type:"text",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,U.value.name]])]),t("div",null,[e[120]||(e[120]=t("label",{class:"text-sm font-medium"},"Description",-1)),p(t("textarea",{"onUpdate:modelValue":e[32]||(e[32]=s=>U.value.description=s),rows:"2",class:"mt-1 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm resize-none"},null,512),[[b,U.value.description]])]),t("div",null,[e[121]||(e[121]=t("label",{class:"text-sm font-medium mb-2 block"},"Permissions",-1)),t("div",ir,[(r(!0),n(_,null,C(we.value,(s,d)=>(r(),n("div",{key:d,class:"mb-4 last:mb-0"},[t("p",dr,i(d),1),t("div",ar,[(r(!0),n(_,null,C(s,k=>(r(),n("label",{key:k.value,class:"flex items-center gap-2 p-2 rounded hover:bg-accent cursor-pointer"},[p(t("input",{type:"checkbox",value:k.value,"onUpdate:modelValue":e[33]||(e[33]=vt=>U.value.permissions=vt),class:"rounded"},null,8,ur),[[kt,U.value.permissions]]),t("span",mr,i(k.label),1)]))),128))])]))),128))])]),t("div",pr,[t("button",{type:"button",onClick:le,class:"inline-flex items-center justify-center rounded-md text-sm font-medium border border-input bg-background hover:bg-accent h-10 px-4"}," Annuler "),t("button",{type:"submit",disabled:W.value,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 disabled:opacity-50"},[W.value?(r(),n("div",fr)):m("",!0),g(" "+i(P.value?"Mettre à jour":"Créer"),1)],8,cr)])],32)])])):m("",!0),Ce.value?(r(),n("div",br,[t("div",{class:"absolute inset-0 bg-black/50",onClick:ie}),t("div",vr,[t("div",xr,[t("h2",gr,i(V.value?"Modifier le sous-compte":"Nouveau sous-compte"),1),t("button",{onClick:ie,class:"hover:bg-accent rounded-full p-1"},[a(l(L),{class:"w-5 h-5"})])]),t("form",{onSubmit:z(dt,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[e[122]||(e[122]=t("label",{class:"text-sm font-medium"},"Nom *",-1)),p(t("input",{"onUpdate:modelValue":e[34]||(e[34]=s=>c.value.name=s),type:"text",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"Nom du sous-compte"},null,512),[[b,c.value.name]])]),t("div",null,[e[123]||(e[123]=t("label",{class:"text-sm font-medium"},"Email *",-1)),p(t("input",{"onUpdate:modelValue":e[35]||(e[35]=s=>c.value.email=s),type:"email",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"email@exemple.com"},null,512),[[b,c.value.email]])]),V.value?(r(),n("div",wr,[e[125]||(e[125]=t("label",{class:"text-sm font-medium"},"Nouveau mot de passe (optionnel)",-1)),p(t("input",{"onUpdate:modelValue":e[37]||(e[37]=s=>c.value.password=s),type:"password",minlength:"8",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"Laisser vide pour ne pas changer"},null,512),[[b,c.value.password]])])):(r(),n("div",yr,[e[124]||(e[124]=t("label",{class:"text-sm font-medium"},"Mot de passe *",-1)),p(t("input",{"onUpdate:modelValue":e[36]||(e[36]=s=>c.value.password=s),type:"password",required:"",minlength:"8",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,c.value.password]])])),t("div",null,[e[127]||(e[127]=t("label",{class:"text-sm font-medium"},"Rôle *",-1)),p(t("select",{"onUpdate:modelValue":e[38]||(e[38]=s=>c.value.role=s),required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[...e[126]||(e[126]=[t("option",{value:"admin"},"Administrateur",-1),t("option",{value:"manager"},"Gestionnaire",-1),t("option",{value:"sender"},"Expéditeur",-1),t("option",{value:"viewer"},"Lecteur",-1)])],512),[[H,c.value.role]])]),V.value?m("",!0):(r(),n("div",hr,[e[128]||(e[128]=t("label",{class:"text-sm font-medium"},"Crédits initiaux (FCFA)",-1)),p(t("input",{"onUpdate:modelValue":e[39]||(e[39]=s=>c.value.sms_credits=s),type:"number",min:"0",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,c.value.sms_credits,void 0,{number:!0}]])])),t("div",null,[e[129]||(e[129]=t("label",{class:"text-sm font-medium"},"Budget mensuel (FCFA)",-1)),p(t("input",{"onUpdate:modelValue":e[40]||(e[40]=s=>c.value.monthly_budget=s),type:"number",min:"0",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",placeholder:"Laisser vide pour illimité"},null,512),[[b,c.value.monthly_budget,void 0,{number:!0}]])]),t("div",kr,[t("button",{type:"button",onClick:ie,class:"inline-flex items-center justify-center rounded-md text-sm font-medium border border-input bg-background hover:bg-accent h-10 px-4"}," Annuler "),t("button",{type:"submit",disabled:Q.value,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 disabled:opacity-50"},[Q.value?(r(),n("div",Cr)):m("",!0),g(" "+i(V.value?"Mettre à jour":"Créer"),1)],8,_r)])],32)])])):m("",!0),G.value?(r(),n("div",jr,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[41]||(e[41]=s=>G.value=!1)}),t("div",Ar,[t("div",Sr,[e[130]||(e[130]=t("h2",{class:"text-lg font-semibold"},"Ajouter des crédits",-1)),t("button",{onClick:e[42]||(e[42]=s=>G.value=!1),class:"hover:bg-accent rounded-full p-1"},[a(l(L),{class:"w-5 h-5"})])]),t("form",{onSubmit:z(ut,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[e[132]||(e[132]=t("label",{class:"text-sm font-medium"},"Sous-compte",-1)),t("p",$r,i(E.value.subAccountName),1),t("p",Mr,[e[131]||(e[131]=g("Solde actuel: ",-1)),t("span",Ur,i(S(E.value.currentCredits))+" FCFA",1)])]),t("div",null,[e[133]||(e[133]=t("label",{class:"text-sm font-medium"},"Montant à ajouter (FCFA) *",-1)),p(t("input",{"onUpdate:modelValue":e[43]||(e[43]=s=>E.value.amount=s),type:"number",min:"1",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,E.value.amount,void 0,{number:!0}]])]),t("div",Vr,[t("button",{type:"button",onClick:e[44]||(e[44]=s=>G.value=!1),class:"inline-flex items-center justify-center rounded-md text-sm font-medium border border-input bg-background hover:bg-accent h-10 px-4"}," Annuler "),t("button",{type:"submit",disabled:ee.value,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-success text-success-foreground hover:bg-success/90 h-10 px-4 disabled:opacity-50"},[ee.value?(r(),n("div",Nr)):m("",!0),e[134]||(e[134]=g(" Ajouter ",-1))],8,Er)])],32)])])):m("",!0),D.value?(r(),n("div",Fr,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[45]||(e[45]=s=>D.value=!1)}),t("div",Rr,[t("div",qr,[e[135]||(e[135]=t("h2",{class:"text-lg font-semibold"},"Transférer des crédits",-1)),t("button",{onClick:e[46]||(e[46]=s=>D.value=!1),class:"hover:bg-accent rounded-full p-1"},[a(l(L),{class:"w-5 h-5"})])]),t("form",{onSubmit:z(pt,["prevent"]),class:"p-4 space-y-4"},[t("div",null,[e[137]||(e[137]=t("label",{class:"text-sm font-medium"},"Depuis *",-1)),p(t("select",{"onUpdate:modelValue":e[47]||(e[47]=s=>A.value.from_sub_account_id=s),required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[e[136]||(e[136]=t("option",{value:0,disabled:""},"Choisir un sous-compte",-1)),(r(!0),n(_,null,C(I.value,s=>(r(),n("option",{key:s.id,value:s.id},i(s.name)+" ("+i(S(s.sms_credits))+" FCFA) ",9,zr))),128))],512),[[H,A.value.from_sub_account_id,void 0,{number:!0}]])]),t("div",null,[e[139]||(e[139]=t("label",{class:"text-sm font-medium"},"Vers *",-1)),p(t("select",{"onUpdate:modelValue":e[48]||(e[48]=s=>A.value.to_sub_account_id=s),required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[e[138]||(e[138]=t("option",{value:0,disabled:""},"Choisir un sous-compte",-1)),(r(!0),n(_,null,C(I.value.filter(s=>s.id!==A.value.from_sub_account_id),s=>(r(),n("option",{key:s.id,value:s.id},i(s.name)+" ("+i(S(s.sms_credits))+" FCFA) ",9,Lr))),128))],512),[[H,A.value.to_sub_account_id,void 0,{number:!0}]])]),t("div",null,[e[140]||(e[140]=t("label",{class:"text-sm font-medium"},"Montant (FCFA) *",-1)),p(t("input",{"onUpdate:modelValue":e[49]||(e[49]=s=>A.value.amount=s),type:"number",min:"1",required:"",class:"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[b,A.value.amount,void 0,{number:!0}]])]),t("div",Tr,[t("button",{type:"button",onClick:e[50]||(e[50]=s=>D.value=!1),class:"inline-flex items-center justify-center rounded-md text-sm font-medium border border-input bg-background hover:bg-accent h-10 px-4"}," Annuler "),t("button",{type:"submit",disabled:te.value||!A.value.from_sub_account_id||!A.value.to_sub_account_id||A.value.amount<=0,class:"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 disabled:opacity-50"},[te.value?(r(),n("div",Br)):m("",!0),e[141]||(e[141]=g(" Transférer ",-1))],8,Ir)])],32)])])):m("",!0)])]),_:1}))}});export{tn as default};
