import{o as i,c as l,b as e,d as fe,r as a,k as y,l as me,m as J,n as ve,p as c,q as d,t as n,f as w,v as D,A as H,F as R,x as Z,s as pe,w as G,g as v}from"./main-B3v6XqtN.js";import{_ as ge,h as be,a as xe,i as he}from"./api-CoV-pdeV.js";import{c as $}from"./contactService-7wC89qWu.js";import{a as E,b as M,s as ye}from"./notifications-CHQAjgV4.js";import{r as we}from"./PencilIcon-FYkSLXZD.js";import{r as K}from"./TrashIcon-PIoZoVuh.js";import{r as O}from"./XMarkIcon-CVe__6O9.js";import{r as ke}from"./ExclamationTriangleIcon-Bl1fQc_9.js";function Q(N,x){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function _e(N,x){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Ce(N,x){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}const je={class:"p-8"},Ve={class:"mb-8 flex items-center justify-between"},Ae={class:"flex gap-3"},$e={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Ee={class:"rounded-lg border bg-card p-4"},Me={class:"text-2xl font-bold mt-1"},Se={class:"rounded-lg border bg-card p-4"},Ie={class:"text-2xl font-bold mt-1 text-success"},ze={class:"rounded-lg border bg-card p-4"},De={class:"text-2xl font-bold mt-1 text-muted-foreground"},Ne={class:"rounded-lg border bg-card p-4"},Fe={class:"text-2xl font-bold mt-1 text-primary"},Le={class:"rounded-lg border bg-card shadow-sm mb-6 p-6"},Ue={class:"flex gap-4"},Te={class:"flex-1"},Be={class:"rounded-lg border bg-card shadow-sm"},qe={key:0,class:"flex items-center justify-center py-12"},He={key:1,class:"flex flex-col items-center justify-center py-12"},Re={key:2,class:"overflow-x-auto"},Ze={class:"w-full"},Ge={class:"p-4 font-medium"},Pe={class:"p-4 text-sm text-muted-foreground"},Je={class:"p-4 text-sm"},Ke={class:"p-4"},Oe={class:"p-4 text-sm text-muted-foreground"},Qe={class:"p-4"},We={class:"flex gap-2"},Xe=["onClick"],Ye=["onClick"],et={class:"flex items-center justify-between mt-6"},tt={class:"text-sm text-muted-foreground"},st={class:"bg-background rounded-lg shadow-lg w-full max-w-md p-6"},ot={class:"flex items-center justify-between mb-6"},nt={class:"text-xl font-bold"},it={class:"space-y-2"},lt={class:"space-y-2"},rt={class:"space-y-2"},at={class:"space-y-2"},dt={class:"flex gap-3 pt-4 border-t"},ut=["disabled"],ct={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},ft={class:"bg-background rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6"},mt={class:"flex items-center justify-between mb-6"},vt={key:0,class:"space-y-6"},pt={class:"border-2 border-dashed rounded-lg p-8 text-center"},gt={key:0,class:"p-4 bg-muted rounded-lg"},bt={class:"flex items-center justify-between"},xt={class:"flex items-center gap-3"},ht={class:"font-medium"},yt={class:"text-xs text-muted-foreground"},wt={class:"p-4 bg-primary/10 rounded-lg border border-primary/20"},kt={class:"flex items-start gap-3"},_t={class:"flex justify-end gap-3 pt-4 border-t"},Ct=["disabled"],jt={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Vt={key:1,class:"space-y-6"},At={class:"p-4 bg-muted/50 rounded-lg"},$t={class:"text-xs text-muted-foreground"},Et={class:"space-y-4"},Mt={class:"p-3 bg-muted rounded-lg"},St={class:"font-medium"},It={class:"text-xs text-muted-foreground mt-1"},zt={class:"space-y-2"},Dt=["onUpdate:modelValue"],Nt={class:"p-4 bg-warning/10 rounded-lg border border-warning/20"},Ft={class:"flex items-start gap-3"},Lt={class:"flex justify-between gap-3 pt-4 border-t"},Ut=["disabled"],Tt={key:2,class:"space-y-6"},Bt={class:"p-4 bg-muted/50 rounded-lg"},qt={class:"text-xs text-muted-foreground"},Ht={class:"rounded-lg border overflow-hidden max-h-96 overflow-y-auto"},Rt={class:"w-full"},Zt={class:"p-3 text-sm"},Gt={class:"p-3 text-sm text-muted-foreground"},Pt={class:"p-3 text-sm"},Jt={key:0,class:"text-center text-sm text-muted-foreground"},Kt={class:"flex justify-between gap-3 pt-4 border-t"},Ot=["disabled"],Qt={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},is=fe({__name:"Contacts",setup(N){const x=a(""),S=a("all"),F=a(!1),L=a(!1),U=a(!1),f=a([]),T=a(!1),C=a(!1),P=a(""),u=a({name:"",email:"",phone:"",status:"active"}),h=a(null),p=a(1),m=a(null),j=a([]),k=a([]),g=a({}),_=a(!1),V=a(!1),W=a(null),B=y(()=>{let o=f.value;if(x.value){const t=x.value.toLowerCase();o=o.filter(s=>s.name.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||s.phone.includes(t))}return S.value!=="all"&&(o=o.filter(t=>t.status===S.value)),o}),X=y(()=>f.value.length),Y=y(()=>f.value.filter(o=>o.status==="active").length),ee=y(()=>f.value.filter(o=>o.status==="inactive").length),te=y(()=>{const o=new Date;return o.setDate(o.getDate()-30),f.value.filter(t=>new Date(t.created_at||"")>=o).length}),se=y(()=>{const o=Object.values(g.value).filter(t=>t);return o.includes("name")&&o.includes("email")&&o.includes("phone")}),b=y(()=>k.value.map(o=>{const t={status:"active"};return j.value.forEach((s,r)=>{const A=g.value[s];A&&(t[A]=o[r])}),t}).filter(o=>o.name&&o.email&&o.phone));function oe(o){return o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}async function q(){T.value=!0,P.value="";try{const o=await $.getAll();console.log("Contacts loaded:",o),f.value=o}catch(o){P.value=o.message||"Erreur lors du chargement des contacts",console.error("Error loading contacts:",o)}finally{T.value=!1}}function ne(){h.value=null,u.value={name:"",email:"",phone:"",status:"active"},F.value=!0}function ie(o){h.value=o,u.value={name:o.name,email:o.email,phone:o.phone,status:o.status},L.value=!0}function I(){F.value=!1,L.value=!1,h.value=null}async function le(){var o,t;C.value=!0;try{h.value?(await $.update(h.value.id,u.value),E("Contact modifié avec succès")):(await $.create(u.value),E("Contact ajouté avec succès")),I(),await q()}catch(s){M(((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||s.message||"Erreur lors de l'enregistrement")}finally{C.value=!1}}async function re(o){if(await ye("Supprimer le contact ?",`Êtes-vous sûr de vouloir supprimer ${o.name} ?`))try{await $.delete(o.id),E("Contact supprimé avec succès"),f.value=f.value.filter(s=>s.id!==o.id)}catch(s){M(s.message||"Erreur lors de la suppression"),console.error("Error deleting contact:",s)}}function z(){U.value=!1,p.value=1,m.value=null,j.value=[],k.value=[],g.value={}}function ae(o){const t=o.target;t.files&&t.files[0]&&(m.value=t.files[0])}async function de(){if(m.value){_.value=!0;try{const t=(await m.value.text()).split(`
`).filter(s=>s.trim());if(t.length===0){M("Le fichier CSV est vide"),_.value=!1;return}j.value=t[0].split(",").map(s=>s.trim().replace(/"/g,"")),k.value=t.slice(1,101).map(s=>s.split(",").map(r=>r.trim().replace(/"/g,""))),j.value.forEach(s=>{const r=s.toLowerCase();r.includes("nom")||r.includes("name")?g.value[s]="name":r.includes("email")||r.includes("mail")?g.value[s]="email":(r.includes("tel")||r.includes("phone")||r.includes("mobile"))&&(g.value[s]="phone")}),p.value=2}catch(o){M("Erreur lors de la lecture du fichier: "+o.message)}finally{_.value=!1}}}async function ue(){if(b.value.length!==0){V.value=!0;try{let o=0,t=0;for(const s of b.value)try{await $.create(s),o++}catch(r){t++,console.error("Error importing contact:",r)}t>0?E(`Importation terminée: ${o} contacts importés, ${t} erreurs`):E(`${o} contacts importés avec succès !`),await q(),z()}catch(o){M(o.message||"Erreur lors de l'importation")}finally{V.value=!1}}}return me(()=>{q()}),(o,t)=>(i(),J(ge,null,{default:ve(()=>[e("div",je,[e("div",Ve,[t[14]||(t[14]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"Contacts"),e("p",{class:"text-muted-foreground mt-2"},"Gérez votre liste de contacts")],-1)),e("div",Ae,[e("button",{onClick:t[0]||(t[0]=s=>U.value=!0),class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"},[c(d(Q),{class:"w-4 h-4"}),t[12]||(t[12]=e("span",null,"Importer",-1))]),e("button",{onClick:ne,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[c(d(be),{class:"w-4 h-4"}),t[13]||(t[13]=e("span",null,"Nouveau contact",-1))])])]),e("div",$e,[e("div",Ee,[t[15]||(t[15]=e("div",{class:"text-sm text-muted-foreground"},"Total contacts",-1)),e("div",Me,n(X.value),1)]),e("div",Se,[t[16]||(t[16]=e("div",{class:"text-sm text-muted-foreground"},"Actifs",-1)),e("div",Ie,n(Y.value),1)]),e("div",ze,[t[17]||(t[17]=e("div",{class:"text-sm text-muted-foreground"},"Inactifs",-1)),e("div",De,n(ee.value),1)]),e("div",Ne,[t[18]||(t[18]=e("div",{class:"text-sm text-muted-foreground"},"Nouveaux (30j)",-1)),e("div",Fe,n(te.value),1)])]),e("div",Le,[e("div",Ue,[e("div",Te,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),type:"text",placeholder:"Rechercher par nom, email ou téléphone...",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[D,x.value]])]),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>S.value=s),class:"flex h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[...t[19]||(t[19]=[e("option",{value:"all"},"Tous les statuts",-1),e("option",{value:"active"},"Actifs",-1),e("option",{value:"inactive"},"Inactifs",-1)])],512),[[H,S.value]])])]),e("div",Be,[T.value?(i(),l("div",qe,[...t[20]||(t[20]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):B.value.length===0?(i(),l("div",He,[c(d(xe),{class:"w-16 h-16 text-muted-foreground mb-4"}),t[21]||(t[21]=e("p",{class:"text-lg font-medium"},"Aucun contact trouvé",-1)),t[22]||(t[22]=e("p",{class:"text-sm text-muted-foreground mt-1"},"Commencez par ajouter ou importer des contacts",-1))])):(i(),l("div",Re,[e("table",Ze,[t[24]||(t[24]=e("thead",{class:"border-b bg-muted/50"},[e("tr",null,[e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},[e("input",{type:"checkbox",class:"rounded border-gray-300"})]),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Nom"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Email"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Téléphone"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Statut"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Date d'ajout"),e("th",{class:"h-12 px-4 text-left align-middle font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",null,[(i(!0),l(R,null,Z(B.value,s=>(i(),l("tr",{key:s.id,class:"border-b transition-colors hover:bg-muted/50"},[t[23]||(t[23]=e("td",{class:"p-4"},[e("input",{type:"checkbox",class:"rounded border-gray-300"})],-1)),e("td",Ge,n(s.name),1),e("td",Pe,n(s.email),1),e("td",Je,n(s.phone),1),e("td",Ke,[e("span",{class:pe(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold",s.status==="active"?"bg-success/10 text-success":"bg-muted text-muted-foreground"])},n(s.status==="active"?"Actif":"Inactif"),3)]),e("td",Oe,n(oe(s.created_at)),1),e("td",Qe,[e("div",We,[e("button",{onClick:r=>ie(s),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 w-8",title:"Modifier"},[c(d(we),{class:"w-4 h-4"})],8,Xe),e("button",{onClick:r=>re(s),class:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-destructive/10 hover:text-destructive h-8 w-8",title:"Supprimer"},[c(d(K),{class:"w-4 h-4"})],8,Ye)])])]))),128))])])]))]),e("div",et,[e("p",tt," Affichage de 1 à "+n(B.value.length)+" sur "+n(f.value.length)+" contacts ",1),t[25]||(t[25]=e("div",{class:"flex gap-2"},[e("button",{class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Précédent "),e("button",{class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"}," Suivant ")],-1))])]),F.value||L.value?(i(),l("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:G(I,["self"])},[e("div",st,[e("div",ot,[e("h2",nt,n(h.value?"Modifier le contact":"Nouveau contact"),1),e("button",{onClick:I,class:"hover:bg-accent rounded-full p-1"},[c(d(O),{class:"w-5 h-5"})])]),e("form",{onSubmit:G(le,["prevent"]),class:"space-y-4"},[e("div",it,[t[26]||(t[26]=e("label",{class:"text-sm font-medium"},"Nom complet *",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.value.name=s),type:"text",required:"",placeholder:"Jean Dupont",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[D,u.value.name]])]),e("div",lt,[t[27]||(t[27]=e("label",{class:"text-sm font-medium"},"Email *",-1)),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value.email=s),type:"email",required:"",placeholder:"jean.dupont@example.com",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[D,u.value.email]])]),e("div",rt,[t[28]||(t[28]=e("label",{class:"text-sm font-medium"},"Téléphone *",-1)),w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>u.value.phone=s),type:"tel",required:"",placeholder:"+237600000000",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[D,u.value.phone]])]),e("div",at,[t[30]||(t[30]=e("label",{class:"text-sm font-medium"},"Statut",-1)),w(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>u.value.status=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...t[29]||(t[29]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[H,u.value.status]])]),e("div",dt,[e("button",{type:"button",onClick:I,class:"flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Annuler "),e("button",{type:"submit",disabled:C.value,class:"flex-1 inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[C.value?(i(),l("div",ct)):v("",!0),e("span",null,n(C.value?"Enregistrement...":h.value?"Modifier":"Ajouter"),1)],8,ut)])],32)])])):v("",!0),U.value?(i(),l("div",{key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:G(z,["self"])},[e("div",ft,[e("div",mt,[t[31]||(t[31]=e("div",null,[e("h2",{class:"text-xl font-bold"},"Importer des contacts"),e("p",{class:"text-sm text-muted-foreground mt-1"},"Importez vos contacts depuis un fichier CSV")],-1)),e("button",{onClick:z,class:"hover:bg-accent rounded-full p-1"},[c(d(O),{class:"w-5 h-5"})])]),p.value===1?(i(),l("div",vt,[e("div",pt,[c(d(_e),{class:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),t[32]||(t[32]=e("div",{class:"space-y-2"},[e("p",{class:"text-sm font-medium"},"Glissez-déposez votre fichier CSV ici"),e("p",{class:"text-xs text-muted-foreground"},"ou cliquez pour sélectionner un fichier")],-1)),e("input",{type:"file",accept:".csv",onChange:ae,class:"hidden",ref_key:"fileInput",ref:W},null,544),e("button",{onClick:t[7]||(t[7]=s=>o.$refs.fileInput.click()),class:"mt-4 inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Sélectionner un fichier ")]),m.value?(i(),l("div",gt,[e("div",bt,[e("div",xt,[c(d(he),{class:"w-8 h-8 text-primary"}),e("div",null,[e("p",ht,n(m.value.name),1),e("p",yt,n((m.value.size/1024).toFixed(2))+" KB",1)])]),e("button",{onClick:t[8]||(t[8]=s=>m.value=null),class:"text-destructive hover:bg-destructive/10 rounded p-2"},[c(d(K),{class:"w-4 h-4"})])])])):v("",!0),e("div",wt,[e("div",kt,[c(d(Ce),{class:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),t[33]||(t[33]=e("div",{class:"text-sm"},[e("p",{class:"font-medium mb-2"},"Format du fichier CSV :"),e("ul",{class:"space-y-1 text-muted-foreground"},[e("li",null,"• La première ligne doit contenir les en-têtes de colonnes"),e("li",null,"• Les champs doivent être séparés par des virgules (,)"),e("li",null,"• Format recommandé : nom, email, téléphone"),e("li",null,"• Encodage UTF-8 recommandé")])],-1))])]),e("div",_t,[e("button",{onClick:z,class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Annuler "),e("button",{onClick:de,disabled:!m.value||_.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[_.value?(i(),l("div",jt)):v("",!0),e("span",null,n(_.value?"Analyse...":"Continuer"),1)],8,Ct)])])):v("",!0),p.value===2?(i(),l("div",Vt,[e("div",At,[t[34]||(t[34]=e("p",{class:"text-sm font-medium mb-2"},"Mappage des colonnes",-1)),e("p",$t," Associez les colonnes de votre fichier CSV aux champs du système. "+n(k.value.length)+" lignes détectées. ",1)]),e("div",Et,[(i(!0),l(R,null,Z(j.value,(s,r)=>{var A;return i(),l("div",{key:r,class:"grid grid-cols-2 gap-4 items-center"},[e("div",Mt,[t[35]||(t[35]=e("p",{class:"text-xs text-muted-foreground mb-1"},"Colonne CSV",-1)),e("p",St,n(s),1),e("p",It,"Exemple: "+n(((A=k.value[0])==null?void 0:A[r])||"-"),1)]),e("div",zt,[t[37]||(t[37]=e("label",{class:"text-xs text-muted-foreground"},"Associer à",-1)),w(e("select",{"onUpdate:modelValue":ce=>g.value[s]=ce,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...t[36]||(t[36]=[e("option",{value:""},"-- Ne pas importer --",-1),e("option",{value:"name"},"Nom",-1),e("option",{value:"email"},"Email",-1),e("option",{value:"phone"},"Téléphone",-1)])],8,Dt),[[H,g.value[s]]])])])}),128))]),e("div",Nt,[e("div",Ft,[c(d(ke),{class:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),t[38]||(t[38]=e("div",{class:"text-sm"},[e("p",{class:"font-medium mb-1"},"Champs obligatoires"),e("p",{class:"text-muted-foreground"},"Les champs Nom, Email et Téléphone sont obligatoires pour chaque contact.")],-1))])]),e("div",Lt,[e("button",{onClick:t[9]||(t[9]=s=>p.value=1),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Retour "),e("button",{onClick:t[10]||(t[10]=s=>p.value=3),disabled:!se.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"}," Continuer ",8,Ut)])])):v("",!0),p.value===3?(i(),l("div",Tt,[e("div",Bt,[t[39]||(t[39]=e("p",{class:"text-sm font-medium mb-2"},"Aperçu des données",-1)),e("p",qt," Vérifiez les données avant l'importation. "+n(b.value.length)+" contacts valides sur "+n(k.value.length)+". ",1)]),e("div",Ht,[e("table",Rt,[t[41]||(t[41]=e("thead",{class:"border-b bg-muted/50 sticky top-0"},[e("tr",null,[e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground text-xs"},"Nom"),e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground text-xs"},"Email"),e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground text-xs"},"Téléphone"),e("th",{class:"h-10 px-4 text-left align-middle font-medium text-muted-foreground text-xs"},"Statut")])],-1)),e("tbody",null,[(i(!0),l(R,null,Z(b.value.slice(0,20),(s,r)=>(i(),l("tr",{key:r,class:"border-b"},[e("td",Zt,n(s.name),1),e("td",Gt,n(s.email),1),e("td",Pt,n(s.phone),1),t[40]||(t[40]=e("td",{class:"p-3 text-sm"},[e("span",{class:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold bg-success/10 text-success"}," Valide ")],-1))]))),128))])])]),b.value.length>20?(i(),l("div",Jt," ... et "+n(b.value.length-20)+" autres contacts ",1)):v("",!0),e("div",Kt,[e("button",{onClick:t[11]||(t[11]=s=>p.value=2),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"}," Retour "),e("button",{onClick:ue,disabled:V.value||b.value.length===0,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-success text-success-foreground hover:bg-success/90 h-10 px-4 py-2"},[V.value?(i(),l("div",Qt)):(i(),J(d(Q),{key:1,class:"w-4 h-4"})),e("span",null,n(V.value?"Importation...":`Importer ${b.value.length} contacts`),1)],8,Ot)])])):v("",!0)])])):v("",!0)]),_:1}))}});export{is as default};
