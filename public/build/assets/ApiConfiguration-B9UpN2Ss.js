import{o as i,c as d,b as e,d as z,r as g,a as $,m as N,n as b,p as G,x as l,y as a,s as j,i as x,f as w,v as k,h as O,t as h,g as A}from"./main-C4DO3Dsj.js";import{_ as Z,f as C,l as q}from"./api-CXrFqO90.js";import{r as P}from"./KeyIcon-Cf9YRMRG.js";import{r as S}from"./CheckCircleIcon-Dl7O4YO0.js";import{a as F,r as H}from"./XCircleIcon-v2RYruxi.js";import{r as J}from"./UserIcon-X9Zvl78j.js";import{r as R}from"./EyeIcon-kA9QmkL6.js";import{r as K}from"./IdentificationIcon-aEdFjC0q.js";import{r as Q}from"./BoltIcon-BvYqRSpH.js";function W(_,m){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function X(_,m){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function V(_,m){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}function Y(_,m){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const ee={class:"p-8"},se={class:"mb-8"},te={class:"flex items-center gap-2"},oe={key:0,class:"flex items-center justify-center py-12"},re={key:1,class:"max-w-5xl mx-auto space-y-6"},ne={class:"rounded-lg border bg-card shadow-sm overflow-hidden"},ie={class:"p-6"},ae={class:"flex items-start justify-between mb-6"},le={class:"flex items-start gap-4"},de={class:"flex items-center gap-3"},ue={key:0,class:"px-2 py-1 rounded-full bg-success/10 text-success text-xs font-medium flex items-center gap-1"},ce={key:1,class:"px-2 py-1 rounded-full bg-muted text-muted-foreground text-xs font-medium flex items-center gap-1"},fe={class:"flex items-center gap-4 mt-3"},me={class:"flex items-center gap-1.5 text-xs"},ge={key:0,class:"pt-6 border-t space-y-6"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={class:"space-y-2"},be={class:"text-sm font-medium flex items-center gap-2"},xe={class:"space-y-2"},we={class:"text-sm font-medium flex items-center gap-2"},he={class:"relative"},_e=["type"],ye={class:"space-y-2"},ke={class:"text-sm font-medium flex items-center gap-2"},Ce={class:"space-y-2"},Me={class:"text-sm font-medium flex items-center gap-2"},$e={class:"space-y-2"},Ae={class:"text-sm font-medium flex items-center gap-2"},Se={class:"flex gap-3"},je=["disabled"],Pe=["disabled"],Ve={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"},Ee=["disabled"],Te={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},Ue={key:0,class:"rounded-lg bg-success/10 border border-success/20 p-4"},Be={class:"flex items-center gap-2 text-success"},Ie={class:"font-medium"},De={key:1,class:"rounded-lg bg-destructive/10 border border-destructive/20 p-4"},Le={class:"flex items-center gap-2 text-destructive"},ze={class:"font-medium"},Ke=z({__name:"ApiConfiguration",setup(_){const m=g(!0),p=g(["airtel"]),y=$({airtel:!1,moov:!1}),v=$({airtel:!1,moov:!1}),c=$({airtel:!1,moov:!1}),u=g(""),f=g(""),r=g({provider:"airtel",api_url:"https://messaging.airtel.ga:9002/smshttp/qs/",username:"",password:"",origin_addr:"",cost_per_sms:20,is_active:!1}),M=g({provider:"moov",api_url:"",username:"",password:"",origin_addr:"",cost_per_sms:20,is_active:!1});function E(t){const s=p.value.indexOf(t);s>-1?p.value.splice(s,1):p.value.push(t)}function T(t){y[t]=!y[t]}async function U(){m.value=!0;try{const t=await C.get("/sms-configs");(t.data.data||t.data).forEach(o=>{o.provider==="airtel"?r.value={...r.value,...o}:o.provider==="moov"&&(M.value={...M.value,...o})})}catch(t){console.error("Error loading configs:",t)}finally{m.value=!1}}async function B(t){var s,o;c[t]=!0,u.value="",f.value="";try{const n=t==="airtel"?r.value:M.value;await C.put(`/sms-configs/${t}`,{api_url:n.api_url,username:n.username,password:n.password,origin_addr:n.origin_addr,cost_per_sms:n.cost_per_sms,is_active:n.is_active}),u.value=`Configuration ${t.toUpperCase()} enregistrée avec succès !`,setTimeout(()=>{u.value=""},3e3)}catch(n){console.error("Save config error:",n),f.value=((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"Erreur lors de l'enregistrement"}finally{c[t]=!1}}async function I(t){var s,o;c[t]=!0,u.value="",f.value="";try{const n=await C.post(`/sms-configs/${t}/toggle`),L=n.data.data;t==="airtel"&&(r.value.is_active=L.is_active),u.value=n.data.message,setTimeout(()=>{u.value=""},3e3)}catch(n){console.error("Toggle error:",n),f.value=((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"Erreur lors du changement de statut"}finally{c[t]=!1}}async function D(t){var s,o;v[t]=!0,u.value="",f.value="";try{const n=await C.post(`/sms-configs/${t}/test`,{phone_number:"+241 77 75 07 37",message:`Test API ${t.toUpperCase()} - ${new Date().toLocaleString()}`});u.value=`✓ Test réussi avec ${t.toUpperCase()} !`,setTimeout(()=>{u.value=""},3e3)}catch(n){console.error("Test error:",n),f.value=((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||`Échec du test ${t.toUpperCase()}`}finally{v[t]=!1}}return N(()=>{U()}),(t,s)=>(i(),b(Z,null,{default:G(()=>[e("div",ee,[e("div",se,[e("div",te,[l(a(P),{class:"w-8 h-8 text-primary"}),s[10]||(s[10]=e("h1",{class:"text-3xl font-bold"},"Configuration des API SMS",-1))]),s[11]||(s[11]=e("p",{class:"text-muted-foreground mt-2"},"Configurez les API des opérateurs Airtel et Moov Gabon",-1))]),m.value?(i(),d("div",oe,[...s[12]||(s[12]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)])])):(i(),d("div",re,[e("div",ne,[e("div",ie,[e("div",ae,[e("div",le,[e("div",{class:j(["w-16 h-16 rounded-lg flex items-center justify-center text-2xl font-bold",r.value.is_active?"bg-red-100 text-red-600":"bg-muted text-muted-foreground"])}," AI ",2),e("div",null,[e("div",de,[s[15]||(s[15]=e("h3",{class:"text-xl font-bold"},"Airtel Gabon",-1)),r.value.is_active?(i(),d("span",ue,[l(a(S),{class:"w-3 h-3"}),s[13]||(s[13]=e("span",null,"Actif",-1))])):(i(),d("span",ce,[l(a(F),{class:"w-3 h-3"}),s[14]||(s[14]=e("span",null,"Inactif",-1))]))]),s[17]||(s[17]=e("p",{class:"text-sm text-muted-foreground mt-1"},"API SMS Airtel - Préfixes: 77, 74, 76",-1)),e("div",fe,[e("div",me,[l(a(V),{class:"w-4 h-4 text-muted-foreground"}),s[16]||(s[16]=e("span",{class:"text-muted-foreground"},"messaging.airtel.ga",-1))])])])]),e("button",{onClick:s[0]||(s[0]=o=>E("airtel")),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground h-9 w-9"},[l(a(q),{class:j(["w-5 h-5 transition-transform",p.value.includes("airtel")?"rotate-180":""])},null,8,["class"])])]),p.value.includes("airtel")?(i(),d("div",ge,[e("div",pe,[e("div",ve,[e("label",be,[l(a(J),{class:"w-4 h-4 text-muted-foreground"}),s[18]||(s[18]=x(" Username * ",-1))]),w(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>r.value.username=o),type:"text",placeholder:"Entrez le username",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[k,r.value.username]])]),e("div",xe,[e("label",we,[l(a(P),{class:"w-4 h-4 text-muted-foreground"}),s[19]||(s[19]=x(" Password * ",-1))]),e("div",he,[w(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>r.value.password=o),type:y.airtel?"text":"password",placeholder:"Entrez le password",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pr-10 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,8,_e),[[O,r.value.password]]),e("button",{onClick:s[3]||(s[3]=o=>T("airtel")),type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 hover:bg-accent rounded p-1"},[y.airtel?(i(),b(a(X),{key:1,class:"w-4 h-4 text-muted-foreground"})):(i(),b(a(R),{key:0,class:"w-4 h-4 text-muted-foreground"}))])])]),e("div",ye,[e("label",ke,[l(a(K),{class:"w-4 h-4 text-muted-foreground"}),s[20]||(s[20]=x(" Origin Address / Sender ID * ",-1))]),w(e("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>r.value.origin_addr=o),type:"text",placeholder:"Ex: JOBSSMS",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[k,r.value.origin_addr]])]),e("div",Ce,[e("label",Me,[l(a(W),{class:"w-4 h-4 text-muted-foreground"}),s[21]||(s[21]=x(" Coût par SMS (FCFA) ",-1))]),w(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>r.value.cost_per_sms=o),type:"number",step:"1",min:"0",placeholder:"20",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[k,r.value.cost_per_sms,void 0,{number:!0}]])])]),e("div",$e,[e("label",Ae,[l(a(V),{class:"w-4 h-4 text-muted-foreground"}),s[22]||(s[22]=x(" URL de l'API ",-1))]),w(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>r.value.api_url=o),type:"text",readonly:"",class:"flex h-10 w-full rounded-md border border-input bg-muted px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground"},null,512),[[k,r.value.api_url]])]),e("div",Se,[e("button",{onClick:s[7]||(s[7]=o=>I("airtel")),disabled:c.airtel,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"},[l(a(Q),{class:"w-4 h-4"}),e("span",null,h(r.value.is_active?"Désactiver":"Activer"),1)],8,je),e("button",{onClick:s[8]||(s[8]=o=>D("airtel")),disabled:!r.value.username||!r.value.password||v.airtel,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2"},[v.airtel?(i(),d("div",Ve)):(i(),b(a(Y),{key:0,class:"w-4 h-4"})),e("span",null,h(v.airtel?"Test en cours...":"Tester"),1)],8,Pe),e("button",{onClick:s[9]||(s[9]=o=>B("airtel")),disabled:!r.value.username||!r.value.password||c.airtel,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2"},[c.airtel?(i(),d("div",Te)):(i(),b(a(S),{key:0,class:"w-4 h-4"})),e("span",null,h(c.airtel?"Enregistrement...":"Enregistrer"),1)],8,Ee)])])):A("",!0)])]),s[23]||(s[23]=e("div",{class:"rounded-lg border bg-card shadow-sm overflow-hidden opacity-60"},[e("div",{class:"p-6"},[e("div",{class:"flex items-start justify-between mb-6"},[e("div",{class:"flex items-start gap-4"},[e("div",{class:"w-16 h-16 rounded-lg flex items-center justify-center text-2xl font-bold bg-muted text-muted-foreground"}," MV "),e("div",null,[e("div",{class:"flex items-center gap-3"},[e("h3",{class:"text-xl font-bold"},"Moov Gabon"),e("span",{class:"px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-medium"}," Bientôt disponible ")]),e("p",{class:"text-sm text-muted-foreground mt-1"},"API SMS Moov - Préfixes: 60, 62, 65, 66"),e("p",{class:"text-xs text-muted-foreground mt-2"},"L'API Moov sera configurée dès qu'elle sera disponible")])])])])],-1)),u.value?(i(),d("div",Ue,[e("div",Be,[l(a(S),{class:"w-5 h-5"}),e("p",Ie,h(u.value),1)])])):A("",!0),f.value?(i(),d("div",De,[e("div",Le,[l(a(H),{class:"w-5 h-5"}),e("p",ze,h(f.value),1)])])):A("",!0)]))])]),_:1}))}});export{Ke as default};
