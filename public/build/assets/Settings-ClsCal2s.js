import{d as z,u as D,r as p,m as M,n as y,p as N,o as n,b as s,x as i,y as r,c as g,i as k,f as a,v as f,D as b,C as V,t as _,g as A}from"./main-DN16AQWN.js";import{_ as P,f as S,p as j,j as B,k as F,a as T,b as q,g as R}from"./api-hfkgcsO2.js";import{r as J}from"./UserIcon-DvJMXOP_.js";import{r as U}from"./EnvelopeIcon-DjuFmU-1.js";import{r as O}from"./KeyIcon-oBtUHsig.js";import{r as G}from"./ExclamationTriangleIcon-0LkjgRUc.js";import{r as H}from"./GlobeAltIcon-DqsFvBlL.js";import{r as C}from"./CheckCircleIcon-Cp_SFVWG.js";import{r as I,a as K}from"./XCircleIcon-Cd9S8Nzz.js";const Q={class:"p-4 sm:p-6 lg:p-8"},W={class:"mb-6 sm:mb-8"},X={class:"flex items-center gap-2"},Y={key:0,class:"flex items-center justify-center py-12"},Z={key:1,class:"max-w-2xl space-y-4 sm:space-y-6"},ee={class:"rounded-lg border bg-card p-4 sm:p-6"},se={class:"flex items-center gap-2 mb-3 sm:mb-4"},te={class:"space-y-3 sm:space-y-4"},oe={class:"space-y-1.5 sm:space-y-2"},re={class:"text-xs sm:text-sm font-medium flex items-center gap-2"},ie={class:"space-y-1.5 sm:space-y-2"},ae={class:"text-xs sm:text-sm font-medium flex items-center gap-2"},le={class:"rounded-lg border bg-card p-4 sm:p-6"},ne={class:"flex items-center gap-2 mb-3 sm:mb-4"},de={class:"space-y-3 sm:space-y-4"},ue={class:"space-y-1.5 sm:space-y-2"},me={class:"space-y-1.5 sm:space-y-2"},ce={class:"rounded-lg border bg-card p-4 sm:p-6"},pe={class:"flex items-center gap-2 mb-3 sm:mb-4"},fe={class:"space-y-2 sm:space-y-3"},ge={class:"flex items-center gap-2 sm:gap-3 cursor-pointer p-2 sm:p-3 rounded-lg hover:bg-muted/50 transition-colors"},ve={class:"flex-1 min-w-0"},be={class:"flex items-center gap-1.5 sm:gap-2"},xe={class:"flex items-center gap-2 sm:gap-3 cursor-pointer p-2 sm:p-3 rounded-lg hover:bg-muted/50 transition-colors"},_e={class:"flex-1 min-w-0"},he={class:"flex items-center gap-1.5 sm:gap-2"},we={class:"flex items-center gap-2 sm:gap-3 cursor-pointer p-2 sm:p-3 rounded-lg hover:bg-muted/50 transition-colors"},ye={class:"flex-1 min-w-0"},ke={class:"flex items-center gap-1.5 sm:gap-2"},Ve={class:"flex items-center gap-2 sm:gap-3 cursor-pointer p-2 sm:p-3 rounded-lg hover:bg-muted/50 transition-colors"},Ae={class:"flex-1 min-w-0"},Se={class:"flex items-center gap-1.5 sm:gap-2"},Ue={class:"rounded-lg border bg-card p-4 sm:p-6"},Ce={class:"flex items-center gap-2 mb-3 sm:mb-4"},$e={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"},Ee={class:"space-y-1.5 sm:space-y-2"},Le={class:"space-y-1.5 sm:space-y-2"},ze={class:"rounded-lg border bg-card p-4 sm:p-6"},De={class:"flex items-center gap-2 mb-3 sm:mb-4"},Me={class:"space-y-3 sm:space-y-4"},Ne={class:"space-y-1.5 sm:space-y-2"},Pe={class:"space-y-1.5 sm:space-y-2"},je={key:0,class:"rounded-lg bg-success/10 border border-success/20 p-4"},Be={class:"flex items-center gap-2 text-success"},Fe={class:"font-medium"},Te={key:1,class:"rounded-lg bg-destructive/10 border border-destructive/20 p-4"},qe={class:"flex items-center gap-2 text-destructive"},Re={class:"font-medium"},Je={class:"flex flex-col sm:flex-row gap-2 sm:gap-3"},Oe=["disabled"],Ge={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},He=["disabled"],os=z({__name:"Settings",setup(Ie){const d=D(),x=p(!0),u=p(!1),m=p(""),c=p(""),t=p({name:"",email:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0,campaign_alerts:!0,low_credit_alert:!0,language:"fr",timezone:"Africa/Libreville",default_signature:"",credit_alert_threshold:5e3}),v=p({name:"",email:"",password:"",password_confirmation:"",email_notifications:!0,weekly_reports:!0,campaign_alerts:!0,low_credit_alert:!0,language:"fr",timezone:"Africa/Libreville",default_signature:"",credit_alert_threshold:5e3});async function $(){try{x.value=!0;const l=await S.get("/user/profile"),e=l.data.data||l.data;t.value={name:e.name||"",email:e.email||"",password:"",password_confirmation:"",email_notifications:e.email_notifications??!0,weekly_reports:e.weekly_reports??!0,campaign_alerts:e.campaign_alerts??!0,low_credit_alert:e.low_credit_alert??!0,language:e.language||"fr",timezone:e.timezone||"Africa/Libreville",default_signature:e.default_signature||"",credit_alert_threshold:e.credit_alert_threshold||5e3},v.value={...t.value}}catch(l){console.error("Error loading settings:",l),d.user&&(t.value.name=d.user.name||"",t.value.email=d.user.email||"",v.value={...t.value})}finally{x.value=!1}}async function E(){var l,e;try{if(u.value=!0,m.value="",c.value="",t.value.password&&t.value.password!==t.value.password_confirmation){c.value="Les mots de passe ne correspondent pas";return}const o={name:t.value.name,email:t.value.email,email_notifications:t.value.email_notifications,weekly_reports:t.value.weekly_reports,campaign_alerts:t.value.campaign_alerts,low_credit_alert:t.value.low_credit_alert,language:t.value.language,timezone:t.value.timezone,default_signature:t.value.default_signature,credit_alert_threshold:t.value.credit_alert_threshold};t.value.password&&(o.password=t.value.password,o.password_confirmation=t.value.password_confirmation);const h=await S.put("/user/profile",o),w=h.data.data||h.data;d.user&&(d.user.name=w.name,d.user.email=w.email),t.value.password="",t.value.password_confirmation="",v.value={...t.value},m.value="Paramètres enregistrés avec succès",setTimeout(()=>{m.value=""},3e3)}catch(o){console.error("Error saving settings:",o),c.value=((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.message)||"Erreur lors de l'enregistrement des paramètres"}finally{u.value=!1}}function L(){t.value={...v.value},m.value="",c.value=""}return M(()=>{$()}),(l,e)=>(n(),y(P,null,{default:N(()=>[s("div",Q,[s("div",W,[s("div",X,[i(r(j),{class:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),e[12]||(e[12]=s("h1",{class:"text-2xl sm:text-3xl font-bold"},"Paramètres",-1))]),e[13]||(e[13]=s("p",{class:"text-sm text-muted-foreground mt-1 sm:mt-2"},"Configurez votre compte et vos préférences",-1))]),x.value?(n(),g("div",Y,[...e[14]||(e[14]=[s("div",{class:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-b-2 border-primary"},null,-1)])])):(n(),g("div",Z,[s("div",ee,[s("div",se,[i(r(B),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[15]||(e[15]=s("h3",{class:"font-semibold text-sm sm:text-base"},"Profil",-1))]),s("div",te,[s("div",oe,[s("label",re,[i(r(J),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),e[16]||(e[16]=k(" Nom complet ",-1))]),a(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o),type:"text",placeholder:"Votre nom complet",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.name]])]),s("div",ie,[s("label",ae,[i(r(U),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground"}),e[17]||(e[17]=k(" Email ",-1))]),a(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.email=o),type:"email",placeholder:"votre@email.com",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.email]])])])]),s("div",le,[s("div",ne,[i(r(O),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[18]||(e[18]=s("h3",{class:"font-semibold text-sm sm:text-base"},"Sécurité",-1))]),s("div",de,[s("div",ue,[e[19]||(e[19]=s("label",{class:"text-xs sm:text-sm font-medium"},"Nouveau mot de passe",-1)),a(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.password=o),type:"password",placeholder:"Laisser vide pour ne pas changer",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.password]])]),s("div",me,[e[20]||(e[20]=s("label",{class:"text-xs sm:text-sm font-medium"},"Confirmer le mot de passe",-1)),a(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.password_confirmation=o),type:"password",placeholder:"Confirmer le nouveau mot de passe",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},null,512),[[f,t.value.password_confirmation]])])])]),s("div",ce,[s("div",pe,[i(r(F),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[21]||(e[21]=s("h3",{class:"font-semibold text-sm sm:text-base"},"Notifications",-1))]),s("div",fe,[s("label",ge,[a(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.email_notifications=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary flex-shrink-0"},null,512),[[b,t.value.email_notifications]]),s("div",ve,[s("div",be,[i(r(U),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e[22]||(e[22]=s("div",{class:"font-medium text-xs sm:text-sm"},"Notifications email",-1))]),e[23]||(e[23]=s("div",{class:"text-xs text-muted-foreground mt-0.5 sm:mt-1 hidden sm:block"},"Recevoir les alertes importantes par email",-1))])]),s("label",xe,[a(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.weekly_reports=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary flex-shrink-0"},null,512),[[b,t.value.weekly_reports]]),s("div",_e,[s("div",he,[i(r(T),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e[24]||(e[24]=s("div",{class:"font-medium text-xs sm:text-sm"},"Rapports hebdo",-1))]),e[25]||(e[25]=s("div",{class:"text-xs text-muted-foreground mt-0.5 sm:mt-1 hidden sm:block"},"Recevoir les statistiques chaque lundi matin",-1))])]),s("label",we,[a(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.campaign_alerts=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary flex-shrink-0"},null,512),[[b,t.value.campaign_alerts]]),s("div",ye,[s("div",ke,[i(r(G),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e[26]||(e[26]=s("div",{class:"font-medium text-xs sm:text-sm"},"Alertes campagnes",-1))]),e[27]||(e[27]=s("div",{class:"text-xs text-muted-foreground mt-0.5 sm:mt-1 hidden sm:block"},"Être notifié en cas d'échec ou d'anomalie",-1))])]),s("label",Ve,[a(s("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.low_credit_alert=o),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary flex-shrink-0"},null,512),[[b,t.value.low_credit_alert]]),s("div",Ae,[s("div",Se,[i(r(q),{class:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground flex-shrink-0"}),e[28]||(e[28]=s("div",{class:"font-medium text-xs sm:text-sm"},"Alerte crédit faible",-1))]),e[29]||(e[29]=s("div",{class:"text-xs text-muted-foreground mt-0.5 sm:mt-1 hidden sm:block"},"Être notifié quand le solde est bas",-1))])])])]),s("div",Ue,[s("div",Ce,[i(r(H),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[30]||(e[30]=s("h3",{class:"font-semibold text-sm sm:text-base"},"Préférences régionales",-1))]),s("div",$e,[s("div",Ee,[e[32]||(e[32]=s("label",{class:"text-xs sm:text-sm font-medium"},"Langue",-1)),a(s("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.language=o),class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[31]||(e[31]=[s("option",{value:"fr"},"Français",-1),s("option",{value:"en"},"English",-1)])],512),[[V,t.value.language]])]),s("div",Le,[e[34]||(e[34]=s("label",{class:"text-xs sm:text-sm font-medium"},"Fuseau horaire",-1)),a(s("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.timezone=o),class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[33]||(e[33]=[s("option",{value:"Africa/Libreville"},"Africa/Libreville",-1),s("option",{value:"Africa/Lagos"},"Africa/Lagos",-1),s("option",{value:"Africa/Douala"},"Africa/Douala",-1),s("option",{value:"Europe/Paris"},"Europe/Paris",-1),s("option",{value:"UTC"},"UTC",-1)])],512),[[V,t.value.timezone]])])])]),s("div",ze,[s("div",De,[i(r(R),{class:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),e[35]||(e[35]=s("h3",{class:"font-semibold text-sm sm:text-base"},"Préférences SMS",-1))]),s("div",Me,[s("div",Ne,[e[36]||(e[36]=s("label",{class:"text-xs sm:text-sm font-medium"},"Signature par défaut",-1)),a(s("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.default_signature=o),type:"text",placeholder:"Ex: - JOBS SMS",maxlength:"30",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[f,t.value.default_signature]]),e[37]||(e[37]=s("p",{class:"text-xs text-muted-foreground"},"Ajoutée à la fin de vos messages (max 30 car.)",-1))]),s("div",Pe,[e[38]||(e[38]=s("label",{class:"text-xs sm:text-sm font-medium"},"Seuil alerte crédit (FCFA)",-1)),a(s("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.credit_alert_threshold=o),type:"number",min:"0",step:"1000",placeholder:"5000",class:"flex h-9 sm:h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[f,t.value.credit_alert_threshold,void 0,{number:!0}]]),e[39]||(e[39]=s("p",{class:"text-xs text-muted-foreground"},"Alerte quand le solde est en dessous",-1))])])]),m.value?(n(),g("div",je,[s("div",Be,[i(r(C),{class:"w-5 h-5"}),s("p",Fe,_(m.value),1)])])):A("",!0),c.value?(n(),g("div",Te,[s("div",qe,[i(r(I),{class:"w-5 h-5"}),s("p",Re,_(c.value),1)])])):A("",!0),s("div",Je,[s("button",{onClick:E,disabled:u.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 sm:h-10 px-3 sm:px-4 py-2"},[u.value?(n(),g("div",Ge)):(n(),y(r(C),{key:0,class:"w-4 h-4"})),s("span",null,_(u.value?"Enregistrement...":"Enregistrer"),1)],8,Oe),s("button",{onClick:L,disabled:u.value,class:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 sm:h-10 px-3 sm:px-4 py-2"},[i(r(K),{class:"w-4 h-4"}),e[40]||(e[40]=s("span",null,"Annuler",-1))],8,He)])]))])]),_:1}))}});export{os as default};
